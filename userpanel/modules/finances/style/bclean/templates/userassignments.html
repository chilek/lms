{box title="Your subscriptions"}
{$show_speeds = ConfigHelper::checkConfig('userpanel.show_speeds')}
{$count = 0}
<div class="table-responsive">
	<table class="table table-sm table-bordered table-striped table-condensed">
		<tr class="bg-secondary text-white">
			<td class="p-2">{trans("Tariff")}</td>
			<td class="p-2">{trans("Subscription")}</td>
		</tr>
		{foreach $assignments as $assignment}
		{if ($assignment.tariffid || $assignment.liabilityid) && !($assignment.suspended || ($assignment.dateto < $smarty.now && $assignment.dateto) || ($assignment.datefrom > $smarty.now && $assignment.datefrom)) && $assignment.value != 0 }
				<tr>
					<td>{$assignment.name}</td>
					<td class="text-right">{($assignment.value - $assignment.vdiscount - $assignment.value * $assignment.pdiscount/100)|money_format}</td>
					{if $show_speeds}
					<td>{$assignment.downrate|default:"-"} ({$assignment.downceil|default:"-"}) kbit/s</td>
					<td>{$assignment.uprate|default:"-"} ({$assignment.upceil|default:"-"}) kbit/s</td>
					{/if}
				</tr>
				{$count = $count +1}
			{/if}
		{foreachelse}
			<tr>
				<td colspan="{if $show_speeds}8{else}6{/if}">
					{trans("You haven't got any assigned subscriptions.")}
				</td>
			</tr>
		{/foreach}
		{if $count > 1}
			<tr class="bg-info text-white">
				<td>{trans("Total:")}</td>
				<td class="text-right">{sum array=$assignments column="real_disc_value" string_format=$LANGDEFS.$_language.money_format}</td>
				{if $show_speeds}
				<td>{sum array=$assignments column="real_downrate" default="-"} ({sum array=$assignments column="real_downceil" default="-"}) kbit/s
				<td>{sum array=$assignments column="real_uprate" default="-"} ({sum array=$assignments column="real_upceil" default="-"}) kbit/s</td>
				{/if}
			</tr>
		{/if}
	</table>
</div>
{/box}
