<!-- $Id$ -->
<chapter id="contrib">
<title>Dodatki</title>
	<para>W niniejszym rozdziale zostan± opisane dodatkowe modu³y i rozwi±zania
	zwiêkszaj±ce funkcjonalno¶æ LMS'a znajduj±ce siê w katalogu 
	<filename>contrib</filename>. Czê¶æ z nich nale¿y dostosowaæ do w³asnych 
	potrzeb, a niektóre integruj± siê z interfejsem <emphasis>LMS-UI</emphasis>.</para>
	<sect1 id="contrib-customer">
    	<title>Moje konto</title>
		<sect2 id="customer-intro">
		<title>Wstêp</title>
		<para>W katalogu <filename>contrib/customer</filename> znajduje siê
		przyk³ad rozwi±zania, dziêki któremu ka¿dy klient twojej sieci
		mo¿e sprawdziæ w³asny bilans finansowy.</para>
		<para>Skrypt sprawdza spod jakiego adresu jest ¿±danie i wy¶wietla
		bilans i informacje o kliencie, który jest w³a¶cicielem komputera
		o tym adresie.</para>
		<para>Dla osób korzystaj±cych z proxy, nie korzystaj±cych
		z sieci tylko w domu, albo którzy nie chc± aby dzieci/ma³¿onkowie/pracownicy 
		mieli wgl±d w dane finansowe dotycz±ce ich dostêpu do sieci/innych 
		us³ug przeznaczone jest "Moje konto 2".</para>
		</sect2>
		<sect2 id="customer-install">
		<title>Instalacja</title>
		<para>Pliki nale¿y skopiowaæ w dowolne miejsce i wystawiæ
		pod adresem dostêpnym dla ka¿dego u¿ytkownika, a nastêpnie
		ustawiæ poprawn± ¶cie¿kê do <filename>lms.ini</filename> w pliku 
		<filename>index.php</filename>.</para>	
		</sect2>
	</sect1>
	<sect1 id="contrib-customer2">
    	<title>Moje konto 2</title>
		<sect2 id="customer2-intro">
		<title>Wstêp</title>
		<para>W katalogu <filename>contrib/customer_otherip</filename> znajduje siê
		odpowiednik <filename>contrib/customer</filename>, który nie rozpoznaje
		klienta po adresie IP, ale wymaga logowania. Uwierzytelnianie odbywa siê na 
		podstawie numeru PIN oraz telefonu klienta, ale mo¿liwe jest tak¿e
		wykorzystanie ID lub numeru umowy (dodatkowe pole w bazie) - patrz 
		pliki balanceview.php i authentication.inc).</para>
		<para>Skrypt wy¶wietla bilans i informacje o kliencie, a tak¿e w po³±czeniu
		z <filename>contrib/formularz_przelewu_wplaty</filename> umo¿liwia klientowi
		wydrukowanie druku wp³aty na kwotê zaleg³o¶ci.</para>
		</sect2>
		<sect2 id="customer2-install">
		<title>Instalacja</title>
		<para>Instalacja sprowadza siê do ustawienia opcji <filename>sys_dir</filename>
		w sekcji <emphasis>[directories]</emphasis> pliku lms.ini oraz zlinkowania 
		katalogu <filename>img</filename> z lms'owymi ikonkami.</para>	
		</sect2>
	</sect1>
	<sect1 id="contrib-sqlpanel">
    	<title>Panel SQL</title>
		<sect2 id="sqlpanel-intro">
		<title>Wstêp</title>
		<para>W katalogu <filename>contrib/sqlpanel</filename> znajdziesz
		modu³, dziêki któremu bêdziesz mia³ mo¿liwo¶æ bezpo¶redniego dostêpu 
		do bazy danych poprzez zadawanie zapytañ SQL. Wyniki wy¶wietlane s±
		w formie tabeli. Ponadto podawany jest czas wykonania zapytania. 
		Mo¿liwe jest tak¿e drukowanie wyników zapytania.</para>
		<para>Ilo¶æ wy¶wietlanych wierszy na jednej stronie ograniczana jest
		domy¶lnie do 50. Mo¿na to zmieniæ przy pomocy zmiennej '<prompt>sqlpanel_pagelimit</prompt>'
		w sekcji <emphasis>[phpui]</emphasis> pliku konfiguracyjnego <filename>lms.ini</filename>.</para>
		</sect2>
		<sect2 id="sqlpanel-install">
		<title>Instalacja</title>
		<para>Instalacja polega na skopiowaniu plików w odpowiednie miejsca
		w drzewie katalogów lms'a. Plik <filename>sql.php</filename> skopiuj
		do katalogu <filename>modules</filename>, a pliki <filename>sql.html, sqlprint.html, 
		adminheader.html</filename> do katalogu <filename>templates</filename>.
		Po tej czynno¶ci dostêp do modu³u bêdzie mo¿liwy z menu 
		<emphasis>Administracja->SQL.</emphasis></para>
		</sect2>
	</sect1>
	<sect1 id="contrib-squid-warn">
    	<title>Ostrze¿enia + squid</title>
		<sect2 id="squid-warn-intro">
		<title>Wstêp</title>
		<para>Ten ma³y zestaw narzêdzi pozwala za pomoc± squida 
		w dosyæ elegancki sposób wy¶wietlaæ wiadomo¶ci administracyjne.
		Oczywi¶cie aby to dzia³a³o w 100%, wszyscy u¿ytkownicy musz± 
		korzystaæ ze squida.</para>
		<para>Kluczowym elementem jest redirector. Odpowiada on za to, 
		aby w momencie ustawienia dla danego komputera flagi warn, 
		przekierowywa³ wszystkie ¿±dania wysy³ane do serwera proxy na nasz, 
		ustalony wcze¶niej adres. Przekierowaniu nie ulegaj± adresy zawieraj±ce 
		adres naszej winetki, tak aby umo¿liwiæ za³adowanie siê obrazków.
		Po przekierowaniu klient ma mo¿liwo¶æ oznaczenia wiadomo¶ci jako 
		przeczytanej, po czym skrypt automatycznie kieruje przegl±darkê na 
		pierwotnie wywo³ywany URL. Wiêcej informacji znajdziesz w pliku
		<filename>README</filename>.</para>
		</sect2>
		<sect2 id="squid-warn-install">
		<title>Instalacja</title>
		<para>Zaczynamy od konfiguracji squida (<filename>squid.conf</filename>):
<screen>
redirector_bypass on
redirect_program /sciezka/do/lms-squid-warnings
</screen>
		które informuj± squida aby dla ka¿dego adresu u¿ywa³ naszego 
		redirectora. Nastêpnie nale¿y skonfigurowaæ redirectora. Otwieramy 
		w naszym ulubionym edytorze plik lms-squid-warnings i praktycznie
		wszystko co mo¿na w nim ustawiæ to:
<screen>
my $configfile = '/etc/lms/lms.ini';
</screen>
		Czyli po³o¿enie pliku konfiguracyjnego. Reszta konfiguracji 
		ustawiana jest w <filename>lms.ini</filename>, gdzie dopisujemy sekcjê 
		<filename>[squid-warnings]</filename> i definiujemy adres winetki:
<screen>
[squid-warnings]
redirect        = http://nasz.serwer.pl/winetka/
</screen>
		Do katalogu gdzie ma byæ widoczna winetka kopiujemy pliki
		<filename>index.php, message.html</filename> i zawarto¶æ katalogu 
		<filename>img</filename>.</para>
		</sect2>
	</sect1>
</chapter>
