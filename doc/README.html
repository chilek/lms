<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>LMS - LAN Management System 1.5-cvs</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="../images/style.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="BOOK"
BGCOLOR="#EBE4D6"
TEXT="#000000"
><DIV
CLASS="BOOK"
><A
NAME="AEN1"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>LMS - LAN Management System 1.5-cvs</A
></H1
><DIV
CLASS="MEDIAOBJECT"
><P
><IMG
SRC="../images/logo-small.png"></P
></DIV
><H3
CLASS="CORPAUTHOR"
> LMS Developers</H3
><P
CLASS="COPYRIGHT"
>Copyright &copy; 2001-2005  LMS Developers</P
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="#INTRO"
>Intro</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#ABOUT-LMS"
>About LMS</A
></DT
><DT
>1.2. <A
HREF="#AUTHORS"
>Authors</A
></DT
><DT
>1.3. <A
HREF="#LEGALNOTICE"
>Legal Notice</A
></DT
><DT
>1.4. <A
HREF="#MOREINFO"
>Other Information</A
></DT
></DL
></DD
><DT
>2. <A
HREF="#INSTALL"
>Installation and configuration</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#INSTALL-INTRO"
>Intro</A
></DT
><DT
>2.2. <A
HREF="#INSTALL-REQUIREMENTS"
>Requirements</A
></DT
><DT
>2.3. <A
HREF="#INSTALL-INSTALL"
>LMS Installation</A
></DT
><DT
>2.4. <A
HREF="#INSTALL-DB"
>Database Server Installation</A
></DT
><DT
>2.5. <A
HREF="#INSTALL-CONFIG"
>Basic Configuration</A
></DT
><DT
>2.6. <A
HREF="#INSTALL-RIGHTS"
>Access rights</A
></DT
><DT
>2.7. <A
HREF="#INSTALL-UPGRADE"
>Upgrade</A
></DT
></DL
></DD
><DT
>3. <A
HREF="#DAEMON"
>A.L.E.C's LMS Daemon</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#DAEMON-INTRO"
>Basics</A
></DT
></DL
></DD
></DL
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="INTRO"
></A
>Chapter 1. Intro</H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="ABOUT-LMS"
>1.1. About LMS</A
></H2
><P
>"LMS" (LAN Management System) is a package of applications in PHP, Perl and C
          for managing LANs with MySQL, PostgreSQL or SQLite databases support. The main goal is 
          to get the best service of customers at high provider's level. The main features in LMS 
          are:</P
><UL
><LI
><P
>database of customers (name, surname, address, phone numbers, commentary and other),</P
></LI
><LI
><P
>database of computers (IP, MAC),</P
></LI
><LI
><P
>easy-ridden financial system and funds of network,</P
></LI
><LI
><P
>financial balances and invoices</P
></LI
><LI
><P
>sending e-mail warnings to users,</P
></LI
><LI
><P
>automatic billing,</P
></LI
><LI
><P
>generating of (almost) any kind of config file (i.e.
               ipchains/iptables based firewall script, dhcp daemon configuration,
               zone file for bind, static arp entries, oident, htb and more...)</P
></LI
><LI
><P
>visualization of internet link usage stats,</P
></LI
><LI
><P
>request tracker system (Helpdesk),</P
></LI
><LI
><P
>timetable (organizer).</P
></LI
></UL
><P
>All stuff was invented for administration of <A
HREF="http://www.netx.waw.pl/"
TARGET="_top"
>ASK NetX</A
> 
          and there is still developed and tested.</P
><P
>LMS will not replace your administrator's skills. If you can't make
          so simple activity like installation or configuration, probably you'll cannot
          adjust LMS for your system. So, you must have knowledge about administration of 
          UNIX systems.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="AUTHORS"
>1.2. Authors</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="LMS"
>1.2.1. LMS Developers</A
></H3
><UL
><LI
><P
>PHP Code:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://www.baseciq.org"
TARGET="_top"
>Lukasz 'Baseciq' Mozer</A
></TD
></TR
><TR
><TD
>Michal 'DziQs' Zapalski</TD
></TR
><TR
><TD
><A
HREF="http://debian.black.pl"
TARGET="_top"
>Radoslaw 'Warden' Antoniuk</A
></TD
></TR
><TR
><TD
>Krzysztof 'hunter' Drewicz</TD
></TR
><TR
><TD
><A
HREF="http://www.lexx.w.pl"
TARGET="_top"
>Marcin 'Lexx' Krol</A
></TD
></TR
><TR
><TD
><A
HREF="http://alec.pl"
TARGET="_top"
>Aleksander 'A.L.E.C' Machniak</A
></TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>C Code:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://alec.pl"
TARGET="_top"
>Aleksander 'A.L.E.C' Machniak</A
></TD
></TR
><TR
><TD
><A
HREF="http://www.lexx.w.pl"
TARGET="_top"
>Marcin 'Lexx' Krol</A
></TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>Perl Code:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://wwww.baseciq.org"
TARGET="_top"
>Lukasz 'Baseciq' Mozer</A
></TD
></TR
><TR
><TD
>Michal 'DziQs' Zapalski</TD
></TR
><TR
><TD
>Maciej 'agaran' Pijanka</TD
></TR
><TR
><TD
>Krzysztof 'hunter' Drewicz</TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>Design:
              <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://wwww.baseciq.org"
TARGET="_top"
>Lukasz 'Baseciq' Mozer</A
></TD
></TR
></TBODY
></TABLE
>
              </P
></LI
><LI
><P
>HTML, JavaScript, CSS:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://wwww.baseciq.org"
TARGET="_top"
>Lukasz 'Baseciq' Mozer</A
></TD
></TR
><TR
><TD
><A
HREF="http://plug.atn.pl/~bober/"
TARGET="_top"
>Pawel 'Bob_R' Czerski</A
></TD
></TR
><TR
><TD
><A
HREF="http://gamechannel.int.pl"
TARGET="_top"
>Pawel 'sickone' Kisiela</A
></TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>Images:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://pierzak.melanz.org"
TARGET="_top"
>Piotr 'Pierzak' M.</A
></TD
></TR
><TR
><TD
><A
HREF="http://byko.pawlacz.net"
TARGET="_top"
>Grzegorz 'byko' Cichowski</A
></TD
></TR
><TR
><TD
><A
HREF="http://www.kflis.net"
TARGET="_top"
>Kuba 'kflis' Flis</A
></TD
></TR
><TR
><TD
><A
HREF="http://wwww.baseciq.org"
TARGET="_top"
>Lukasz 'Baseciq' Mozer</A
></TD
></TR
><TR
><TD
><A
HREF="http://jimmac.musichall.cz"
TARGET="_top"
>Jakub 'Jimmac' Steiner</A
></TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>MySQL Support:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://s.atn.pl"
TARGET="_top"
>Kuba 'shasta' Jankowski</A
></TD
></TR
><TR
><TD
><A
HREF="http://debian.black.pl"
TARGET="_top"
>Radoslaw 'Warden' Antoniuk</A
></TD
></TR
><TR
><TD
>Przemys³aw Babinski</TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>PostgreSQL &#38; SQLite Support:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://alec.pl"
TARGET="_top"
>Aleksander 'A.L.E.C' Machniak</A
></TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>WWW Page &#38; Documentation:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://alec.pl"
TARGET="_top"
>Aleksander 'A.L.E.C' Machniak</A
></TD
></TR
><TR
><TD
><A
HREF="http://s.atn.pl"
TARGET="_top"
>Kuba 'shasta' Jankowski</A
></TD
></TR
><TR
><TD
><A
HREF="http://www.rednet.krakow.pl/~jabbas/"
TARGET="_top"
>Grzegorz 'JaBBaS' Dziegielewski</A
></TD
></TR
><TR
><TD
><A
HREF="http://wwww.baseciq.org"
TARGET="_top"
>Lukasz 'Baseciq' Mozer</A
></TD
></TR
><TR
><TD
><A
HREF="http://www.lexx.w.pl"
TARGET="_top"
>Marcin 'Lexx' Krol</A
></TD
></TR
></TBODY
></TABLE
>
               </P
></LI
><LI
><P
>Betatesting:
               <TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://byko.pawlacz.net"
TARGET="_top"
>Grzegorz 'byko' Cichowski</A
></TD
></TR
><TR
><TD
><A
HREF="http://debian.black.pl"
TARGET="_top"
>Radoslaw 'Warden' Antoniuk</A
></TD
></TR
><TR
><TD
>Tomasz 'dzwonek' Dzwonkowski</TD
></TR
><TR
><TD
>Sebastian 'Victus' Frasunkiewicz</TD
></TR
><TR
><TD
><A
HREF="http://www.kflis.net"
TARGET="_top"
>Kuba 'kflis' Flis</A
></TD
></TR
><TR
><TD
>Krystian 'UFOczek' Kochanowski</TD
></TR
><TR
><TD
><A
HREF="http://www.rednet.krakow.pl/~jabbas/"
TARGET="_top"
>Grzegorz 'JaBBaS' Dziegielewski</A
></TD
></TR
><TR
><TD
>Andrzej 'chsh' Gradziel</TD
></TR
></TBODY
></TABLE
>
               </P
></LI
></UL
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="OTHERS"
>1.2.2. Others</A
></H3
><P
>LMS uses elements of other software: 
          <A
HREF="http://phpwizard.net/projects/phpMyAdmin/"
TARGET="_top"
>phpMyAdmin</A
>,
          <A
HREF="phpsysinfo.sourceforge.net"
TARGET="_top"
>phpsysinfo</A
>, 
          <A
HREF="florian-amrhein.de/newsportal/index-anglish.php3"
TARGET="_top"
>NewsPortal</A
>, 
          <A
HREF="www.bosrup.com/web/overlib/"
TARGET="_top"
>overLIB</A
>, 
          <A
HREF="www.nirvani.net/software"
TARGET="_top"
>Multipart Mime Email Generator Library</A
>, 
          <A
HREF="www.ros.co.nz/pdf/"
TARGET="_top"
>ezpdf</A
>, 
          <A
HREF="www.softcomplex.com/products/tigra_calendar/"
TARGET="_top"
>Tigra Calendar</A
>,
          Piotr Kleban's polish procedures of number-to-words conversion and
          code examples from <A
HREF="http://www.php.net/manual/"
TARGET="_top"
>          PHP manual</A
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="LEGALNOTICE"
>1.3. Legal Notice</A
></H2
><P
>This program is free software; you can redistribute it and/or modify it 
         under the terms of the GNU General Public License as published by the 
         Free Software Foundation; either version 2 of the License, or (at you option) 
         any later version.</P
><P
>This program is distributed in the hope that it will be useful, but 
         WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
         or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License 
         for more details.</P
><P
>You should have received a copy of the GNU General Public License along 
         with this program; if not, write to the Free Software Foundation, Inc., 
         59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</P
><P
>Text of License is <A
HREF="../../COPYING"
TARGET="_top"
>here</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="MOREINFO"
>1.4. Other Information</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="CONTACT"
>1.4.1. Contact</A
></H3
><P
>Preferably via a mailing list, which you can subscribe sending
               empty e-mail with subject "subscribe lms-en" on address <A
HREF="mailto: ecartis@lists.rulez.pl"
TARGET="_top"
>ecartis@lists.rulez.pl</A
>,
               e-mails are sent on address lms-en@lists.rulez.pl.
               </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="BUGS"
>1.4.2. Ideas and Bugs Advertising</A
></H3
><P
>In order to effectively report bugs or new ideas, best is to subscribe mailing list
               where somebody from authors or users will have a chance to answer
               on questions that are worrying you. Also, available is BTS, where can be
               bugs advertised (needed registration). Reports from BTS going also to mailing list
               so best to subscribe, report bug on BTS, send link on list
               and wait for events evolution. Address of BTS is <A
HREF="http://bts.rulez.pl"
TARGET="_top"
>               http://bts.rulez.pl</A
>.
               </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="LATEST"
>1.4.3. Newest version</A
></H3
><P
>Allways, newest version of LMS can be downloaded from CVS repository
               CVS with help of www interface <A
HREF="http://cvs.rulez.pl/viewcvs.cgi/lms/lms.tar.gz?tarball=1"
TARGET="_top"
>here</A
>,
               or classic (anonymous access, empty password):</P
><PRE
CLASS="SCREEN"
>cvs -d :pserver:cvs@cvs.rulez.pl:/home/cvsroot login
cvs -d :pserver:cvs@cvs.rulez.pl:/home/cvsroot co lms
cvs -d :pserver:cvs@cvs.rulez.pl:/home/cvsroot logout</PRE
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="HISTORY"
>1.4.4. Changelog</A
></H3
><P
>Informations about changes, which was made in all
               versions of LMS are included in file <A
HREF="../../ChangeLog"
TARGET="_top"
>               ChangeLog</A
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="INSTALL"
></A
>Chapter 2. Installation and configuration</H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="INSTALL-INTRO"
>2.1. Intro</A
></H2
><P
>LMS consist a few modules, body of LMS is <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
> 
     (user interface). It is in integrity written in PHP and for work require database 
     (in fact every module require database). Exactly in <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
> we perform all 
     actions, the rest of modules is only for automate work of LMS.</P
><P
>LMS is also set of PERL scripts, and exactly these scripts requires 
     to have that language interpreter. If you will want use these scripts, 
     you must have PERL. Among others, scripts allow on monthly counting of subscription fees, 
     or sending of admonitions. It is also <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-MGC</I
></SPAN
>, witch is script too, but
     so much universal that can generate practically any config file and restart 
     service on your server.</P
><P
>At the end it is also <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>A.L.E.C's LMS Daemon</I
></SPAN
>, written in C language, which 
     is assigned (in fact his plugins) for configuration files generation and services restarting. 
     It can be used as replacement or addition of perl scripts.
     It responds for what has been changed in <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
> was made also 
     in real.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-REQUIREMENTS"
>2.2. Requirements</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="INSTALL-REQ-WWW"
>2.2.1. WWW Server</A
></H3
><P
>Because <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
> is written in PHP, necessary is WWW server with interpreter of 
            that language. Perefered server is Apache (<A
HREF="http://www.apache.org"
TARGET="_top"
>www.apache.org</A
>).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-REQ-PHP"
>2.2.2. PHP Interpreter</A
></H3
><P
>Interpreter should be in version 4.2.x or higher, but on 4.1.x also
           works fine (but because developers uses 4.2.3 or higher, can't guarante correct work
           with older versions. PHP can be downloaded from page
          <A
HREF="http://www.php.net"
TARGET="_top"
>www.php.net</A
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-REQ-DB"
>2.2.3. Database Server</A
></H3
><P
>LMS will not work correctly with MySQL versions older than 3.23.xx 
           </P
><P
>LMS also works with PostgreSQL in version 7.3.x or higher.</P
><P
>Cooperation with SQLite database is possible too, but we are tested only version 2.8.11.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-REQ-SMARTY"
>2.2.4. Smarty Library</A
></H3
><P
><SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
> require Smarty library(<A
HREF="http://smarty.php.net"
TARGET="_top"
>http://smarty.php.net</A
>)
           in version 2.5.0 or higher (don't use 2.6.4 version).</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-REQ-PERL"
>2.2.5. Perl</A
></H3
><P
>If for <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
> will suffice above stuff, for working 
          <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-MGC</I
></SPAN
> and the rest of scripts you will need 
          also Perl and modules for him:
       <UL
><LI
><P
>perl and his basic modules (POSIX, GetOpt::Long);</P
></LI
><LI
><P
>Net::SMTP;</P
></LI
><LI
><P
>Config::IniFiles;</P
></LI
><LI
><P
>DBI;</P
></LI
><LI
><P
>DBD-mysql (if you will use mysql);</P
></LI
><LI
><P
>DBD-pg (if you will use postgres);</P
></LI
><LI
><P
>DBD-SQLite (if you will use SQLite);</P
></LI
></UL
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-REQ-C"
>2.2.6. C Compiler</A
></H3
><P
>If you'll run<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>A.L.E.C's LMS Daemon</I
></SPAN
> is needed
       working C compiler, because daemon is providing only in the form of source code.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-INSTALL"
>2.3. LMS Installation</A
></H2
><P
>LMS in the form of tar.gz archive can be downloaded from project 
          home page (<A
HREF="http://www.lms.rulez.pl"
TARGET="_top"
>www.lms.rulez.pl</A
>),
          afterd that should be extracted and placed in chosen directory (i.e. <TT
CLASS="FILENAME"
>/var/www/lms
          </TT
>) available for server www:
<PRE
CLASS="SCREEN"
>$ cd /var/www
$ wget http://lms.rulez.pl/download/stable/lms-x.x.x.tar.gz
$ tar zxf lms-x.x.x.tar.gz</PRE
>
          </P
><P
>Two kind of LMS packets are available - including Smarty library
          (<TT
CLASS="FILENAME"
>lms-x.x.x+libs.tar.gz</TT
>) and without that library.
          If you haven't got package with libraries, you must get and placed them
          in directory <TT
CLASS="FILENAME"
>lib</TT
>.
<PRE
CLASS="SCREEN"
>$ cd /var/www/lms/lib
$ wget http://smarty.php.net/distributions/Smarty-2.6.0.tar.gz
$ tar zxf Smarty-2.6.0.tar.gz
$ mv Smarty-2.6.0/libs Smarty</PRE
>
          </P
><P
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Placement of all directories can be set in section
          <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[directories]</I
></SPAN
> in file <TT
CLASS="FILENAME"
>lms.ini</TT
>.</P
></TD
></TR
></TABLE
></DIV
></P
><P
>Files with configuration (<TT
CLASS="FILENAME"
>sample/lms.ini</TT
> and <TT
CLASS="FILENAME"
>          sample/lms-mgc.ini</TT
>) place in directory <TT
CLASS="FILENAME"
>/etc/lms</TT
>.
          </P
><P
>Exec scripts from directory <TT
CLASS="FILENAME"
>bin</TT
> 
          is preferably to move to directory <TT
CLASS="FILENAME"
>/usr/sbin</TT
>.
          </P
><P
><DIV
CLASS="WARNING"
><TABLE
CLASS="WARNING"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Server www must have reading rights on file <TT
CLASS="FILENAME"
>lms.ini</TT
>
          and writing rights on directory <TT
CLASS="FILENAME"
>backup</TT
>. 
          It makes potential drop of system security level.</P
></TD
></TR
></TABLE
></DIV
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-DB"
>2.4. Database Server Installation</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="INSTALL-MYSQL"
>2.4.1. MySQL</A
></H3
><DIV
CLASS="SECT3"
><H4
CLASS="SECT3"
><A
NAME="INSTALL-MYSQL-INTRO"
>2.4.1.1. Intro</A
></H4
><P
>That very popular database is available with majority of Linux distributions. 
               If however you must install it independently, begin from sources downloading 
               from <A
HREF="http://www.mysql.com"
TARGET="_top"
>www.mysql.com</A
>.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-MYSQL-SERVER"
>2.4.1.2. MySQL Server Installation</A
></H4
><P
>After extracting, go to directory with MySQL and type sequence
               of commands:
               <PRE
CLASS="SCREEN"
>$ ./configure --prefix=/usr/local/mysql
$ make
$ make install
$ /usr/local/mysql/bin/mysql_install_db
$ chown mysql -R /usr/local/mysql/var
$ /usr/local/mysql/bin/safe_mysqld &#38;
$ /usr/local/mysql/bin/mysqladmin -u root password nowe_has³o</PRE
>
          </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-MYSQL-DBCREATE"
>2.4.1.3. Create Database</A
></H4
><P
>It is necesserily if you run LMS at the FIRST time. If you are
               upgrading LMS from older version, appropriate notes what to do with database
               stands in ChangeLog file. So, go to directory, in which you've got LMS and
               run mysql's shell:
<PRE
CLASS="SCREEN"
>mysql -u[here enter user with full access rights to database] -p
Enter password:[just enter password:)]
mysql&#62; create database lms;
mysql&#62; grant usage on lms.* to lms@localhost;
mysql&#62; grant select,insert,update,delete,create,alter on lms.* to lms@localhost identified by 'haslo';
mysql&#62; flush privileges;
mysql&#62; use lms;
mysql&#62; source doc/lms.mysql;</PRE
>
          </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-MYSQL-LMS"
>2.4.1.4. LMS Configuration (lms.ini)</A
></H4
><P
>Because MySQL is default database for LMS, configuration is limited for
               setting in section [database] of file /etc/lms/lms.ini password and user's name:
               <PRE
CLASS="SCREEN"
>user     = lms
password = your_password</PRE
>
              </P
><P
>After that, if LMS can establish connection to database server,
               it is possible get to the system without problems. If in database is no 
               such administrator account, only thing what you'll see
               be form of administrator addition. When you enter correct admin personal
               details, LMS will move you to login page, where at once you can
               use newly created account.
               </P
><P
>Let's stop here, add some stuff to cron, for peace of mind:
               <PRE
CLASS="SCREEN"
>12 4 3,10,17,21,28 * * /usr/bin/mysqldump -u lms --password=your-super-secret-password \
              --add-drop-table --add-locks lms &#62; backups/lms-auto-"$(date +%s)".sql</PRE
>
               </P
><P
>That will create at 4:12 morning, every 3, 10, 17, 21 and 28 day
               of month automagic mysql database backup.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-PGSQL"
>2.4.2. PostgreSQL</A
></H3
><DIV
CLASS="SECT3"
><H4
CLASS="SECT3"
><A
NAME="INSTALL-PGSQL-INTRO"
>2.4.2.1. Intro</A
></H4
><P
>LMS is tested on PostgreSQL 7.3.4 and higher, but because
               special properties of that base are not used, there will be
               no problem with later versions. If you have not instaled PostgreSQL
               server, best solution will be selfhand compilation from
               sources available on <A
HREF="http://www.postgresql.org"
TARGET="_top"
>               www.postgresql.org</A
>.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-PGSQL-SERVER"
>2.4.2.2. Installation</A
></H4
><P
>That is a short version of installation procedure, more info
               can be find in postgres documentation. After download and extraction
               go to main directory and run following commands:
               <PRE
CLASS="SCREEN"
>$ ./configure --enable-locale
$ gmake
$ su
$ gmake install
$ adduser postgres
$ mkdir /usr/local/pgsql/data
$ chown postgres /usr/local/pgsql/data
$ su - postgres
$ /usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data
$ /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data &#62;logfile 2&#62;&#38;1 &#38;</PRE
>
               </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-PGSQL-DBCREATE"
>2.4.2.3. Database Creation</A
></H4
><P
>While server is running you can enter finto creation
               of database with name 'lms', which owner will be user with
               login 'lms'.
               <PRE
CLASS="SCREEN"
>$ /usr/local/pgsql/bin/createuser -d -A -P lms
$ /usr/local/pgsql/bin/createdb -E LATIN2 -U lms lms
$ /usr/local/pgsql/bin/psql -d lms -U lms -f /lms/doc/lms.pgsql</PRE
>
          </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-PGSQL-LMS"
>2.4.2.4. LMS Configuration (lms.ini)</A
></H4
><P
>For LMS default database server is MySQL, so in section
               [database] of file /etc/lms/lms.ini you must set following options:
                  <PRE
CLASS="SCREEN"
>type     = postgres
user     = lms
password = password_entered_while_user_lms_account_creation</PRE
>
              </P
><P
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Password's demand depends on configuration of postgres users autentication
                      in <TT
CLASS="FILENAME"
>/usr/local/pgsql/data/pg_hba.conf</TT
>. 
                      By default password is not required.</P
></TD
></TR
></TABLE
></DIV
></P
><P
>After that, if LMS connects to database, you
               can without problems enter to the system. If in database will be not
               administrator's account, only thing what you'll see will be
               form of administrator's account  addition. When you enter correct data
               LMS will move you to login page, when you can use
               newly created account.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-SQLITE"
>2.4.3. SQLite</A
></H3
><DIV
CLASS="SECT3"
><H4
CLASS="SECT3"
><A
NAME="INSTALL-SQLITE-INTRO"
>2.4.3.1. Intro</A
></H4
><P
>This one-file database is commend for speed. Authors define
               that it is 2-3 times faster than MySQL. Furthermore, with properly 
               configuration it's possible to load whole database in to the RAM 
               menory, during this the efficiency highly increases.
               Below is short description of installation.
               Sources can be downloaded from: <A
HREF="http://www.sqlite.org"
TARGET="_top"
>               www.sqlite.org</A
>.</P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-SQLITE-SERVER"
>2.4.3.2. Installation</A
></H4
><P
>Here You can see how to install the SQLite libraries and
               adding this service to PHP database (in PHP 5.0 ver. have SQLite
               built in).
               After unpacking sources go to SQLite directory and type in
               Commands step by step (for example):
               <PRE
CLASS="SCREEN"
>$ ./configure
$ make
$ make install
$ ldconfig
$ pear download http://pecl.php.net/get/SQLite-1.0.2.tgz
$ pear install SQLite-1.0.2.tgz</PRE
>
               Next in php.ini set:
               <PRE
CLASS="SCREEN"
>extension=sqlite.so</PRE
>
               There is option to compile-in SQLite into PHP : <SAMP
CLASS="PROMPT"
>--with-sqlite</SAMP
>.
               </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-SQLITE-DBCREATE"
>2.4.3.3. Database Creation</A
></H4
><P
>It's necessarily when You running LMS FIRST TIME!
               Go to Yours LMS directory and run SQlite shell:
               <PRE
CLASS="SCREEN"
>$ sqlite -init doc/lms.sqlite /usr/local/lms/lms.db
sqlite&#62; .exit
$ chown 99.98 /usr/local/lms/lms</PRE
>
               </P
></DIV
><DIV
CLASS="SECT3"
><HR><H4
CLASS="SECT3"
><A
NAME="INSTALL-SQLITE-LMS"
>2.4.3.4. LMS Configuration (lms.ini)</A
></H4
><P
>One of the SQLite limits is no authenticity of users, 
               that's why configuration request only setting type and path to
               the database file. In section <TT
CLASS="FILENAME"
>[database]</TT
>
               pliku <TT
CLASS="FILENAME"
>/etc/lms/lms.ini</TT
> set:
               <PRE
CLASS="SCREEN"
>type     = sqlite
database = /usr/local/lms/lms.db</PRE
>
              </P
><P
>Now we can get in to the system. But if in Database is no 
               user account, we will see add user account form.
               </P
></DIV
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-CONFIG"
>2.5. Basic Configuration</A
></H2
><P
>Main configuration file of LMS is <TT
CLASS="FILENAME"
>lms.ini</TT
>,
         which must be placed in directory <TT
CLASS="FILENAME"
>/etc/lms</TT
> or in root
         directory of LMS. It contains configuration options of <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
>
         and all script with exception of <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-MGC</I
></SPAN
>.</P
><P
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Remember to remove semicolons from begining of line
         with seted parameter.</P
></TD
></TR
></TABLE
></DIV
></P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-CONFIG-DB"
>2.5.1. Section [database] - Database Settings</A
></H3
><P
>         <UL
><LI
><P
>type</P
><P
>Database type. Actually in 100% supported is 'mysql', but for the time being
        isn't seen problems with 'postgres' and 'sqlite'. Default: mysql</P
><P
>Example: <SAMP
CLASS="PROMPT"
>type = mysql</SAMP
></P
></LI
><LI
><P
>host</P
><P
>Host where database is installed. Most often, localhost, but can 
        here set anything (IP, domain, path to socket in format 'localhost:/path/to/socket'). 
        Default: localhost</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>host = localhost</SAMP
></P
></LI
><LI
><P
>user</P
><P
>Name of database user account. In many cases (if you've go by documentation) 
        that will be 'lms'. When you'll want to use privileged account, 
        probably you'll enter 'root' (MySQL on most of *nixes), 'mysql' (on PLD) or
        'postgres' (PostgreSQL). Default: mysql</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>user = lms</SAMP
></P
></LI
><LI
><P
>password</P
><P
>Database password. Default: empty.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>password = password</SAMP
></P
></LI
><LI
><P
>database</P
><P
>Name of database (for SQLite path to database file). Default: lms.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>database = lms</SAMP
></P
></LI
><LI
><P
>server_encoding</P
><P
>Database encoding. Use if your database encoding is not unicode.
	Postgres is taking up conversion by himself, but in case of
	mysql for conversion is used php/iconv in LMS db-drivers.
	Default: unicode.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>server_encoding = latin2</SAMP
></P
></LI
></UL
>
     </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-CONFIG-DIR"
>2.5.2. Section [directories] - Directories Settings</A
></H3
><P
>        
     <UL
><LI
><P
>sys_dir</P
><P
>System directory. It is a place where is entire content of LMS's UI, that means index.php, graphics, 
        templates and the rest. By default index.php seek in filesystem 
        using getcwd(), but better is to say him where hi is:</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>sys_dir = /var/www/htdocs/lms/</SAMP
></P
></LI
><LI
><P
>modules_dir</P
><P
>Directory with "modules" of LMS. That is content of /modules directory. By default 
        it is subdirectory <TT
CLASS="FILENAME"
>modules</TT
> in sys_dir.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>modules_dir = /usr/share/lms/modules/</SAMP
></P
></LI
><LI
><P
>lib_dir</P
><P
>Directory with "libraries" of LMS. That is content of /lib directory. By default 
        it is subdirectory <TT
CLASS="FILENAME"
>lib</TT
> in sys_dir.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>lib_dir = /usr/share/lms/lib/</SAMP
></P
></LI
><LI
><P
>backup_dir</P
><P
>Directory for database backup files - place where LMS write database snapshots. 
        By default it is subdirectory <TT
CLASS="FILENAME"
>backups</TT
> in sys_dir.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>backup_dir = /var/backup/lms/</SAMP
></P
><P
><DIV
CLASS="WARNING"
><TABLE
CLASS="WARNING"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If directory with backups will be accessible from WWW level, 
        then anybody will can to access them without authorization.</P
></TD
></TR
></TABLE
></DIV
></P
></LI
><LI
><P
>smarty_dir</P
><P
>Directory with Smarty library - By default, subdirectory <TT
CLASS="FILENAME"
>Smarty</TT
> in lib_dir.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>smarty_dir = /usr/lib/php/Smarty</SAMP
></P
></LI
><LI
><P
>smarty_compile_dir</P
><P
>Smarty's compilation directory. Place where Smarty compile templates. By default  
        it is subdirectory <TT
CLASS="FILENAME"
>templates_c</TT
> in sys_dir.</P
><P
>Example:      <SAMP
CLASS="PROMPT"
>smarty_compile_dir = /var/smarty/compile/lms</SAMP
></P
></LI
><LI
><P
>smarty_templates_dir</P
><P
>Directory with Smarty's templates. By default it is subdirectory <TT
CLASS="FILENAME"
>templates</TT
>
        in sys_dir.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>smarty_templates_dir = /usr/share/lms/templates</SAMP
></P
></LI
></UL
>
     </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-CONFIG-UI"
>2.5.3. Section [phpui] - Interface Setting</A
></H3
><UL
><LI
><P
>allow_from  (optional)</P
><P
>Lis of networks and IP addresses, which have access to LMS. If empty, every IP address has 
             access to LMS. When you write here list of addresses or address classes,
             LMS dismiss every unwanted user with HTTP 403 error.</P
><P
>Example:          <SAMP
CLASS="PROMPT"
>allow_from = 192.168.0.0/16, 213.25.209.224/27, 213.241.77.29</SAMP
></P
></LI
><LI
><P
>lang</P
><P
>User interface language symbol. When is not set, language will be based on
         html browser settings. Default: en.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>lang = pl</SAMP
></P
></LI
><LI
><P
>timeout</P
><P
>Timeout of www session. After that time (in seconds) user will be log out if 
         not take some action. Default: 600.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>timeout = 900</SAMP
></P
><P
><DIV
CLASS="WARNING"
><TABLE
CLASS="WARNING"
WIDTH="90%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>There is not possible to set no timeout. If you set this value
         on zero, you'll can't use LMS!</P
></TD
></TR
></TABLE
></DIV
></P
></LI
><LI
><P
>customerlist_pagelimit</P
><P
>Limit of displayed positions on one page on customers list. Default: no limit.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>customerlist_pagelimit = 10</SAMP
></P
></LI
><LI
><P
>nodelist_pagelimit</P
><P
>Limit of displayed records on page on nodes list. Default: no limit.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>nodelist_pagelimit = 10</SAMP
></P
></LI
><LI
><P
>balancelist_pagelimit</P
><P
>Limit of displayed records on page on user's balance. Default: 100.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>balancelist_pagelimit = 50</SAMP
></P
></LI
><LI
><P
>invoicelist_pagelimit</P
><P
>Limit of displayed records on page on invoices list. Default: 100</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>invoicelist_pagelimit = 50</SAMP
></P
></LI
><LI
><P
>ticketlist_pagelimit</P
><P
>Limit of displayed records on page on tickets (requests) list. Default: 100</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>ticketlist_pagelimit = 50</SAMP
></P
></LI
><LI
><P
>networkhosts_pagelimit</P
><P
>Limit of displayed nodes on one page in Network Information. Default: 256</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>networkhosts_pagelimit = 1024</SAMP
></P
></LI
><LI
><P
>accountlist_pagelimit</P
><P
>Limit of displayed records on page on accounts list. Default: 100</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>accountlist_pagelimit = 50</SAMP
></P
></LI
><LI
><P
>domainlist_pagelimit</P
><P
>Limit of displayed records on page on domains list. Default: 100</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>domainlist_pagelimit = 50</SAMP
></P
></LI
><LI
><P
>aliaslist_pagelimit</P
><P
>Limit of displayed records on page on aliases list. Default: 100</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>aliaslist_pagelimit = 50</SAMP
></P
></LI
><LI
><P
>configlist_pagelimit</P
><P
>Limit of displayed records on page on UI config options list. Default: 100</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>configlist_pagelimit = 50</SAMP
></P
></LI
><LI
><P
>reload_type</P
><P
>Reload type. Allowed values:</P
><P
>exec - calling of some command (most often with sudo, some script or something
         else, configurable below)</P
><P
>sql  - doing SQL writes (also can be set concrete query)</P
><P
>Default: sql.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>reload_type = exec</SAMP
></P
></LI
><LI
><P
>reload_execcmd</P
><P
>Command to run during reload, if reload_type is set to 'exec'. By default
         <TT
CLASS="FILENAME"
>/bin/true</TT
>. That string is send to command system(), so I propose consideration 
         what you do and how :) Altogether, semicolons should be parsed by bash, but
         LMS splits that string and execute commands singly.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>reload_execcmd = "sudo /usr/bin/reload_lms.sh"</SAMP
></P
></LI
><LI
><P
>reload_sqlquery</P
><P
>SQL query executed while reload, if <SAMP
CLASS="PROMPT"
>reload_type = sql</SAMP
>.  
         By default, query inserts into table 'timestamps' value '_force'. In query can be used
         '%TIME%' as replacement to current unix timestamp. WARNING! Semicolon is handled by
         a queries separator, that means you can enter couple of SQL queries separate them by
         semicolon sign.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>reload_sqlquery = "INSERT INTO reload VALUES ('1','%TIME%')"</SAMP
></P
></LI
><LI
><P
>force_ssl</P
><P
>SSL Enforcing. Setting this option to 1 will make that LMS will enforce SSL connection 
         doing redirect to 'https://'.$_SERVER[HTTP_HOST].$_SERVER[REQUEST_URI] at every access
         without SSL. Default: 0 (off).</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>force_ssl = 1</SAMP
></P
></LI
><LI
><P
>allow_mac_sharing</P
><P
>Permission for addition of nodes with duplicated MAC address (not checking
         that some computer have that MAC yet). Default: 0 (off)</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>allow_mac_sharing = 1</SAMP
></P
></LI
><LI
><P
>smarty_debug</P
><P
>Enable Smarty's debug console. Usefull for tracking values passed from PHP 
         to Smarty. Default: 0 (off).</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>smarty_debug = 1</SAMP
></P
></LI
><LI
><P
>lang_debug</P
><P
>Enable LMS language console. Usefull for tracking missing translation strings.
         Default: 0 (off).</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>lang_debug = 1</SAMP
></P
></LI
><LI
><P
>debug_email</P
><P
>E-mail address for debugging - at this address will goes messages sended from madule 'Mailing', 
         instead of proper users.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>debug_email = root@localhost</SAMP
></P
></LI
><LI
><P
>default_zip, default_city, default_address</P
><P
>Default zip code, city, street, used while inserting of new user.
         Useful when we have many users on the same street.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>default_zip = 39-300</SAMP
></P
></LI
><LI
><P
>use_current_payday</P
><P
>Qualify to use current day of month for payment day
         instead of most often used day. Default: 0 (off).</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>use_current_payday = 1</SAMP
></P
></LI
><LI
><P
>lastonline_limit</P
><P
>Specify time (in seconds), after which node will be treated
         as inactive. It should match with frequency of running script inspecting
         nodes activity (i.e. lms-fping). Default: 600.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>lastonline_limit = 300</SAMP
></P
></LI
><LI
><P
>timetable_days_forward</P
><P
>Specify number of days (including current day) on timetable.
         Default: 7.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>timetable_days_forward = 2</SAMP
></P
></LI
><LI
><P
>arpd_servers</P
><P
>List of arpd servers for reading of MAC addresses from remote networks.
         That list should include items IP[:port] separated with spaces.
         Default: empty.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>arpd_servers = 192.168.1.1 192.168.2.1</SAMP
></P
></LI
><LI
><P
>helpdesk_backend_mode</P
><P
>When enabled, all messages in helpdesk system (except sended to requestor)
         will be send to mail server at address of right queue.
         On server should be running script lms-rtparser, which will write
         messages to database. Default: disabled.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>helpdesk_backend_mode = On</SAMP
></P
></LI
><LI
><P
>contract_template</P
><P
>Specify customer contract template. Can include comma separated 
         list of contract templates. Default: contract.html.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>contract_template = "../my_templates/contract.html"</SAMP
></P
><P
>Example:     <SAMP
CLASS="PROMPT"
>contract_template = "contract.html:Default Contract, file.html:Contract Plus"</SAMP
></P
></LI
><LI
><P
>to_words_short_format</P
><P
>Specify format of verbal amounts representation (on invoices). For value "1"
         verbal expand of 123,15 will be "one two thr 15/100". Default: 0.</P
><P
>Example:     <SAMP
CLASS="PROMPT"
>to_words_short_format = 1</SAMP
></P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-RIGHTS"
>2.6. Access rights</A
></H2
><DIV
CLASS="SECT2"
><H3
CLASS="SECT2"
><A
NAME="INSTALL-RIGHTS-IDEA"
>2.6.1. Idea</A
></H3
><P
>LMS may define up to 256 rules of access to the system. 
      Each can forbid or permit access to definite modules. 
      To each user we can freely assign combination of access rules.</P
><P
>By default following access rules list is defined:
       <UL
><LI
><P
>full access</P
></LI
><LI
><P
>read only (excluding Helpdesk)</P
></LI
><LI
><P
>nodes connection/disconnection</P
></LI
><LI
><P
>finances management</P
></LI
><LI
><P
>configuration reload</P
></LI
><LI
><P
>customers management</P
></LI
><LI
><P
>nodes management</P
></LI
><LI
><P
>stats access</P
></LI
><LI
><P
>mailing access</P
></LI
><LI
><P
>Helpdesk (RT) administration</P
></LI
><LI
><P
>Helpdesku (RT) operation</P
></LI
><LI
><P
>accounts management</P
></LI
><LI
><P
>UI configuration</P
></LI
><LI
><P
>networks and devices management</P
></LI
><LI
><P
>timetable management</P
></LI
><LI
><P
>users edition and addition forbidden</P
></LI
><LI
><P
>no access</P
></LI
></UL
>
      Some of them permit access to modules and two forbid. Modules that user
      has always access is: welcome, copyrights,  logout, chpasswd 
      (chpasswd can change only own password), access to others is defined by rules.</P
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>If we do not define to user any access rule, then LMS implicitly define 
      rule 0 for him - full access.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="INSTALL-RIGHTS-HOW"
>2.6.2. How does it work?</A
></H3
><P
> Decision if user have right to access to module or not, looks like this:          
          <TABLE
BORDER="0"
><TBODY
><TR
><TD
>-  First of all: checking list of modules that user always have access.</TD
></TR
><TR
><TD
>-  Next:  checking if module mach to rules in each levels that user
          have access.</TD
></TR
><TR
><TD
>-  Finally: Decision if user have authorizations to access to modules. If module 
          mach to any level that forbid access then access will be forbiden even if user have 
          level that permit access to module. (for example. Someone have full access and no access 
          to adding computer module then he would not be able to appeal to this module). 
          If module  maches to level that permit access to module. Then LMS permit farther work. 
          But if module does not match on any level then also will be printed no-access-msg.</TD
></TR
></TBODY
></TABLE
>
          </P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H2
CLASS="SECT1"
><A
NAME="INSTALL-UPGRADE"
>2.7. Upgrade</A
></H2
><P
>LMS upgrade process in two stages. First make directory of new version 
      (overwriting old files with new ones is not recommended) then we have to make 
      some changes in database.</P
><P
>For easy migration of data in catalog<TT
CLASS="FILENAME"
>/doc</TT
>
      we prepared file:<TT
CLASS="FILENAME"
>UPGRADE-1.0-1.5.mysql</TT
> and 
      <TT
CLASS="FILENAME"
>UPGRADE-1.0-1.5.pgsql</TT
> for upgrade from 1.0 to 1.5 version. 
      Also <TT
CLASS="FILENAME"
>UPGRADE-1.2-1.5.mysql</TT
> and <TT
CLASS="FILENAME"
>UPGRADE-1.2-1.5.pgsql
      </TT
> For migration from version 1.3 (and 1.3.0) to current  version. In those 
      files you can find short description how to upgrade in dependence of used database. 
      In versions 1.3.0 and higher upgrade of database structure is automatically 
      executed while first logon.</P
><P
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>In 1.0.x and higher versions ADOdb library Is not required, 
      you can remove applicable directory from <TT
CLASS="FILENAME"
>lib/</TT
> directory.</P
></TD
></TR
></TABLE
></DIV
></P
></DIV
></DIV
><DIV
CLASS="CHAPTER"
><HR><H1
><A
NAME="DAEMON"
></A
>Chapter 3. A.L.E.C's LMS Daemon</H1
><DIV
CLASS="SECT1"
><H2
CLASS="SECT1"
><A
NAME="DAEMON-INTRO"
>3.1. Basics</A
></H2
><P
>Written in C program facilitate management of services. Daemon is
         responsible for starting of appropriate modules on user demand only. Modules
         are making configuration files based on data from LMS's database and
         restarting selected services on a server.
         </P
><P
>Why such name? The better part of daemon code was written by one of developers - Aleksander 
     'A.L.E.C' Machniak, nevertheless must underline a contribution of Marcina 'Lexx' Krol. Program
     include fragments of code of Mateusza 'mteg' Golicz's old daemon and use Nicolas Devillard's iniparser
     library.
     </P
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DAEMON-REQUIREMENTS"
>3.1.1. Requirements</A
></H3
><P
><SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>A.L.E.C's LMS Daemon</I
></SPAN
> require:
                     <UL
><LI
><P
>LMS user interface installation</P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>libmysqlclient</TT
> (full MySQL installation or respective packet) 
                    or <TT
CLASS="FILENAME"
>libpq</TT
> in case of PostgreSQL database or <TT
CLASS="FILENAME"
>sqlite</TT
></P
></LI
><LI
><P
><TT
CLASS="FILENAME"
>libdl</TT
> (that is in every present-day distribution)</P
></LI
><LI
><P
>C compiler</P
></LI
></UL
>
                     </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DAEMON-INSTALL"
>3.1.2. Installation</A
></H3
><P
>Prior to compilation you must set options described on following listing
               with help of <TT
CLASS="FILENAME"
>./configure</TT
> script (in brackets are shown
               default values):
<PRE
CLASS="SCREEN"
>  --help                help
  --enable-debug0       SQL queries logging (disabled)
  --enable-debug1       events logging (disabled)
  --with-pgsql          enables using of PostgreSQL database (disabled)
  --with-mysql          enables using of MySQL database (enabled)
  --with-sqlite         enables using of SQLite database (disabled)
  --prefix=DIR          program install directory (/usr/local/bin)
  --libdir=DIR          location of database libraries (/usr/lib)
  --incdir=DIR          location of database header files (/usr/include)</PRE
>
               Then, required is to set database which you will use (--with-mysql 
               or --with-pgsql) and location of libraries supplied with database (--incdir, --libdir).
               You can use only one database. If you will change database, you must to recompile daemon.
<PRE
CLASS="SCREEN"
># ./configure --with-pgsql --libdir=/usr/local/pgsql/lib --incdir=/usr/local/pgsql/include</PRE
>
               After that you can compile and install (put daemon in directory
               given with --prefix option):
<PRE
CLASS="SCREEN"
># make &#38;&#38; make install</PRE
>
               Finally, compiled modules (files with <TT
CLASS="FILENAME"
>.so</TT
> extension),
               found in directory <TT
CLASS="FILENAME"
>modules/module_name</TT
> move to any 
               directory. Their location you will set in configuration file.
               </P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DAEMON-CONFIG"
>3.1.3. Configuration</A
></H3
><P
>Example daemon configuration you can find in file <TT
CLASS="FILENAME"
>lms.ini.sample</TT
>.
               Following listing describe basic options for daemon (modules configuration is described 
               in separate chapters concerning modules):
<PRE
CLASS="SCREEN"
>[database]
host            = localhost     # host name or IP, default: localhost
user            = lms           # user name, default: lms
password        = mypasswd      # database password, default: empty
database        = lms           # database name, default: lms
port            = 0             # port number, default: 0

[lmsd]
sleeptime       = 30            # time interval (in seconds) how often to
                                # check for reload order, default: 30
instances       = hosts oident firewall       # module instances list
command         = 'echo Connecting...'        # shell command to run before every database connection </PRE
>
               <DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>List of instances contains instances names detached with 
               spaces. Instance is a name of section in configuration file.</P
></TD
></TR
></TABLE
></DIV
>
               </P
><P
>In instance section, beside config modules params, you must specify
               primary options, as on following listing:
<PRE
CLASS="SCREEN"
>[instance_name]
module = /path/to/module.so
info = "Additional description of module"</PRE
>          
               </P
><P
>Change of 'instances' and any option i instances sections do not
               require daemon restart. For other global options restart is required.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H3
CLASS="SECT2"
><A
NAME="DAEMON-RUN"
>3.1.4. Starting</A
></H3
><P
>You can run program as a daemon working in background (option '-b'). Then
               configuration and services reload is done on demand with use of 
               'Reload' menu in <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>LMS-UI</I
></SPAN
>. Option 'sleeptime' (-s) specify interval
               between database reads. When daemon detects reload order, he runs
               modules defined by 'instances' option in <TT
CLASS="FILENAME"
>lms.ini</TT
>.
               For example:
<PRE
CLASS="SCREEN"
># almsd -b</PRE
>               
               </P
><P
>Other way to run is disposable reload with usage of cron. 
               You must to use this manner of reload for runing modules like 'payments'
               'notify' or 'traffic'. In that case you can specify instances to reload
               with use of option '-i'. Example crontab's entry:
<PRE
CLASS="SCREEN"
>  1 0 * * *    /usr/local/bin/almsd -qi "payments notify"</PRE
>
               </P
><P
>Following listing describe program command line options:
<PRE
CLASS="SCREEN"
>  -c     path to config (default: /etc/lms/lms.ini)
  -i     list of instances (separated by space) to reload
  -b     run in background (daemon mode)
  -s     'reload' table reading interval in sec. (default: 30)
  -q     reload and quit
  -h     prints command line options</PRE
>
               </P
></DIV
></DIV
></DIV
></DIV
></BODY
></HTML
>