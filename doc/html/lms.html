<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="Content-Language" content="pl">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>::: LMS : Dokumentacja :::</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body topmargin="0" leftmargin="0" marginheight="0" marginwidth="0" bgcolor="#EBE4D6" link="#800000" vlink="#800000" alink="#336600">
<table bgcolor="#CEBD9B" cellpadding="3" cellspacing="0" width="100%" style="border-width: 1pt; border-style: solid;">
<tr>
<td width="50%" valign="middle">
	<img border="0" src="logo-small.png" align="left" alt="LMS 1.0">
</td>
<td width="50%">
<p align="right">
<a href="http://lms.rulez.pl">Strona domowa</a>
</p>
</td>
</tr>
<TR>
<TD width="50%">
<p><a href="index.html">&lt;&lt; Poprzednia</a></p>
</TD>
<TD width="50%">
<p align="right">
<a href="lms-ui.html">Nastêpna &gt;&gt;</a></p>
</TD>
</TR>
</table>
<table border="0" cellpadding="10" cellspacing="0" width="100%"><tr><td width="1%" style="border-right-style: dashed; border-right-width: 1pt; border-right-color: #333333; border-left-style: dashed; border-left-width: 1pt; border-left-color: #333333;" bgcolor="#F4F0EC" valign="top">
<table width="100%">
<TR>
<TD width="100%" nowrap>
<!-- Spis treœci idzie tutaj -->
<H2>Zawarto¶æ</H2>
<img src="tab1.gif"><a href="index.html">Przedmowa</a><br><br>
<img src="tab1.gif"><a href="lms.html">Rozdzia³ 1 - Na pocz±tek</a><br>
<img src="tab2.gif"><a href="lms.html#1">Czym jest LMS</a><br>
<img src="tab2.gif"><a href="lms.html#2">Co LMS mo¿e a czego nie</a><br>
<img src="tab2.gif"><a href="lms.html#3">Co wchodzi w sk³ad LMS</a><br>
<img src="tab2.gif"><a href="lms.html#4">Instalacja</a><br>
<img src="tab2.gif"><a href="lms.html#5">Konfiguracja</a><br>
<img src="tab2.gif"><a href="lms.html#6">Pierwsze logowanie</a><br>
<img src="tab2.gif"><a href="lms.html#7">Prawa dostêpu</a><br>
<img src="tab1.gif"><a href="lms-ui.html">Rozdzia³ 2 - LMS UI (User Interface)</a><br>
<img src="tab2.gif"><a href="lms-ui.html#1">Konfiguracja</a><br>
<img src="tab1.gif"><a href="lms-mgc.html">Rozdzia³ 3 - LMS-MGC</a><br>
<img src="tab1.gif"><a href="lms-scr.html">Rozdzia³ 4 - Skrypty</a><br>
<img src="tab2.gif"><a href="lms-scr.html#1">Instalacja</a><br>
<img src="tab2.gif"><a href="lms-scr.html#2">lms-notify</a><br>
<img src="tab2.gif"><a href="lms-scr.html#3">lms-cutoff</a><br>
<img src="tab2.gif"><a href="lms-scr.html#4">lms-eachmonth</a><br>
<!-- A tutaj spis siê koñczy -->
</td>
</TR>				
</TABLE>
</p></td>
<td width="99%" valign="top" style="border-right-style: dashed; border-right-width: 1pt; border-right-color: #333333;">
<!-- A tutaj zaczyna siê tresæ -->
<H1
>Rozdzia³ 1. Na pocz±tek</H1
>
          <H2
><a name="1">Czym jest LMS</a></H2
>
	<P
align="justify">"LMS" jest skrótem od "LAN Management System". Jest to zestaw aplikacji w PHP i Perlu, u³atwiaj±cych zarz±dzanie sieciami osiedlowymi (popularnie zwanymi Amatorskimi Sieciami Komputerowymi), opartych o bazê danych MySQL (docelowo, do wyboru, MySQL lub PostgreSQL). G³ówne za³o¿enia to uzyskanie jako¶ci us³ug oraz obs³ugi u¿ytkowników na poziomie providera z prawdziwego zdarzenia. Najbardziej podstawowe cechy LMS to: 
	<P><UL
>	  <LI>	     <P
align="justify">baza danych u¿ytkowników (imiê, nazwisko, adres, numer telefonu, uwagi);
	  <P>
	  <LI>	     <P
align="justify">baza danych komputerów (adres IP, adres MAC);
	  <P>
	  <LI>	     <P
align="justify">prowadzenie prostego rachunku operacji finansowych oraz stanu funduszów sieci;
	  <P>
	  <LI>	     <P
align="justify">ró¿ne taryfy abonamentowe;
	  <P>
	  <LI>	     <P
align="justify">wysy³anie poczt± elektroniczn± upomnieñ do u¿ytkowników;
	  <P>
	  <LI>	     <P
align="justify">automatyczne naliczanie op³at miesiêcznych;
	  <P>
	  <LI>	     <P
align="justify">generowanie praktycznie jakiegkolwiek konfiga na podstawie danych o komputerach w bazie (przyk³adowe configi obejmuj± rc.masq na iptables, dhcpd.conf, oidentd_masq.conf, /etc/ethers, dns prosty i odwrotny);
	  <P>
	</UL
>
	
        <P
align="justify">Ca³o¶æ zosta³a wymy¶lona w ramach administracji <A
href="http://www.netx.waw.pl/"
>ASK NetX</A
> i tam jest nieustannie rozwijana i poddawana testom ;)
	
    
          <H2
><a name="2">Co LMS mo¿e a czego nie</a></H2
>
	<P
align="justify">LMS Nie zast±pi Ci umiejêtno¶ci jakie powinien mieæ administrator. Je¶li nie potrafisz wykonaæ tak prostych czynno¶æ jak instalacja czy konfiguracja, prawdopodobnie nie bêdziesz umia³ dostroiæ LMS do swojego systemu. Tak wiêc bez znajomo¶ci systemów U*IX siê nie obejdzie.
    
          <H2
><a name="3">Co wchodzi w sk³ad LMS</a></H2
>
	<P
align="justify">LMS sk³ada siê z kilku modu³ów, podstawowym modu³em jest <I
>LMS-UI</I
> (User Interface). Jest on w ca³o¶ci napisany w PHP i do pracy wymaga bazy danych (w³a¶ciwie to ka¿dy modu³ wymaga bazy danych). To w³a¶nie w LMS-UI wykonujemy wszystkie czynno¶ci, reszta modu³ów ma tylko za zadanie zautomatyzowaæ pracê LMS.
	<P
align="justify">LMS to tak¿e zestaw skryptów w jêzyku PERL, i to w³a¶nie te skrypty wymagaj± aby¶ posiada³ interpreter tego jêzyka. Je¶li bêdziesz chcia³ u¿ywaæ tych skryptów, musisz mieæ PERLa. Skrypty pozwalaj± m.in. na comiesiêczne naliczanie op³at abonamentowych b±d¼ wysy³anie upomnieñ. Jest jeszcze LMS-MGC, który te¿ jest skryptem ale na tyle uniwersalnym ¿e potrafi wygenerowaæ praktycznie dowolny plik konfiguracyjny, i zrestartowaæ us³ugê.
	
    
          <H2
><a name="4">Instalacja</a></H2
>
		  <H3
>Wymagania</H3
>
	    	      <H4
>Serwer WWW</H4
>
	      <P
align="justify">Poniewa¿ LMS-UI jest napisane w PHP, niezbêdny jest serwer WWW z interpreterem tego jêzyka. Preferowanym serwerem jest Apache <A
href="http://www.apache.org"
>www.apache.org</A
>
	    
	    	      <H4
>Interpreter PHP</H4
>
	      <P
align="justify">Interpreter powinien byæ w wersji 4.2.x lub nowszej, chocia¿ dzia³a te¿ poprawnie na 4.1.x (ale poniewa¿ devepolerzy pracuj± na 4.2.3, nie mo¿na zagwarantowaæ poprawnej pracy na starszych wersjach). PHP mo¿na sci±gn±æ ze strony <A
href="http://www.php.net"
>www.php.net</A
>
	    
	    	      <H4
>Serwer baz danych</H4
>
	      <P
align="justify">Preferowany to MySQL. 3.23.53 i nowszy, starszy mo¿e te¿ dzia³aæ, je¶li nie to daj nam o tym znaæ ;-)
	      <P
align="justify">LMS-UI oraz LMS-MGC <I
>powinien</I
> tak¿e dzia³aæ z postgresql, jednak ta konfiguracja jest narazie w fazie testów.
	    
	                 <H4
>Biblioteki: Smarty i ADOdb</H4
>
             <P
align="justify">LMS-UI do pracy wymaga jeszcze bibliotek Smarty (<A
href="http://smarty.php.net"
>http://smarty.php.net</A
>) w wersji 2.5.0 lub wy¿szej oraz ADOdb (<A
href="http://php.weblogs.com/ADOdb"
>http://php.weblogs.com/ADOdb</A
>) w wersji 2.90 lub wy¿szej.
            
                        <H4
>Perl</H4
>
	  <P
align="justify">O ile dla LMS-UI wystarczy to co powy¿ej, to ¿eby mieæ dzia³aj±cy LMS-MGC, lub resztê skryptów potrzebujemy tak¿e perla i modu³y do niego czyli:
	  <P><UL
>	    <LI>	       <P
align="justify">perl w³a¶ciwy i jego podstawowe modu³y (POSIX, GetOpt::Long);
	    <P>
	    <LI>	       <P
align="justify">Net::SMTP;
	    <P>
	    <LI>	       <P
align="justify">Config::IniFiles;
	    <P>
	    <LI>	       <P
align="justify">DBI;
	    <P>
	    <LI>	       <P
align="justify">DBD-mysql (Je¶li masz zamiar u¿ywaæ mysql'a);
	    <P>
	    <LI>	       <P
align="justify">DBD-pg (Je¶li masz zamiar u¿ywaæ postgres'a);
	    <P>
	  </UL
>
	  
	
	
		  <H3
>Sci±gamy LMS</H3
>
	  <P
align="justify">LMS mo¿emy sci±gn±æ ze strony domowej projektu (<A
href="http://lms.rulez.pl"
>lms.rulez.pl</A
>) wydaj±c komendê:
	  <P><TABLE
border="1"
bgcolor="#F4F0EC"
width="100%"
><TR
><TD
><PRE
><B
>lexx@troll:~$</B
> wget http://lms.rulez.pl/download/lms-1.1-cvs.tar.gz</PRE
></TD
></TR
></TABLE
>
	  <P
align="justify">Instnieje te¿ mo¿liwo¶æ ¶ci±gniêcia wersji z bibliotekami przez co odpadnie nam konieczno¶æ ich pu¼niejszej instalacji. Tak± wersjê mo¿emy ¶ci±gn±æ wydaj±c komendê:
	  <P><TABLE
border="1"
bgcolor="#F4F0EC"
width="100%"
><TR
><TD
><PRE
><B
>lexx@troll:~$</B
> wget http://lms.rulez.pl/download/lms-1.1-cvs+libs.tar.gz</PRE
></TD
></TR
></TABLE
>
	
		  <H3
>Umieszczamy LMS na dysku</H3
>
	  <P
align="justify">Je¶li ¶ci±gneli¶my archwiwum to je teraz rozpakowujemy, a nastêpnie przenosimy pliki z lms-ui do katalogu osi±galnego z poziomu przegl±darki www (np. <TT
>/var/www/lms</TT
>). Pliki z konfiguracj± umieszczamy w katalogu <TT
>/etc/lms</TT
>).
	
		  <H3
>Biblioteki</H3
>
	  <P
align="justify">Je¶li jeste¶my w katalogu z LMSem, to musimy ¶ci±gn±c biblioteki. Najpierw ¶ci±gamy Smarty:
	  <P><TABLE
border="1"
bgcolor="#F4F0EC"
width="100%"
><TR
><TD
><PRE
><B
>lexx@troll:~$</B
> cd /var/www/lms
<B
>lexx@troll:~$</B
> cd lib	
<B
>lexx@troll:~$</B
> wget http://smarty.php.net/distributions/Smarty-2.5.0.tar.gz
<B
>lexx@troll:~$</B
> tar -xzf Smarty-2.5.0.tar.gz
<B
>lexx@troll:~$</B
> mv Smarty-2.5.0/libs Smarty</PRE
></TD
></TR
></TABLE
>
	  <P
align="justify">Teraz ADOdb:
	  <P><TABLE
border="1"
bgcolor="#F4F0EC"
width="100%"
><TR
><TD
><PRE
><B
>lexx@troll:~$</B
> wget http://phplens.com/lens/dl/adodb320.tgz
<B
>lexx@troll:~$</B
> tar -xzf adodb320.tgz</PRE
></TD
></TR
></TABLE
>
        
    
          <H2
><a name="5">Konfiguracja</a></H2
>
      <P
align="justify">Po ¶ci±gniêciu i zainstalowaniu LMS nale¿y jeszcze ustawiæ dwie rzeczy. Bazê danych, oraz podstawow± konfiguracjê w <TT
>lms.ini</TT
>
		  <H3
>MySQL</H3
>
	  <P><TABLE
border="1"
bgcolor="#F4F0EC"
width="100%"
><TR
><TD
><PRE
><B
>lexx@troll:~$</B
> mysql -u [U¿ytkownik z pe³nym dostêpem do bazy] -p
<B
>Enter password:</B
> [Has³o]
<B
>mysql&#62;</B
> create database lms;
<B
>mysql&#62;</B
> grant usage on lms.* to lms@localhost;
<B
>mysql&#62;</B
> grant select,insert,update,delete,create on lms.* to lms@localhost identified by '[Tajne Has³o]';
<B
>mysql&#62;</B
> flush privileges;
<B
>mysql&#62;</B
> use lms;
<B
>mysql&#62;</B
> source doc/lms.mysql;</PRE
></TD
></TR
></TABLE
>
	
		 <H3
><TT
>lms.ini</TT
></H3
>
	 <P
align="justify">Sekcja [database] - ustawienia bazy danych
         <P><UL
>          <LI>	   <P
align="justify">type
	   <P
align="justify">Typ bazy danych. Aktualnie w 100% supportowany jest 'mysql', ale jak narazie nie widaæ wiêkszych problemów z 'postgres'. Domy¶lnie: mysql
	   <P
><B
>Przyk³ad:</B
><P
align="justify">type = mysql</P
>
	  <P>
          <LI>	   <P
align="justify">host
	   <P
align="justify">Host gdzie zainstalowana jest baza danych. Najczê¶ciej, localhost, ale mo¿na tutaj wstawiæ cokolwiek (ip, domena, ¶cie¿ka do gniazda w formacie 'localhost:/path/to/socket'). Domy¶lnie: localhost
	   <P
><B
>Przyk³ad:</B
><P
align="justify">host = localhost</P
>
	  <P>
          <LI>	   <P
align="justify">user
	   <P
align="justify">U¿ytkownik do bazy danych. W wielu wypadkach (je¿eli postêpowa³e¶ zgodnie ze wskazówkami w dokumentacji) bêdzie to 'lms'. Je¿eli chcesz u¿ywaæ konta uprzywilejowanego, prawdopodobnie wpiszesz 'root' (MySQL na wiêkszo¶ci *nixów), 'mysql' (na PLD) b±d¼ 'postgres' (PostgreSQL). Domy¶lnie: root
	   <P
><B
>Przyk³ad:</B
><P
align="justify">user = lms</P
>
	  <P>
          <LI>	   <P
align="justify">password
	   <P
align="justify">Has³o do bazy danych. Domy¶lnie puste.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">password = password</P
>
	  <P>
          <LI>	   <P
align="justify">database
	   <P
align="justify">Nazwa bazy danych, domy¶lnie lms.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">database = lms</P
>
	  <P>
         </UL
>
         <P
align="justify">Sekcja [directories] - ustawienia katalogów
         <P><UL
>          <LI>	   <P
align="justify">sys_dir
	   <P
align="justify">Katalog systemowy. Jest to miejsce gdzie jest ca³a zawarto¶æ UI LMS'a, czyli index.php, grafiki, templejty i reszta. Domy¶lnie, index.php stara siê sam odnale¼æ w filesystemie u¿ywaj±c getcwd(), ale lepiej by by³o gdyby mu powiedzieæ gdzie jest:
	   <P
><B
>Przyk³ad:</B
><P
align="justify">sys_dir = /var/www/htdocs/lms/</P
>
	  <P>
          <LI>	   <P
align="justify">modules_dir
	   <P
align="justify">Katalog z "modu³ami" LMS'a. Czyli zawarto¶æ katalogu modules. Domy¶lnie jest to podkatalog modules w sys_dir.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">modules_dir = /usr/share/lms/modules/</P
>
	  <P>
          <LI>	   <P
align="justify">lib_dir
	   <P
align="justify">Katalog z "bibliotekami" LMS'a. Czyli zawarto¶æ katalogu lib. Domy¶lnie to podkatalog lib w sys_dir.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">lib_dir = /usr/share/lms/lib/</P
>
	  <P>
          <LI>	   <P
align="justify">backup_dir
	   <P
align="justify">Katalog z kopiami zapasowymi bazy danych - miejsce gdzie LMS zapisuje zrzuty z bazy. Domy¶lnie jest to podkatalog 'backups'.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">backup_dir = /var/backup/lms/</P
>
	   <P><FONT
color="red"
><B
>Uwaga!:</B
></FONT
><BLOCKQUOTE
><P
align="justify">Je¶li katalog z kopiami zapasowymi bêdzie osi±galny z poziomu WWW, to ka¿dy bez autoryzacji bêdzie mia³ do nich dostêp.</BLOCKQUOTE
>
	  <P>
          <LI>	   <P
align="justify">smarty_dir
	   <P
align="justify">Katalog z bibliotek± Smarty - domy¶lnie podkatalog Smarty w lib_dir.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">smarty_dir = /usr/lib/php/Smarty</P
>
	  <P>
          <LI>	   <P
align="justify">smarty_compile_dir
	   <P
align="justify">Katalog kompilacji Smartyego. Miejsce gdzie Smarty kompiluje szablony. Domy¶lnie to templates_c w katalogu sysdir.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">smarty_compile_dir = /var/smarty/compile/lms</P
>
	  <P>
          <LI>	   <P
align="justify">smarty_templates_dir
	   <P
align="justify">Katalog z szablonami którymi Smartiego. Domy¶lnie to podkatalog templates z sys_dir'a.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">smarty_templates_dir = /usr/share/lms/templates</P
>
	  <P>
          <LI>	   <P
align="justify">adodb_dir
	   <P
align="justify">Katalog z ADOdb - czyli tym co posredniczy pomiêdzy baz± a UI. Domy¶lnie podkatalog adodb w lib_dir.
	   <P
><B
>Przyk³ad:</B
><P
align="justify">adodb_dir = /usr/lib/php/adodb</P
>
	  <P>
         </UL
>
    
         <H2
><a name="6">Pierwsze logowanie</a></H2
>
     <P
align="justify">Po raz pierwszy do systemu mo¿na siê zalogowaæ u¿ywaj±c konta 'admin' oraz pustego has³a. Po zalogowaniu has³o powinno byæ natychmiast zmienione. 
    
          <H2
><a name="7">Prawa dostêpu</a></H2
>
      <P
align="justify">LMS  ma  mo¿liwo¶æ  zdefiniowania  do 256 regu³ dostêpu do systemu. Ka¿da z nich mo¿e zabraniaæ, b±d¼ pozwalaæ na dostêp do konkretnych modu³ów. Ka¿demu administratorowi mo¿na przydzieliæ dowoln± kombinacjê regu³ dostêpu.
      <P
align="justify">Domy¶lnie zdefiniowanych  jest  osiem regu³ dostêpu. Siedem z nich zezwala na dostêp do modu³ów oraz jedna zabrania.
      <P
align="justify">Modu³y do których administrator ma zawsze dostêp to: welcome,  copyrights,  logout, chpasswd (przy czym chpasswd umo¿liwia tylko zmianê w³asnego has³a), dostep do reszty jest zdefiniowany regu³ami. Je¶li nie ustawimy administratorowi ¿adnej regu³y dostêpu, to LMS domy¶lnie przydzieli mu regu³kê 0 czyli pe³en dostêp.

<!-- A tutaj konczy siê tresæ -->
</TD>
</TR>
</TABLE><TABLE cellpadding="3" cellspacing="0" style="border-width: 1pt; border-style: solid; border-collapse:collapse" bordercolor="#000000" width="100%" bgcolor="#CEBD9B">
<TR>
<TD width="50%">
<p><a href="index.html">&lt;&lt; Poprzednia</a><br><br>
<a href="index.html#autorzy">&copy; 2001-2003 LMS Developers<br></A></p>
</TD>
<TD width="50%">
<p align="right">
<a href="lms-ui.html">Nastêpna &gt;&gt;</a><br><br>
<b>LMS 1.0</b>
</p>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>