<HTML
><HEAD
><TITLE
>Instalacja serwera baz danych</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.64
"><LINK
REL="HOME"
TITLE="LMS - LAN Management System 1.1-cvs"
HREF="index.html"><LINK
REL="UP"
TITLE="Instalacja i konfiguracja"
HREF="install.html"><LINK
REL="PREVIOUS"
TITLE="Instalacja LMS"
HREF="install-install.html"><LINK
REL="NEXT"
TITLE="Konfiguracja"
HREF="install-config.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="style.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=ISO-8859-2"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#EBE4D6"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>LMS - LAN Management System 1.1-cvs</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="install-install.html"
>Poprzedni</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Rozdzia³ 2. Instalacja i konfiguracja</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="install-config.html"
>Nastêpny</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INSTALL-DB"
>2.4. Instalacja serwera baz danych</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MYSQL"
>2.4.1. MySQL</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN201"
>2.4.1.1. Wstêp</A
></H3
><P
>Ta  bardzo  popularna  baza  jest  dostêpna  z wiêkszo¶ci± dystrybucji
			Linuksa.  Je¿eli  jednak bêdziesz musia³ j± zainstalowaæ samodzielnie,
			zacznij od ¶ci±gniêcia ¼róde³ z <A
HREF="http://www.mysql.org"
TARGET="_top"
>			www.mysql.org</A
>.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN205"
>2.4.1.2. Instalacja serwera MySQL</A
></H3
><P
>Po rozpakowaniu, wchodzimy do katalogu z naszym MySQL i wydajemy
			polecenia:
			<PRE
CLASS="SCREEN"
>$ ./configure --prefix=/usr/local/mysql
$ make
$ make install
$ /usr/local/mysql/bin/mysql_install_db
$ chown mysql -R /usr/local/mysql/var
$ /usr/local/mysql/bin/safe_mysqld &#38;
$ /usr/local/mysql/bin/mysqladmin -u root password nowe_has³o</PRE
>
		</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN209"
>2.4.1.3. Utworzenie bazy danych</A
></H3
><P
>Konieczne  to  jest  je¿eli  uruchamiamy  LMS  po raz PIERWSZY. Je¿eli
			uaktualniamy LMS, odpowiednie adnotacje co nale¿y zrobiæ z baz± danych
			s± w pliku ChangeLog. Tak wiêc, wejd¼ do katalogu w którym masz LMS'a
			i uruchom shell mysql'a:
			<PRE
CLASS="SCREEN"
>mysql -u[tutaj wpisz u¿ytkownika z pe³nym dostêpem do bazy] -p
Enter password:[podaj has³o]
mysql&#62; create database lms;
mysql&#62; grant usage on lms.* to lms@localhost;
mysql&#62; grant select,insert,update,delete,create on lms.* to lms@localhost identified by 'haslo';
mysql&#62; flush privileges;
mysql&#62; use lms;
mysql&#62; source doc/lms.mysql;</PRE
>
		</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN213"
>2.4.1.4. Konfiguracja LMS (lms.ini)</A
></H3
><P
>Poniewa¿  MySQL  jest  domy¶ln± baz± dla LMS'u, konfiguracja ogranicza
			siê  do  podania  w  sekcji  [database] pliku /etc/lms/lms.ini has³a i u¿ytkownika:
			<PRE
CLASS="SCREEN"
>user     = lms
password = has³o_z_pkt.3</PRE
>
		    </P
><P
>Po  takim  zabiegu,  o ile LMS'owi uda siê nawi±zaæ po³±czenie do bazy
			danych,  mo¿na ju¿ bez problemu dostaæ siê do systemu. Je¿eli jednak w
			bazie  danych  nie ma ¿adnego konta administratora, jedyn± rzecz± jak±
			bêdziemy  widzieæ  bêdzie  formularz  dodania  administratora.  Je¿eli
			podamy  prawid³owe  dane  administratora, LMS przeniesie nas na stronê
			logowania gdzie odrazu bêdziemy mogli u¿yæ nowo utworzonego konta.
			</P
><P
>Zatrzymajmy  siê  tutaj  i  dodajmy  co¶  do  crona,  tak dla ¶wiêtego
			spokoju[tm](C):
			<PRE
CLASS="SCREEN"
>12 4 3,10,17,21,28 * * /usr/bin/mysqldump -u lms --password=Twoje-super-tajne-has³o \
		    --add-drop-table --add-locks lms &#62; backups/lms-auto-"$(date +%s)".sql</PRE
>
			</P
><P
>Spowoduje to wykonywanie 12 po 4 rano, ka¿dego 3, 10, 17, 21 i 28 dnia
			miesi±ca automagicznie zrzutu danych z mysqla.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="PGSQL"
>2.4.2. PostgreSQL</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN223"
>2.4.2.1. Wstêp</A
></H3
><P
>LMS jest testowany na PostgreSQL 7.2.3 i nowszych, ale poniewa¿ ¿adne
			skomplikowane w³a¶ciwo¶ci tej bazy nie s± wykorzystywane, nie powinno
			byæ problemów z innymi wersjami. Je¿eli nie mamy zainstalowanego serwera
			PostgreSQL, najlepszym rozwi±zaniem bêdzie w³asnorêczna kompilacja
			ze ¼róde³ dostêpnych na stronie <A
HREF="http://www.postgresql.org"
TARGET="_top"
>			www.postgresql.org</A
>.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN227"
>2.4.2.2. Instalacja</A
></H3
><P
>Jest to wersja skrócona instalacji, wiêcej informacji znajdziesz
			w dokumentacji postgresa. Po ¶ci±gniêciu i rozpakowaniu wchodzimy
			do katalogu g³ównego i wydajemy kolejno poni¿sze polecenia.
			<PRE
CLASS="SCREEN"
>$ ./configure --enable-locale
$ gmake
$ su
$ gmake install
$ adduser postgres
$ mkdir /usr/local/pgsql/data
$ chown postgres /usr/local/pgsql/data
$ su - postgres
$ /usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data
$ /usr/local/pgsql/bin/postmaster -D /usr/local/pgsql/data &#62;logfile 2&#62;&#38;1 &#38;</PRE
>
			</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN231"
>2.4.2.3. Utworzenie bazy danych</A
></H3
><P
>Maj±c uruchomiony serwer mo¿esz przyst±piæ do tworzenia bazy o nazwie 'lms',
			której w³a¶cicielem bêdzie u¿ytkownik z loginem 'lms'. 
			<PRE
CLASS="SCREEN"
>$ /usr/local/pgsql/bin/createuser -d -A -P lms
$ /usr/local/pgsql/bin/createdb -E LATIN2 -U lms lms
$ /usr/local/pgsql/bin/psql -d lms -U lms -f /lms/doc/lms.pgsql</PRE
>
		</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN235"
>2.4.2.4. Konfiguracja LMS (lms.ini)</A
></H3
><P
>Dla systemu LMS domy¶lnym serwerem baz danych jest MySQL, dlatego w sekcji
			[database] pliku /etc/lms/lms.ini nale¿y ustawiæ nastêpuj±ce opcje:
   			<PRE
CLASS="SCREEN"
>type     = postgres
user     = lms
password = has³o_podane_przy_tworzeniu_u¿ytkownika_lms</PRE
>
		    </P
><P
>Uwaga: Has³o jest wymagane w zale¿no¶ci od konfiguracji autentykacji
       			u¿ytkowników postgresa w /usr/local/pgsql/data/pg_hba.conf. 
       			Domy¶lnie has³o nie jest wymagane.</P
><P
>Po takim zabiegu, o ile LMS'owi uda siê nawi±zaæ po³±czenie do bazy danych,
			mo¿na ju¿ bez problemu dostaæ siê do systemu. Je¿eli jednak w bazie danych
			nie ma ¿adnego konta administratora, jedyn± rzecz± jak± bêdziemy widzieæ
			bêdzie formularz dodania administratora. Je¿eli podamy prawid³owe dane
			administratora, LMS przeniesie nas na stronê logowania gdzie odrazu bêdziemy
			mogli u¿yæ nowo utworzonego konta.</P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="install-install.html"
>Poprzedni</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Spis tre¶ci</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="install-config.html"
>Nastêpny</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Instalacja LMS</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="install.html"
>Pocz±tek rozdzia³u</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Konfiguracja</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>