<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Ostrzeżenia + squid</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="LMS - LAN Management System 1.11-cvs"
HREF="index.html"><LINK
REL="UP"
TITLE="Dodatki"
HREF="contrib.html"><LINK
REL="PREVIOUS"
TITLE="Panel SQL"
HREF="contrib-sqlpanel.html"><LINK
REL="NEXT"
TITLE="Antywirus"
HREF="contrib-antyvir.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="../images/style.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#EBE4D6"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>LMS - LAN Management System 1.11-cvs</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="contrib-sqlpanel.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Rozdzia&#322; 8. Dodatki</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="contrib-antyvir.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="CONTRIB-SQUID"
>8.4. Ostrzeżenia + squid</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SQUID-REDIRECTOR-INTRO"
>8.4.1. Wstęp</A
></H2
><P
>Ten mały zestaw narzędzi pozwala za pomocą squida w dosyć elegancki sposób 
          wyświetlać wiadomości administracyjne oraz w razie potrzeby blokować dostęp
          do w3cache. Oczywiście aby to działało w 100%, wszyscy klienci muszą 
          korzystać ze squida.</P
><P
>Kluczowym elementem jest redirector. Odpowiada on za to, 
          aby w momencie ustawienia dla danego komputera flagi warn, 
          przekierowywał wszystkie żądania wysyłane do serwera proxy na nasz, 
          ustalony wcześniej adres. Przekierowaniu nie ulegają adresy zawierające 
          adres naszej winietki, tak aby umożliwić załadowanie się obrazków.
          Jeśli komputer ma ustawioną flagę warn, to po przekierowaniu użytkownik ma 
          możliwość oznaczenia wiadomości jako przeczytanej, po czym skrypt automatycznie 
          kieruje przeglądarkę na pierwotnie wywoływany URL. W przypadku oznaczeniu danego 
          komputera jako wyłączony, użytkownik będzie zawsze przekierowywany na adres 
          winietki, bez możliwości oznaczenia wiadomości jako przeczytanej.
          Więcej informacji znajdziesz w pliku
          <TT
CLASS="FILENAME"
>README</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="SQUID-REDIRECTOR-INSTALL"
>8.4.2. Instalacja</A
></H2
><P
>Zaczynamy od konfiguracji squida (<TT
CLASS="FILENAME"
>squid.conf</TT
>):
<PRE
CLASS="SCREEN"
># wersja 2.5
redirector_bypass on
redirect_program /sciezka/do/lms-squid
# wersja 2.6
url_rewrite_program /sciezka/do/lms-squid</PRE
>
          które informują squida aby dla każdego adresu używał naszego 
          redirectora. Następnie należy skonfigurować redirectora. Otwieramy 
          w naszym ulubionym edytorze plik lms-squid i praktycznie
          wszystko co można w nim ustawić to:
<PRE
CLASS="SCREEN"
>my $configfile = '/etc/lms/lms.ini';</PRE
>
          Czyli położenie pliku konfiguracyjnego. Reszta konfiguracji 
          ustawiana jest w <TT
CLASS="FILENAME"
>lms.ini</TT
>, gdzie dopisujemy sekcję 
          <TT
CLASS="FILENAME"
>[redirector]</TT
> i definiujemy adres winietki:
<PRE
CLASS="SCREEN"
>[redirector]
redirect        = http://net-komp.net.pl</PRE
>
          Do katalogu gdzie ma być widoczna winietka kopiujemy pliki
          <TT
CLASS="FILENAME"
>index.php, message.html</TT
> i zawartość katalogu 
          <TT
CLASS="FILENAME"
>img</TT
>.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="contrib-sqlpanel.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Spis tre&#347;ci</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="contrib-antyvir.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Panel SQL</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="contrib.html"
ACCESSKEY="U"
>Pocz&#261;tek rozdzia&#322;u</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Antywirus</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>