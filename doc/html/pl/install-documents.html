<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Dokumenty</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="LMS - LAN Management System 1.11-cvs"
HREF="index.html"><LINK
REL="UP"
TITLE="Instalacja i konfiguracja"
HREF="install.html"><LINK
REL="PREVIOUS"
TITLE="Upgrade"
HREF="install-upgrade.html"><LINK
REL="NEXT"
TITLE="Interfejs U¿ytkownika (LMS-UI)"
HREF="user.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="../images/style.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=ISO-8859-2"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#EBE4D6"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>LMS - LAN Management System 1.11-cvs</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="install-upgrade.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Rozdzia&#322; 2. Instalacja i konfiguracja</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="user.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INSTALL-DOCUMENTS"
>2.9. Dokumenty</A
></H1
><P
>LMS umo¿liwia generowanie oraz przechowywanie przeró¿nych
	    dokumentów tj. faktur, dowodów wp³at oraz dokumentów nie-finansowych
	    np. umów, protoko³ów. Dokumenty mog± byæ numerowane wg wzorców (planów)
	    numeracyjnych zdefiniowanych przy pomocy menu Konfiguracja - Plany
	    numeracyjne.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-INVOICES"
>2.9.1. Faktury</A
></H2
><P
>LMS umo¿liwia wystawianie faktur automatycznie i rêcznie. Rêczne wystawienie
          faktury jest mo¿liwe z menu 'Nowa faktura' w panelu 'Finanse'. Automatyczne wystawianie faktur 
          wymaga w³±czenia tej opcji podczas przypisywania taryf u¿ytkownikom. W takim wypadku
          zapisem faktur do bazy zajmuje siê skrypt lms-payments lub demon <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>lmsd</I
></SPAN
></P
><P
>Do poprawnego dzia³ania i tworzenia wydruków wymagane jest ustawienie podstawowych 
          opcji w sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[invoices]</I
></SPAN
> konfiguracji:
          <UL
><LI
><P
>header</P
><P
>Dane sprzedawcy. Domy¶lnie: pusty. Mo¿na u¿yæ ci±gu "\n" aby oddzieliæ linie od siebie.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>header = "SuperNet ISP\nul.Nowa 15\n12-000 W±chock\n"</SAMP
></P
></LI
><LI
><P
>footer</P
><P
>Stopka faktury - np. dane sprzedawcy. Domy¶lnie: pusta. Stopka zostanie umieszczona na dole faktury, ma³± czcionk±. Podobnie jak i w przypadku opcji header, mo¿na u¿yæ ci±gu "\n" aby oddzieliæ linie od siebie.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>footer = "Blokowa Sieæ Komputerowa K-27 w Mielcu, tel.555-23-23, bla bla"</SAMP
></P
></LI
><LI
><P
>default_author</P
><P
>Domy¶lna osoba wystawiaj±ca fakturê (dla faktur wystawianych automatycznie). Domy¶lnie: puste</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>default_author = "specjalista d/s fakturowania"</SAMP
></P
></LI
><LI
><P
>cplace</P
><P
>Miejsce wystawienia faktury. Domy¶lnie: puste.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>cplace = Warszawa</SAMP
></P
></LI
><LI
><P
>print_balance_history</P
><P
>Okre¶la czy na fakturze (html) drukowaæ listê operacji finansowych 
		na koncie klienta. Domy¶lnie: nie ustawiona.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>print_balance_history = true</SAMP
></P
></LI
><LI
><P
>print_balance_history_limit</P
><P
>Liczba rekordów na li¶cie operacji finansowych na
		fakturze. Domy¶lnie: 10.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>print_balance_history_limit = 20000</SAMP
></P
></LI
></UL
>
          Wygenerowane faktury mo¿na obejrzeæ w dwojaki sposób: albo poprzez ikonkê drukarki 
          na wykazie bilansu finansowego (ogólnego b±d¼ pojedynczego u¿ytkownika), albo 
          poprzez 'Lista faktur' z menu 'Finanse'. W przypadku listy faktur, mo¿liwe jest 
          tak¿e filtrowanie faktur do wydruku.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-HTML"
>2.9.1.1. HTML</A
></H3
><P
>Przy domy¶lnych ustawieniach faktury wy¶wietlane s± w
          formacie html wg domy¶lnego szablonu. W sekcji [invoices] masz
          do dyspozycji jeszcze nastêpuj±ce opcje:
          <UL
><LI
><P
>template_file</P
><P
>Szablon faktury, który powinien znajdowaæ siê w
               katalogu <TT
CLASS="FILENAME"
>templates</TT
>. Domy¶lnie: invoice.html.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>template_file = invoice-mynet.html</SAMP
></P
></LI
><LI
><P
>content_type</P
><P
>Content-type dla faktury. Je¿eli wpiszesz tutaj 'application/octet-stream'
               to przegl±darka zechce wys³aæ plik do zapisania na dysku, zamiast go wy¶wietliæ.
               Przydatne je¶li u¿ywasz w³asnego szablonu, który wygeneruje np.rtf'a lub xls'a.
               Domy¶lnie: 'text/html'</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>content_type = application/octet-stream</SAMP
></P
></LI
><LI
><P
>attachment_name</P
><P
>Mo¿na podaæ nazwê pliku, jako który ma zostaæ zapisany gotowy
               wydruk. Domy¶lnie: pusta.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>attachment_name = faktura.xls</SAMP
></P
></LI
></UL
>
          Wynikowy dokument HTML zawiera orygina³y 
          i kopie, które s± oddzielone znacznikami podzia³u strony poprzez CSS. 
          Tak wiêc ka¿da nowoczesna przegl±darka zgodna z CSS powinna bezproblemowo drukowaæ 
          faktury ³adnie podzielone na strony. Funkcja ta by³a testowana na przegl±darkach 
          Microsoft Internet Explorer 6.0, Opera 7.02 oraz Mozilla 1.3.</P
><P
>               <DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Notatka"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Praktycznie ka¿da przegl±darka internetowa ma mo¿liwo¶æ 
               konfiguracji wydruku, gdzie mo¿na wy³±czyæ funkcje takie jak drukowanie
               stopki i nag³ówka, czy te¿ adresu na wydruku.</P
></TD
></TR
></TABLE
></DIV
>
          </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-PDF"
>2.9.1.2. PDF</A
></H3
><P
>Mo¿liwe jest tak¿e tworzenie faktur jako pliki pdf. Przypisanie
          opcji <TT
CLASS="FILENAME"
>type</TT
> z sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[invoices]</I
></SPAN
> 
          warto¶ci 'pdf' spowoduje, ¿e faktury zamiast w html'u bêd± tworzone jako pliki 
          "portable data format". Opcja <TT
CLASS="FILENAME"
>template_file</TT
> spe³nia podobn± rolê jak dla faktur html'owych,
          z tym, ¿e posiada predefiniowane warto¶ci: 'standard' - faktura podstawowa 
          (odpowiednik invoice.html) i 'FT-0100' - faktura przystosowana do drukowania
          na drukach <A
HREF="http://www.polarnet.org/produkty/ft-0100/"
TARGET="_top"
>FT-0100</A
> 
	  zawieraj±cych druk polecenia przelewu. W opcji <TT
CLASS="FILENAME"
>template_file</TT
>
          mo¿na tak¿e wstawiæ nazwê pliku php, jednak ta mo¿liwo¶æ jest przeznaczona dla
          zaawansowanych u¿ytkowników, gdy¿ wymaga utworzenia pliku php, a nie tak jak w 
          przypadku faktur html'owych szablonu Smarty.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-CNOTE"
>2.9.1.3. Korekty</A
></H3
><P
>Faktury koryguj±ce korzystaj± z ustawieñ dotycz±cych
	  pozosta³ych faktur z sekcji [invoices]. Domy¶lny szablon faktury
	  uwzglêdnia faktury koryguj±ce. Jednak udostêpniono opcjê
	  pozwalaj±c± na zdefiniowanie osobnego szablonu dla korekt (pozosta³e
	  opcje s± wspólne dla faktur i dla korekt):
          <UL
><LI
><P
>cnote_template_file</P
><P
>Szablon faktury koryguj±cej, który powinien znajdowaæ siê w
               katalogu <TT
CLASS="FILENAME"
>templates</TT
>. Domy¶lnie: invoice.html.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>cnote_template_file = invoice-mynet.html</SAMP
></P
></LI
></UL
>
	  </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-IBAN"
>2.9.1.4. Automatyczne generowanie numeru konta bankowego</A
></H3
><P
>LMS umo¿liwia automatyczne generowanie numeru konta bankowego w standardzie IBAN
	  zawieraj±cego ID klienta. Funkcja ta mo¿e byæ u¿ywana do masowej identyfikacji p³atno¶ci
	  która jako us³uga znajduje siê w ofercie wiêkszo¶ci banków. Aby masowa identyfikacja by³a
	  mo¿liwa, nale¿y podpisaæ umowê z bankiem z której potrzebne nam bêd±:
	  <UL
><LI
><P
>Numer rozliczeniowy banku</P
><P
>zawsze sta³y dla ka¿dego banku, z³o¿ony z 8 cyfr</P
></LI
><LI
><P
>Identyfikator rachunku</P
><P
>identyfikator naszego wirtualnego rachunku, z³o¿ony z 4 cyfr</P
></LI
></UL
>
	  Gdy mamy potrzebne dane, mo¿emy przej¶æ do konfiguracji LMSa.</P
><P
>W sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[finances]</I
></SPAN
> ustawiamy:
	  <UL
><LI
><P
>iban</P
><P
>okre¶la czy numer konta na fakturach ma byæ zwyk³y czy generowany automatycznie (0|1)</P
></LI
><LI
><P
>account</P
><P
>skrócony numer konta bankowego powsta³y przez po³±czenie numeru rozliczeniowego banku 
		    z identyfikatorem rachunku, numer ten musi siê sk³adaæ z 12 cyfr bez spacji i innych znaków.</P
></LI
></UL
>
	  Od tej pory je¶li u¿ywamy faktur PDF z szablonem FT-0100, lub drukujemy bloczki przelewu/wp³aty z
	  menu Finanse -&#62; Wydruki -&#62; Faktury -&#62; Drukuj polecenia przelewu/wp³aty, ka¿dy wydruk bêdzie zawiera³
	  unikalny numer konta z zawartym ID naszego klienta.
          </P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-TRANSFERFORMS"
>2.9.2. Polecenia przelewu/wp³aty</A
></H2
><P
>Dane do druków polecenia przelewu brane s± z sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[finances]</I
></SPAN
>
		konfiguracji. Dotycz± zarówno wydruków poleceñ przelewu dostêpnych w Finanse -&#62; Wydruki 
		jak i wydruków faktur typu FT-0100. A oto dostêpne opcje:
		<TABLE
BORDER="0"
><TBODY
><TR
><TD
>name - nazwa firmy</TD
></TR
><TR
><TD
>shortname - skrócona nazwa firmy</TD
></TR
><TR
><TD
>address - adres firmy (ulica, nr domu)</TD
></TR
><TR
><TD
>zip - kod pocztowy</TD
></TR
><TR
><TD
>city - miasto</TD
></TR
><TR
><TD
>account - numer konta bankowego</TD
></TR
><TR
><TD
>pay_title - tytu³ p³atno¶ci</TD
></TR
></TBODY
></TABLE
>
        	</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-RECEIPTS"
>2.9.3. Dokumenty kasowe (KP/KW)</A
></H2
><P
>Dokumenty kasowe, ze wzglêdu na swoj± specyfikê, posiadaj± podobne 
	  opcje konfiguracyjne jak faktury.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-RECEIPTS-HTML"
>2.9.3.1. HTML</A
></H3
><P
>Przy domy¶lnych ustawieniach dokumenty kasowe wy¶wietlane s± w
          formacie html wg domy¶lnego szablonu. Dla dowodów wp³aty oraz wyp³aty
	  przewidziano wspólny szablon wydruku. W sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[receipts]</I
></SPAN
>
	  masz do dyspozycji jeszcze nastêpuj±ce opcje:
          <UL
><LI
><P
>template_file</P
><P
>Szablon dowodu wp³aty/wyp³aty, który powinien znajdowaæ siê w
               katalogu <TT
CLASS="FILENAME"
>templates</TT
>. Domy¶lnie: receipt.html.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>template_file = mytempl/receipt.html</SAMP
></P
></LI
><LI
><P
>content_type</P
><P
>Content-type dla druku. Je¿eli wpiszesz tutaj 'application/octet-stream'
               to przegl±darka zechce wys³aæ plik do zapisania na dysku, zamiast go wy¶wietliæ.
               Przydatne je¶li u¿ywasz w³asnego szablonu, który wygeneruje np.rtf'a lub xls'a.
               Domy¶lnie: 'text/html'</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>content_type = application/octet-stream</SAMP
></P
></LI
><LI
><P
>attachment_name</P
><P
>Mo¿na podaæ nazwê pliku, jako który ma zostaæ zapisany gotowy
               wydruk. Domy¶lnie: pusta.</P
><P
>Przyk³ad: <SAMP
CLASS="PROMPT"
>attachment_name = receipt.xls</SAMP
></P
></LI
></UL
>
	  </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-RECEIPTS-PDF"
>2.9.3.2. PDF</A
></H3
><P
>Mo¿liwe jest tak¿e tworzenie dokumentów kasowych jako plików pdf. Przypisanie
        	opcji <TT
CLASS="FILENAME"
>type</TT
> z sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[receipts]</I
></SPAN
> 
        	warto¶ci 'pdf' spowoduje, ¿e dowody zamiast w html'u bêd± tworzone jako pliki 
        	"portable data format". Opcja <TT
CLASS="FILENAME"
>template_file</TT
> spe³nia podobn± 
		rolê jak dla wydruków html'owych z tym, ¿e posiada predefiniowan± warto¶æ: 
		'standard' - wydruk podstawowy (odpowiednik receipt.html).
		W opcji <TT
CLASS="FILENAME"
>template_file</TT
> mo¿na tak¿e wstawiæ nazwê pliku php, 
		jednak ta mo¿liwo¶æ jest przeznaczona dla zaawansowanych u¿ytkowników, gdy¿ 
		wymaga utworzenia pliku php, a nie tak jak w przypadku html'a szablonu Smarty.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-DOCUMENTS-OTHER"
>2.9.4. Dokumenty pozosta³e</A
></H2
><P
>Oprócz dokumentów finansowych w LMSie mo¿na przechowywaæ
	    	dokumenty takie jak umowy, protoko³y, aneksy i inne. Ka¿emu klientowi
	    	mo¿na przypisaæ dowoln± liczbê dokumentów na zak³adce 'Dokumenty klienta'
	    	w panelu 'Informacje o kliencie' lub poprzez menu 'Dokumenty'. 
	    	Pliki z dokumentami przechowywane s± poza baz± danych 
	    	(o czym nale¿y pamiêtaæ robi±c backupy) w katalogu 
	    	okre¶lonym zmienn± 'doc_dir' w sekcji
	    	<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[directories]</I
></SPAN
> pliku konfiguracyjnego.
	    	</P
><P
>Dokumenty mog± byæ importowane do systemu jako gotowe pliki, ale 
		tak¿e tworzone wed³ug szablonów przy u¿yciu zdefiniowanych kreatorów. Tutaj 
		system daje du¿e mo¿liwo¶ci konfiguracji. W katalogu 
		<TT
CLASS="FILENAME"
>documents/templates/default</TT
>
		znajduje siê domy¶lny kreator dokumentu (szablon i silnik). U¿ytkownik mo¿e utworzyæ
		dowoln± liczbê w³asnych kreatorów dokumentów, które nale¿y 
		umie¶ciæ w katalogu <TT
CLASS="FILENAME"
>documents/templates/</TT
>.</P
><P
>Ka¿dy kreator powinien zawieraæ plik <TT
CLASS="FILENAME"
>info.php</TT
> o
		okre¶lonej strukturze:
<PRE
CLASS="SCREEN"
>&lt;?php
$engine = array(
	'name' =&#62; 'default', 	// nazwa (katalogu) kreatora, ma³e litery i cyfry
	'engine' =&#62; 'default', 	// katalog z silnikiem (engine.php)
				// mo¿na u¿ywaæ silników z innych kreatorów
	'template' =&#62; 'template.html', 		// plik szablonu (w katalogu 'name')
	'title' =&#62; trans('Default document'), 	// opis, który bêdzie wy¶wietlany w LMS-UI
	'content_type' =&#62; 'text/html', 		// typ pliku wynikowego
	'output' =&#62; 'default.html', 		// nazwa pliku wynikowego
	'plugin' =&#62; 'plugin',			// nazwa pliku pluginu (w katalogu 'name')
	'post-action' =&#62; 'post-action',         // plik PHP wykonywany po dodaniu dokumentu (w transakcji)
);
?&gt;</PRE
>
		Plik <TT
CLASS="FILENAME"
>info.php</TT
> opisuje kreatora i jest jedynym wymaganym
		plikiem. Do utworzenia dokumentu potrzebny jest silnik (plik o nazwie
		<TT
CLASS="FILENAME"
>engine.php</TT
>). Mo¿na utworzyæ w³asny silnik lub
		skorzystaæ z innego, ustawiaj±c zmienn± 'engine' na nazwê kreatora, którego
		silnik chcemy wykorzystaæ. Nie ma zatem wymogu tworzenia w³asnego silnika
		dla ka¿dego nowego kreatora, wystarczy utworzyæ szablon 'template' i plik
		<TT
CLASS="FILENAME"
>info.php</TT
>.</P
><P
>Zmienna <TT
CLASS="FILENAME"
>plugin</TT
> okre¶la nazwê pliku php
		odpowiedzialnego za wy¶wietlenie dodatkowych pól w formularzu tworzenia
		nowego dokumentu. Plugin mo¿e ponadto zawieraæ obs³ugê b³êdów dla
		tych pól. Po dodaniu dokumentu wykonywany jest skrypt PHP okre¶lony w 
		zmiennej <TT
CLASS="FILENAME"
>post-action</TT
>.
		Prosty przyk³ad pluginu i post-akcji przedstawiono w przyk³adowym 
		domy¶lnym dokumencie.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="install-upgrade.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Spis tre&#347;ci</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="user.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Upgrade</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="install.html"
ACCESSKEY="U"
>Pocz&#261;tek rozdzia&#322;u</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Interfejs U¿ytkownika (LMS-UI)</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>