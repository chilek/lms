<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Dokumenty</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="LMS - LAN Management System 1.11-cvs"
HREF="index.html"><LINK
REL="UP"
TITLE="Instalacja i konfiguracja"
HREF="install.html"><LINK
REL="PREVIOUS"
TITLE="Upgrade"
HREF="install-upgrade.html"><LINK
REL="NEXT"
TITLE="Interfejs Użytkownika (LMS-UI)"
HREF="user.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="../images/style.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#EBE4D6"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>LMS - LAN Management System 1.11-cvs</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="install-upgrade.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Rozdzia&#322; 2. Instalacja i konfiguracja</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="user.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="INSTALL-DOCUMENTS"
>2.9. Dokumenty</A
></H1
><P
>LMS umożliwia generowanie oraz przechowywanie przeróżnych
	    dokumentów tj. faktur, dowodów wpłat oraz dokumentów nie-finansowych
	    np. umów, protokołów. Dokumenty mogą być numerowane wg wzorców (planów)
	    numeracyjnych zdefiniowanych przy pomocy menu Konfiguracja - Plany
	    numeracyjne.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-INVOICES"
>2.9.1. Faktury</A
></H2
><P
>LMS umożliwia wystawianie faktur automatycznie i ręcznie. Ręczne wystawienie
          faktury jest możliwe z menu 'Nowa faktura' w panelu 'Finanse'. Automatyczne wystawianie faktur 
          wymaga włączenia tej opcji podczas przypisywania taryf użytkownikom. W takim wypadku
          zapisem faktur do bazy zajmuje się skrypt lms-payments lub demon <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>lmsd</I
></SPAN
></P
><P
>Do poprawnego działania i tworzenia wydruków wymagane jest ustawienie podstawowych 
          opcji w sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[invoices]</I
></SPAN
> konfiguracji:
          <UL
><LI
><P
>header</P
><P
>Dane sprzedawcy. Domyślnie: pusty. Można użyć ciągu "\n" aby oddzielić linie od siebie.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>header = "SuperNet ISP\nul.Nowa 15\n12-000 Wąchock\n"</SAMP
></P
></LI
><LI
><P
>footer</P
><P
>Stopka faktury - np. dane sprzedawcy. Domyślnie: pusta. Stopka zostanie umieszczona na dole faktury, małą czcionką. Podobnie jak i w przypadku opcji header, można użyć ciągu "\n" aby oddzielić linie od siebie.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>footer = "Blokowa Sieć Komputerowa K-27 w Mielcu, tel.555-23-23, bla bla"</SAMP
></P
></LI
><LI
><P
>default_author</P
><P
>Domyślna osoba wystawiająca fakturę (dla faktur wystawianych automatycznie). Domyślnie: puste</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>default_author = "specjalista d/s fakturowania"</SAMP
></P
></LI
><LI
><P
>cplace</P
><P
>Miejsce wystawienia faktury. Domyślnie: puste.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>cplace = Warszawa</SAMP
></P
></LI
><LI
><P
>print_balance_history</P
><P
>Określa czy na fakturze (html) drukować listę operacji finansowych 
		na koncie klienta. Domyślnie: nie ustawiona.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>print_balance_history = true</SAMP
></P
></LI
><LI
><P
>print_balance_history_limit</P
><P
>Liczba rekordów na liście operacji finansowych na
		fakturze. Domyślnie: 10.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>print_balance_history_limit = 20000</SAMP
></P
></LI
></UL
>
          Wygenerowane faktury można obejrzeć w dwojaki sposób: albo poprzez ikonkę drukarki 
          na wykazie bilansu finansowego (ogólnego bądź pojedynczego użytkownika), albo 
          poprzez 'Lista faktur' z menu 'Finanse'. W przypadku listy faktur, możliwe jest 
          także filtrowanie faktur do wydruku.</P
><P
>Podczas wydruku faktury domyślnie wyświetlany jest oryginał i kopia, można to zmienić:
    	    <UL
><LI
><P
>default_printpage</P
><P
>Lista oddzielonych przecinkiem nazw stron wydruku faktur. Można użyć zdefiniowane ciągi znaków "original", "copy" i "duplicate". Domyślnie: "original,copy".</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>default_printpage = "original"</SAMP
></P
></LI
></UL
>
	    </P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-HTML"
>2.9.1.1. HTML</A
></H3
><P
>Przy domyślnych ustawieniach faktury wyświetlane są w
          formacie html wg domyślnego szablonu. W sekcji [invoices] masz
          do dyspozycji jeszcze następujące opcje:
          <UL
><LI
><P
>template_file</P
><P
>Szablon faktury, który powinien znajdować się w
               katalogu <TT
CLASS="FILENAME"
>templates</TT
>. Domyślnie: invoice.html.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>template_file = invoice-mynet.html</SAMP
></P
></LI
><LI
><P
>content_type</P
><P
>Content-type dla faktury. Jeżeli wpiszesz tutaj 'application/octet-stream'
               to przeglądarka zechce wysłać plik do zapisania na dysku, zamiast go wyświetlić.
               Przydatne jeśli używasz własnego szablonu, który wygeneruje np.rtf'a lub xls'a.
               Domyślnie: 'text/html'</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>content_type = application/octet-stream</SAMP
></P
></LI
><LI
><P
>attachment_name</P
><P
>Można podać nazwę pliku, jako który ma zostać zapisany gotowy
               wydruk. Domyślnie: pusta.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>attachment_name = faktura.xls</SAMP
></P
></LI
></UL
>
          Wynikowy dokument HTML zawiera oryginały 
          i kopie, które są oddzielone znacznikami podziału strony poprzez CSS. 
          Tak więc każda nowoczesna przeglądarka zgodna z CSS powinna bezproblemowo drukować 
          faktury ładnie podzielone na strony. Funkcja ta była testowana na przeglądarkach 
          Microsoft Internet Explorer 6.0, Opera 7.02 oraz Mozilla 1.3.</P
><P
>               <DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="../images/note.gif"
HSPACE="5"
ALT="Notatka"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Praktycznie każda przeglądarka internetowa ma możliwość 
               konfiguracji wydruku, gdzie można wyłączyć funkcje takie jak drukowanie
               stopki i nagłówka, czy też adresu na wydruku.</P
></TD
></TR
></TABLE
></DIV
>
          </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-PDF"
>2.9.1.2. PDF</A
></H3
><P
>Możliwe jest także tworzenie faktur jako pliki pdf. Przypisanie
          opcji <TT
CLASS="FILENAME"
>type</TT
> z sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[invoices]</I
></SPAN
> 
          wartości 'pdf' spowoduje, że faktury zamiast w html'u będą tworzone jako pliki 
          "portable data format". Opcja <TT
CLASS="FILENAME"
>template_file</TT
> spełnia podobną rolę jak dla faktur html'owych,
          z tym, że posiada predefiniowane wartości: 'standard' - faktura podstawowa 
          (odpowiednik invoice.html) i 'FT-0100' - faktura przystosowana do drukowania
          na drukach <A
HREF="http://www.polarnet.org/produkty/ft-0100/"
TARGET="_top"
>FT-0100</A
> 
	  zawierających druk polecenia przelewu. W opcji <TT
CLASS="FILENAME"
>template_file</TT
>
          można także wstawić nazwę pliku php, jednak ta możliwość jest przeznaczona dla
          zaawansowanych użytkowników, gdyż wymaga utworzenia pliku php, a nie tak jak w 
          przypadku faktur html'owych szablonu Smarty.</P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-CNOTE"
>2.9.1.3. Korekty</A
></H3
><P
>Faktury korygujące korzystają z ustawień dotyczących
	  pozostałych faktur z sekcji [invoices]. Domyślny szablon faktury
	  uwzględnia faktury korygujące. Jednak udostępniono opcję
	  pozwalającą na zdefiniowanie osobnego szablonu dla korekt (pozostałe
	  opcje są wspólne dla faktur i dla korekt):
          <UL
><LI
><P
>cnote_template_file</P
><P
>Szablon faktury korygującej, który powinien znajdować się w
               katalogu <TT
CLASS="FILENAME"
>templates</TT
>. Domyślnie: invoice.html.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>cnote_template_file = invoice-mynet.html</SAMP
></P
></LI
></UL
>
	  </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-INVOICES-IBAN"
>2.9.1.4. Automatyczne generowanie numeru konta bankowego</A
></H3
><P
>LMS umożliwia automatyczne generowanie numeru konta bankowego w standardzie IBAN
	  zawierającego ID klienta. Funkcja ta może być używana do masowej identyfikacji płatności
	  która jako usługa znajduje się w ofercie większości banków. Aby masowa identyfikacja była
	  możliwa, należy podpisać umowę z bankiem z której potrzebne nam będą:
	  <UL
><LI
><P
>Numer rozliczeniowy banku</P
><P
>zawsze stały dla każdego banku, złożony z 8 cyfr</P
></LI
><LI
><P
>Identyfikator rachunku</P
><P
>identyfikator naszego wirtualnego rachunku, złożony z 4 cyfr</P
></LI
></UL
>
	  Gdy mamy potrzebne dane, możemy przejść do konfiguracji LMSa.</P
><P
>W sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[finances]</I
></SPAN
> ustawiamy:
	  <UL
><LI
><P
>iban</P
><P
>określa czy numer konta na fakturach ma być zwykły czy generowany automatycznie (0|1)</P
></LI
><LI
><P
>account</P
><P
>skrócony numer konta bankowego powstały przez połączenie numeru rozliczeniowego banku 
		    z identyfikatorem rachunku, numer ten musi się składać od 8 do 20 cyfr bez spacji i innych 
		    znaków. Standardem jest podanie 12 cyfr. (numer rozliczeniowy banku-8 oraz Twój nr 
		    rozliczeniowy-4)</P
></LI
></UL
>
	  Od tej pory jeśli używamy faktur PDF z szablonem FT-0100, lub drukujemy bloczki przelewu/wpłaty z
	  menu Finanse -&#62; Wydruki -&#62; Faktury -&#62; Drukuj polecenia przelewu/wpłaty, każdy wydruk będzie zawierał
	  unikalny numer konta z zawartym ID naszego klienta. ID klienta zostanie dodane na końcu, oraz
	  poprzedzone odpowiednia ilością zer. Suma kontrolna będzie wyliczana automatycznie.
	  Więcej o IBAN w <A
HREF="http://en.wikipedia.org/wiki/International_Bank_Account_Number"
TARGET="_top"
>Wikipedii</A
>
          </P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-TRANSFERFORMS"
>2.9.2. Polecenia przelewu/wpłaty</A
></H2
><P
>Dane do druków polecenia przelewu brane są z sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[finances]</I
></SPAN
>
		konfiguracji. Dotyczą zarówno wydruków poleceń przelewu dostępnych w Finanse -&#62; Wydruki 
		jak i wydruków faktur typu FT-0100. A oto dostępne opcje:
		<TABLE
BORDER="0"
><TBODY
><TR
><TD
>name - nazwa firmy</TD
></TR
><TR
><TD
>shortname - skrócona nazwa firmy</TD
></TR
><TR
><TD
>address - adres firmy (ulica, nr domu)</TD
></TR
><TR
><TD
>zip - kod pocztowy</TD
></TR
><TR
><TD
>city - miasto</TD
></TR
><TR
><TD
>account - numer konta bankowego</TD
></TR
><TR
><TD
>pay_title - tytuł płatności</TD
></TR
></TBODY
></TABLE
>
        	</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-RECEIPTS"
>2.9.3. Dokumenty kasowe (KP/KW)</A
></H2
><P
>Dokumenty kasowe, ze względu na swoją specyfikę, posiadają podobne 
	  opcje konfiguracyjne jak faktury.</P
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-RECEIPTS-HTML"
>2.9.3.1. HTML</A
></H3
><P
>Przy domyślnych ustawieniach dokumenty kasowe wyświetlane są w
          formacie html wg domyślnego szablonu. Dla dowodów wpłaty oraz wypłaty
	  przewidziano wspólny szablon wydruku. W sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[receipts]</I
></SPAN
>
	  masz do dyspozycji jeszcze następujące opcje:
          <UL
><LI
><P
>template_file</P
><P
>Szablon dowodu wpłaty/wypłaty, który powinien znajdować się w
               katalogu <TT
CLASS="FILENAME"
>templates</TT
>. Domyślnie: receipt.html.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>template_file = mytempl/receipt.html</SAMP
></P
></LI
><LI
><P
>content_type</P
><P
>Content-type dla druku. Jeżeli wpiszesz tutaj 'application/octet-stream'
               to przeglądarka zechce wysłać plik do zapisania na dysku, zamiast go wyświetlić.
               Przydatne jeśli używasz własnego szablonu, który wygeneruje np.rtf'a lub xls'a.
               Domyślnie: 'text/html'</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>content_type = application/octet-stream</SAMP
></P
></LI
><LI
><P
>attachment_name</P
><P
>Można podać nazwę pliku, jako który ma zostać zapisany gotowy
               wydruk. Domyślnie: pusta.</P
><P
>Przykład: <SAMP
CLASS="PROMPT"
>attachment_name = receipt.xls</SAMP
></P
></LI
></UL
>
	  </P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="INSTALL-RECEIPTS-PDF"
>2.9.3.2. PDF</A
></H3
><P
>Możliwe jest także tworzenie dokumentów kasowych jako plików pdf. Przypisanie
        	opcji <TT
CLASS="FILENAME"
>type</TT
> z sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[receipts]</I
></SPAN
> 
        	wartości 'pdf' spowoduje, że dowody zamiast w html'u będą tworzone jako pliki 
        	"portable data format". Opcja <TT
CLASS="FILENAME"
>template_file</TT
> spełnia podobną 
		rolę jak dla wydruków html'owych z tym, że posiada predefiniowaną wartość: 
		'standard' - wydruk podstawowy (odpowiednik receipt.html).
		W opcji <TT
CLASS="FILENAME"
>template_file</TT
> można także wstawić nazwę pliku php, 
		jednak ta możliwość jest przeznaczona dla zaawansowanych użytkowników, gdyż 
		wymaga utworzenia pliku php, a nie tak jak w przypadku html'a szablonu Smarty.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="INSTALL-DOCUMENTS-OTHER"
>2.9.4. Dokumenty pozostałe</A
></H2
><P
>Oprócz dokumentów finansowych w LMSie można przechowywać
	    	dokumenty takie jak umowy, protokoły, aneksy i inne. Każemu klientowi
	    	można przypisać dowolną liczbę dokumentów na zakładce 'Dokumenty klienta'
	    	w panelu 'Informacje o kliencie' lub poprzez menu 'Dokumenty'. 
	    	Pliki z dokumentami przechowywane są poza bazą danych 
	    	(o czym należy pamiętać robiąc backupy) w katalogu 
	    	określonym zmienną 'doc_dir' w sekcji
	    	<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[directories]</I
></SPAN
> pliku konfiguracyjnego.
	    	</P
><P
>Dokumenty mogą być importowane do systemu jako gotowe pliki, ale 
		także tworzone według szablonów przy użyciu zdefiniowanych kreatorów. Tutaj 
		system daje duże możliwości konfiguracji. W katalogu 
		<TT
CLASS="FILENAME"
>documents/templates/default</TT
>
		znajduje się domyślny kreator dokumentu (szablon i silnik). Użytkownik może utworzyć
		dowolną liczbę własnych kreatorów dokumentów, które należy 
		umieścić w katalogu <TT
CLASS="FILENAME"
>documents/templates/</TT
>.</P
><P
>Każdy kreator powinien zawierać plik <TT
CLASS="FILENAME"
>info.php</TT
> o
		określonej strukturze:
<PRE
CLASS="SCREEN"
>&lt;?php
$engine = array(
	'name' =&#62; 'default', 	// nazwa (katalogu) kreatora, małe litery i cyfry
	'engine' =&#62; 'default', 	// katalog z silnikiem (engine.php)
				// można używać silników z innych kreatorów
	'template' =&#62; 'template.html', 		// plik szablonu (w katalogu 'name')
	'title' =&#62; trans('Default document'), 	// opis, który będzie wyświetlany w LMS-UI
	'content_type' =&#62; 'text/html', 		// typ pliku wynikowego
	'output' =&#62; 'default.html', 		// nazwa pliku wynikowego
	'plugin' =&#62; 'plugin',			// nazwa pliku pluginu (w katalogu 'name')
	'post-action' =&#62; 'post-action',         // plik PHP wykonywany po dodaniu dokumentu (w transakcji)
);
?&gt;</PRE
>
		Plik <TT
CLASS="FILENAME"
>info.php</TT
> opisuje kreatora i jest jedynym wymaganym
		plikiem. Do utworzenia dokumentu potrzebny jest silnik (plik o nazwie
		<TT
CLASS="FILENAME"
>engine.php</TT
>). Można utworzyć własny silnik lub
		skorzystać z innego, ustawiając zmienną 'engine' na nazwę kreatora, którego
		silnik chcemy wykorzystać. Nie ma zatem wymogu tworzenia własnego silnika
		dla każdego nowego kreatora, wystarczy utworzyć szablon 'template' i plik
		<TT
CLASS="FILENAME"
>info.php</TT
>.</P
><P
>Zmienna <TT
CLASS="FILENAME"
>plugin</TT
> określa nazwę pliku php
		odpowiedzialnego za wyświetlenie dodatkowych pól w formularzu tworzenia
		nowego dokumentu. Plugin może ponadto zawierać obsługę błędów dla
		tych pól. Po dodaniu dokumentu wykonywany jest skrypt PHP określony w 
		zmiennej <TT
CLASS="FILENAME"
>post-action</TT
>.
		Prosty przykład pluginu i post-akcji przedstawiono w przykładowym 
		domyślnym dokumencie.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="install-upgrade.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Spis tre&#347;ci</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="user.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Upgrade</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="install.html"
ACCESSKEY="U"
>Pocz&#261;tek rozdzia&#322;u</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Interfejs Użytkownika (LMS-UI)</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>