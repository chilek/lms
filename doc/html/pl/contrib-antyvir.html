<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Antywirus</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="LMS - LAN Management System 1.11-cvs"
HREF="index.html"><LINK
REL="UP"
TITLE="Dodatki"
HREF="contrib.html"><LINK
REL="PREVIOUS"
TITLE="Ostrzeżenia + squid"
HREF="contrib-squid.html"><LINK
REL="NEXT"
TITLE="Userpanel"
HREF="userpanel.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="../images/style.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#EBE4D6"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>LMS - LAN Management System 1.11-cvs</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="contrib-squid.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Rozdzia&#322; 8. Dodatki</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="userpanel.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="CONTRIB-ANTYVIR"
>8.5. Antywirus</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="CONTRIB-ANTYVIR-INTRO"
>8.5.1. Wstęp</A
></H2
><P
>Większość z nas miała problemy z zawirusowanymi komputerami.
               Różni ludzie mają różne podejście do problemu. Skrypt lms-antyvir
               wykrywa wirusy zagrażające stabilności sieci. Jest oparty na programie
               tcpdump, przy pomocy którego możemy spróbować wykryć wirusy/trojany
               same się rozprzestrzeniające jak Mydoom itp. Cechą wspólną prawie wszystkich 
               tego typu programów jest skanowanie sieci na portach 135 i 445 oraz 
               dodatkowych w zależności od odmiany wirusa. Oczywiście MS Windows też korzysta 
               z tych portów, ale nie w takim stopniu. Po wykryciu nadmiernego ruchu
               wyświetlana jest informacja na standardowe wyjście lub włączane jest 
               ostrzeżenie ze zdefiniowanym komunikatem.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="CONTRIB-ANTYVIR-CONFIG"
>8.5.2. Konfiguracja</A
></H2
><P
>Konfigurację lms-antyvir dokonuje się w sekcji <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[antyvir]</I
></SPAN
> pliku
               <TT
CLASS="FILENAME"
>lms.ini</TT
>, a masz do dyspozycji następujące opcje:</P
><UL
><LI
><P
>logfile</P
><P
>Lokalizacja tymczasowych pliku(ów) z logami tcpdumpa.
                         Domyślnie: /tmp/antyvir</P
><P
>Przykład:     <SAMP
CLASS="PROMPT"
>logfile = /var/log/antyvir</SAMP
></P
></LI
><LI
><P
>interfaces</P
><P
>Lista oddzielonych spacją nazw interfejsów, z których tcpdump ma 
                         zbierać dane. Domyślnie: eth0</P
><P
>Przykład:     <SAMP
CLASS="PROMPT"
>interfaces = eth0 eth1</SAMP
></P
></LI
><LI
><P
>ports</P
><P
>Lista oddzielonych spacją portów, z których tcpdump ma zbierać dane.
                         Dla każdego tworzony jest osobny proces, więc nie przesadzać. Domyślnie: 135 445</P
><P
>Przykład:     <SAMP
CLASS="PROMPT"
>ports = 445</SAMP
></P
></LI
><LI
><P
>packets</P
><P
>Określa liczbę pakietów po odebraniu której tcpdump kończy pracę.
                         Domyślnie: 1000</P
><P
>Przykład:     <SAMP
CLASS="PROMPT"
>packets = 500</SAMP
></P
></LI
><LI
><P
>threshold</P
><P
>Określa liczbę pakietów, po przekroczeniu której program uznaje
                         ruch w sieci za podejrzany. Domyślnie: 50</P
><P
>Przykład:     <SAMP
CLASS="PROMPT"
>threshold = 100</SAMP
></P
></LI
><LI
><P
>field</P
><P
>Ma to związek z tcpdumpem i jego różnymi wersjami. W starszych
                         wersjach powinno być tu 6. Jak to sprawdzić? tcpdump -i eth1 -enp -c 1
                         otrzymujemy 00:03:38.613761 0:40:f4:b3:1c:67 0:30:84:b3:bb:8d 0800 1414:
                         10.100.0.52.4314 &#62; 172.181.172.35.4662: .... interesuje nas pole w tym
                         wypadku 6 czyli adres IP nadawcy. Domyślnie: 11</P
><P
>Przykład:     <SAMP
CLASS="PROMPT"
>field = 6</SAMP
></P
></LI
><LI
><P
>message</P
><P
>Treść ostrzeżenia, w którym można zastosować zmienną %DATE dla bieżącej daty
                         i godziny. Jeśli pusta, ostrzeżenie nie zostanie włączone. Domyślnie: pusta</P
><P
>Przykład:     <SAMP
CLASS="PROMPT"
>message = Wykryto wirusa w dniu %DATE</SAMP
></P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="contrib-squid.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Spis tre&#347;ci</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="userpanel.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Ostrzeżenia + squid</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="contrib.html"
ACCESSKEY="U"
>Pocz&#261;tek rozdzia&#322;u</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Userpanel</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>