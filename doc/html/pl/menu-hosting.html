<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Hosting</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="LMS - LAN Management System 1.11-cvs"
HREF="index.html"><LINK
REL="UP"
TITLE="Interfejs UĹźytkownika (LMS-UI)"
HREF="user.html"><LINK
REL="PREVIOUS"
TITLE="Dokumenty"
HREF="menu-documents.html"><LINK
REL="NEXT"
TITLE="WiadomoĹci"
HREF="menu-messages.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="../images/style.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#EBE4D6"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>LMS - LAN Management System 1.11-cvs</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="menu-documents.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Rozdzia&#322; 3. Interfejs UĹźytkownika (LMS-UI)</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="menu-messages.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="MENU-HOSTING"
>3.9. Hosting</A
></H1
><P
>ZarzÄdzanie rĂłĹźnymi usĹuga na serwerze jest teraz
	moĹźliwe. FunkcjonalnoĹÄ ta jest przeznaczona dla zaawansowanych 
	uĹźytkownikĂłw. Wymaga znajomoĹci tych usĹug i ich konfiguracji
	w celu korzystania z bazy danych.</P
><P
>W LMSie moĹźna utworzyÄ piÄÄ rodzajĂłw kont: shell (1), poczta (2),
	www (4), ftp (8) i sql (16). W nawiasach podano numeryczne wewnÄtrzne oznaczenie
	typu konta w bazie. Konta mogÄ byÄ wielotypowe. PrzykĹadowo, jeĹli 
	zdefiniujesz konto shell+poczta+ftp w bazie zostanie zapisana cyfra 11.
	Oznacza to, Ĺźe do rozpoznawania typu konta w warunkach WHERE zapytaĹ
	SQL naleĹźy stosowaÄ sumowanie binarne (jak na przykĹadach w dalszej
	czÄĹci rozdziaĹu).</P
><P
>Masz takĹźe moĹźliwoĹÄ definiowania domen i aliasĂłw.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MENU-HOSTING-ACCOUNTS"
>3.9.1. Konta</A
></H2
><P
>Na liĹcie przedstawione sÄ podstawowe informacje o kontach.
	    MoĹźliwe jest dowolne sortowanie listy poprzez klikniÄcie nazwy
	    kolumny oraz filtrowanie wg zadanych kryteriĂłw. PrzejĹcie do edycji 
	    danych konta nastÄpuje po wybraniu ikony [Edytuj]. UĹźytkownik ma 
	    takĹźe prawo do zmiany hasĹa.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MENU-HOSTING-NEW-ACCOUNT"
>3.9.2. Nowe konto</A
></H2
><P
>DefiniujÄc dane konto musisz podaÄ login, hasĹo, wybraÄ domenÄ,
	    wybraÄ typ konta oraz przypisaÄ klienta (lub utworzyÄ tzw. konto
	    systemowe). Data waĹźnoĹci konta jest opcjonalna. Pozostawienie pustego pola z datÄ 
	    oznacza, Ĺźe konto nigdy nie wygasa. </P
><P
>Masz moĹźliwoĹÄ zdefiniowaÄ dowolny katalog domowy uĹźytkownika (konta).
	    Opcja konfiguracyjna <TT
CLASS="FILENAME"
>homedir_prefix</TT
> w sekcji 
	    <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>[phpui]</I
></SPAN
> zawiera prefix katalogu domowego, domyĹlnie
	    ustawiony na wartoĹÄ "/home/".</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MENU-HOSTING-ALIASES"
>3.9.3. Aliasy</A
></H2
><P
>Konta (gĹĂłwnie mailowe) mogÄ posiadaÄ dowolnÄ iloĹÄ aliasĂłw.
	    Administrator serwera pocztowego moĹźe przekierowaÄ (lokalnie) pocztÄ
	    z wszystkich aliasĂłw do jednego konta. Na liĹcie aliasĂłw przedstawione 
	    sÄ podstawowe informacje o nich i o kontach na ktĂłre aliasy te wskazujÄ.
	    MoĹźliwe jest dowolne sortowanie listy poprzez klikniÄcie nazwy
	    kolumny oraz filtrowanie wg zadanych kryteriĂłw.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MENU-HOSTING-NEW-ALIAS"
>3.9.4. Nowy alias</A
></H2
><P
>TworzÄc alias definiujesz dla niego login i domenÄ oraz cel. Celem moĹźe 
		byÄ jedno lub wiÄcej istniejÄcych kont. Uwaga: aby utworzyÄ alias do konta,
		ktĂłre znajduje siÄ na obcym serwerze naleĹźy utworzyÄ konto i podaÄ adres przekierowania.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MENU-HOSTING-DOMAINS"
>3.9.5. Domeny</A
></H2
><P
>Obecnie LMS moĹźe bezpoĹrednio zarzÄdzaÄ serwerem PowerDNS z mysql/pqsl backend.
		LMS teraz posiada peĹne wsparcie dla wiÄkszoĹci funkcji serwera PowerDNS. Ma peĹnie wsparcie 
		dla domen typu: master, slave i native. Na liĹcie domen przedstawione sÄ podstawowe informacje 
		o zdefiniowanych domenach jak nazwa, typ, wĹaĹciciel. MoĹźliwe jest dowolne sortowanie listy 
		poprzez klikniÄcie nazwy kolumny lub poprzez pierwszÄ literÄ nazwy domeny. MoĹźliwa jest edycja 
		podstawowych danych domeny po wybraniu ikony [Edytuj]. Zaawansowana edycja rekordĂłw domeny 
		odbywa siÄ poprzez wybranie ikony [Informacje] a nastÄpnie [Rekordy]. MoĹźliwa wtedy jest peĹna 
		konfiguracja wszystkich rekordĂłw opisujÄcych danÄ domenÄ. KaĹźda zmiana rekordu zapisana w bazie 
		danych LMS np.: edycja, dodanie lub usuniÄcie rekordu automatycznie zwiÄksza licznik domeny o 1.
		KaĹźda zmiana jest takĹźe automatycznie dostrzegana przez serwer PowerDNS. Aby taka wspĂłpraca byĹa 
		moĹźliwa naleĹźy w bazie danych LMS zaĹoĹźyÄ dodatkowego uĹźytkownika z uprawieniami SELECT, INSERT,
		UPDATE, DELETE dla tabel domains, records oraz SELECT dla tabeli supermaster.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MENU-HOSTING-NEW-DOMAIN"
>3.9.6. Nowa domena</A
></H2
><P
>Dane domeny zawierajÄ nazwÄ, opis, typ (master, slave, native), adres ip serwera www, 
		adres ip serwera pocztowego, adres ip gĹĂłwnego serwera nazw (jeĹli wybrano typ slave) i inne
		parametry, ktĂłrych wartoĹci domyĹlne ustawione sÄ w sekcji [zones]. Domena moĹźe zostaÄ przypisana 
		do klienta.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="MENU-HOSTING-SEARCH"
>3.9.7. Szukaj</A
></H2
><P
>Wyszukiwanie kont, aliasĂłw i domen wedĹug zadanych kryteriĂłw.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="HOSTING-EXAMPLES"
>3.9.8. PrzykĹady</A
></H2
><P
>PoniĹźej opisano sposĂłb intergracji LMS z serwerem PowerDNS.
	    <DIV
CLASS="EXAMPLE"
><A
NAME="HOSTING-E0"
></A
><P
><B
>Przyk&#322;ad 3-1. Domeny. Konfiguracja PowerDNS.</B
></P
><PRE
CLASS="SCREEN"
>Przygotowanie bazy danych na ktĂłrej dziaĹa LMS do wspĂłĹpracy z serwerem PowerDNS.  

Dodajemy uĹźytkownika powerdns o uprawnieniach ograniczonych do tabel domains i records.

GRANT SELECT, INSERT, UPDATE, DELETE ON powerdns.domains TO 'powerdns'@'adres-serwera-dns' IDENTIFIED BY 'hasĹo';
GRANT SELECT, INSERT, UPDATE, DELETE ON powerdns.records TO 'powerdns'@'adres-serwera-dns' IDENTIFIED BY 'hasĹo';

Instalujemy pakiety: pdns, pdns-backend, pdns-recursor.

W dystrybucjach Centos, Fedora, RedHat:

yum install pdns pdns-backend pdns-recursor

Edytujemy plik /etc/pdns/pdns.conf dodajÄc:

launch=gmysql
gmysql-dbname=lms #wpisz wĹaĹciwÄ nazwÄ bazy danych na ktĂłrej pracuje lms
gmysql-host=adres-serwera-sql #podaj adres ip lub nazwÄ serwera na ktĂłrym pracuje bazy danych
gmysql-password=hasĹo
gmysql-user=powerdns
master=yes 
slave=yes
recursor=127.0.0.1:5300
allow-recursion=127.0.0.0/8, 192.168.0.1/24 

Gdzie 192.168.0.1 to przykĹadowa sieÄ. Po przecinku naleĹźy dodaÄ wĹasne sieci z ktĂłrych
serwer ma obsĹugiwaÄ zapytania rekurencyjne.

Edytujemy plik /etc/pdns-recursor/recursor.conf	dodajÄc:

allow-from=127.0.0.0/8 
local-address=127.0.0.1
local-port=5300

NastÄpnie:

chkconfig --levels 235 pdns-recursor on
chkconfig --levels 235 pdns on

service pdns-recursor start
service pdns start

Na Debianie:

apt-get install pdns-server pdns-backend-mysql pdns-recursor

Edytujemy plik  /etc/powerdns/pdns.conf dodajÄc:

launch=gmysql

Edytujemy /etc/powerdns/pdns.d/pdns.local dodajÄc: 

gmysql-dbname=lms #wpisz wĹaĹciwÄ nazwÄ bazy danych na ktĂłrej pracuje lms
gmysql-host=adres-serwera-sql #podaj adres ip lub nazwÄ serwera na ktĂłrym pracuje bazy danych
gmysql-password=hasĹo
gmysql-user=powerdns
master=yes 
slave=yes

Edytujemy plik /etc/powerdns/recursor.conf	dodajÄc:

allow-from=127.0.0.0/8 
local-address=127.0.0.1
local-port=5300

NastÄpnie 

/etc/init.d/pdns start
/etc/init.d/pdns-recursor start&#13;</PRE
></DIV
></P
><P
>PoniĹźszy listing zawiera istotne fragmenty pliku konfiguracyjnego
	    demona proftpd (w wersji 1.2.10) umoĹźliwiajÄcy przechowywanie danych
	    o kontach ftp w bazie LMSa. PrzykĹad zawiera konfiguracjÄ dla bazy
	    danych PostgreSQL, w komentarzach podano rozwiÄzania dla MySQLa:
	    <DIV
CLASS="EXAMPLE"
><A
NAME="HOSTING-E1"
></A
><P
><B
>Przyk&#322;ad 3-2. Hosting. Konfiguracja proftpd.</B
></P
><PRE
CLASS="SCREEN"
>  ServerName	"LMS FTP Server"
  
  #nazwa_bazy@host:port klient hasĹo
  SQLConnectInfo lms@localhost:5432 lms mypassword
  
  SQLAuthTypes Crypt Plaintext
  SQLUserInfo passwd login password uid NULL home NULL
  RequireValidShell off
  SQLAuthenticate users
  
  # utworzenie katalogu domowego gdy nie istnieje
  SQLHomedirOnDemand on
  
  # komunikat przy logowaniu
  SQLShowInfo PASS "230" "Last login: %{getlastlogin}"
  SQLLog PASS setlastlogin
  
  # SQLNamedQuery getlastlogin SELECT "CASE lastlogin WHEN 0 THEN '' ELSE FROM_UNIXTIME(lastlogin) END FROM passwd WHERE login='%u'"
  # SQLNamedQuery setlastlogin UPDATE "lastlogin=UNIX_TIMESTAMP() WHERE login='%u'" passwd 
  SQLNamedQuery getlastlogin SELECT "CASE lastlogin WHEN 0 THEN '' ELSE lastlogin::abstime::timestamp::text END FROM passwd WHERE login='%u'"
  SQLNamedQuery setlastlogin UPDATE "lastlogin=EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0)) WHERE login='%u'" passwd
  
  # Sprawdzamy datÄ waĹźnoĹci konta oraz ograniczamy szukanie do kont ftp
  # SQLUserWhereClause "type &#38; 8 = 8 AND (expdate = 0 OR expdate &gt; UNIX_TIMESTAMP())"
  SQLUserWhereClause "type &#38; 8 = 8 AND (expdate = 0 OR expdate &gt; EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0)))"</PRE
></DIV
></P
><P
>W kolejnym przykĹadzie przedstawimy jak skonfigurowaÄ serwer
	    Postfix 2.1.1 oraz Cyrus-SASL 2.1.19, Courier-IMAP/POP3 3.0.4, aby korzystaĹy
	    z bazy danych LMSa. LMS'owe konta bÄdÄ kontami wirtualnymi, a poczta
	    przechowywana bÄdzie w formacie Maildir.</P
><P
>PoniewaĹź hasĹa w LMS'ie sÄ szyfrowane, wymagane jest zainstalowanie
	    SASL'a z ĹatÄ pozwalajÄcÄ na to. W komentarzach podano wartoĹci opcji
	    charakterystycznych dla bazy MySQL. Listing zawiera tylko opcje bezpoĹrednio
	    zwiÄzane z bazÄ danych:
	    <DIV
CLASS="EXAMPLE"
><A
NAME="HOSTING-E2"
></A
><P
><B
>Przyk&#322;ad 3-3. Konta. Konfiguracja serwera pocztowego (postfix+sasl+courier).</B
></P
><PRE
CLASS="SCREEN"
># Plik smtpd.conf (Cyrus-SASL):

pwcheck_method: auxprop
password_format: crypt
mech_list: login plain
sql_user: lms
sql_passwd: hasĹo
sql_hostnames: localhost
sql_database: lms
# MySQL
#sql_engine: mysql
#sql_select: SELECT password FROM passwd, domains WHERE domainid = domains.id
#       AND login='%u' AND domains.name ='%r' AND type &#38; 2 = 2 
#	AND (expdate = 0 OR expdate &gt; UNIX_TIMESTAMP())
# PostgreSQL
sql_engine: pgsql
sql_select: SELECT password FROM passwd, domains WHERE domainid = domains.id
	AND login='%u' AND domains.name ='%r' AND type &#38; 2 = 2 
	AND (expdate = 0 OR expdate &gt; EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0)))

# authpgsqlrc (lub authmysqlrc) (Courier):

# uĹźytkownik postfix (wĹaĹciciel katalogu z pocztÄ)
#MYSQL_UID_FIELD '1004'
PGSQL_UID_FIELD '1004'
# grupa postfix (wĹaĹciciel katalogu z pocztÄ)
#MYSQL_GID_FIELD '1004'
PGSQL_GID_FIELD '1004'
#MYSQL_PORT		3306
PGSQL_PORT		5432
#MYSQL_USERNAME		lms
PGSQL_USERNAME		lms
#MYSQL_PASSWORD		hasĹo
PGSQL_PASSWORD		hasĹo
#MYSQL_DATABASE		lms
PGSQL_DATABASE		lms
#MYSQL_SELECT_CLAUSE SELECT login, \
#       password, '', 104, 104, '/var/spool/mail/virtual', \
#       CONCAT(domains.name,'/',login,'/'), '', login, '' \
#       FROM passwd, domains WHERE domainid = domains.id \
#       AND login = '$(local_part)' AND domains.name = '$(domain)' \
#       AND type &#38; 2 = 2 AND (expdate = 0 OR expdate &gt; UNIX_TIMESTAMP())
PGSQL_SELECT_CLAUSE SELECT login, \
        password, '', 104, 104, '/var/spool/mail/virtual', \
        domains.name || '/' || login ||'/', '', login, '' \
        FROM passwd, domains WHERE domainid = domains.id 
        AND login = '$(local_part)' AND domains.name = '$(domain)' \
        AND type &#38; 2 = 2 \
        AND (expdate = 0 OR expdate &gt; EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0)))

# main.cf (Postfix):

virtual_mailbox_base = /var/spool/mail/virtual
virtual_mailbox_domains = pgsql:/etc/postfix/virtual_domains_maps.cf
virtual_mailbox_maps = pgsql:/etc/postfix/virtual_mailbox_maps.cf
virtual_alias_maps = pgsql:/etc/postfix/virtual_alias_maps.cf
recipient_bcc_maps = pgsql:/etc/postfix/recipient_bcc_maps.cf

# virtual_domains_maps.cf (Postfix):

user = lms
password = hasĹo
hosts = localhost
dbname = lms
#pgSQL i MySQL
query = SELECT name FROM domains WHERE name = '%s'

# virtual_mailbox_maps.cf (Postfix):

user = lms
password = hasĹo
hosts = localhost
dbname = lms

# MySQL
#query = SELECT CONCAT(domains.name,'/',login,'/') 
#	FROM passwd, domains WHERE domainid = domains.id
#	AND login = '%u' AND domains.name = '%d' 
#	AND type &#38; 2 = 2 AND (expdate = 0 OR expdate &gt; UNIX_TIMESTAMP())
# PostgresSQL
query = SELECT domains.name || '/' || login || '/' 
	FROM passwd, domains WHERE domainid = domains.id
        AND login = '%u' AND domains.name = '%d' 
        AND type &#38; 2 = 2 
        AND (expdate = 0 OR expdate &gt; EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0)))

# virtual_alias_maps.cf (Postfix):

user = lms
password = hasĹo
hosts = localhost
dbname = lms
# MySQL
#query = SELECT mail_forward
#	FROM passwd p
#	JOIN domains pd ON (p.domainid = pd.id)
#	WHERE p.login = '%u' AND pd.name = '%d'
#		AND type &#38; 2 = 2 AND mail_forward != ''
#		AND (expdate = 0 OR expdate &gt; UNIX_TIMESTAMP())
#	UNION
#       SELECT CASE WHEN aa.mail_forward != '' THEN aa.mail_forward ELSE CONCAT(p.login, '@', pd.name) END
#	FROM aliases a
#	JOIN domains ad ON (a.domainid = ad.id)
#	JOIN aliasassignments aa ON (aa.aliasid = a.id)
#	LEFT JOIN passwd p ON (aa.accountid = p.id AND (expdate = 0 OR expdate &gt; UNIX_TIMESTAMP()))
#	LEFT JOIN domains pd ON (p.domainid = pd.id)
#	WHERE a.login = '%u' AND ad.name = '%d'
#		AND (aa.mail_forward != '' OR p.id IS NOT NULL)
# PostgreSQL	
query = SELECT mail_forward
	FROM passwd p
	JOIN domains pd ON (p.domainid = pd.id)
	WHERE p.login = '%u' AND pd.name = '%d'
		AND type &#38; 2 = 2 AND mail_forward != ''
		AND (expdate = 0 OR expdate &gt; EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0)))
	UNION
	SELECT CASE WHEN aa.mail_forward != '' THEN aa.mail_forward ELSE p.login || '@' || pd.name END
	FROM aliases a
	JOIN domains ad ON (a.domainid = ad.id)
	JOIN aliasassignments aa ON (aa.aliasid = a.id)
	LEFT JOIN passwd p ON (aa.accountid = p.id
		AND (expdate = 0 OR expdate &gt; EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0))))
	LEFT JOIN domains pd ON (p.domainid = pd.id)
	WHERE a.login = '%u' AND ad.name = '%d'
		AND (aa.mail_forward != '' OR p.id IS NOT NULL)

# recipient_bcc_maps.cf (Postfix):

user = lms
password = hasĹo
hosts = localhost
dbname = lms
# MySQL
#query = SELECT mail_bcc FROM passwd, domains 
#	WHERE domainid = domains.id
#	        AND login = '%u' AND domains.name = '%d'
#		AND type &#38; 2 = 2
#		AND mail_bcc != ''
#		AND (expdate = 0 OR expdate &gt; UNIX_TIMESTAMP())
# PostgreSQL
query = SELECT mail_bcc FROM passwd, domains 
	WHERE domainid = domains.id
	        AND login = '%u' AND domains.name = '%d'
		AND type &#38; 2 = 2
		AND mail_bcc != ''
		AND (expdate = 0 OR expdate &gt; EXTRACT(EPOCH FROM CURRENT_TIMESTAMP(0)))
					</PRE
></DIV
></P
><P
>NastÄpny przykĹad podesĹany przez bart'a przedstawia instalacjÄ i konfiguracjÄ
		serwera pure-ftpd w dystrybucji Gentoo z wykorzystaniem bazy danych MySQL.
		<DIV
CLASS="EXAMPLE"
><A
NAME="ACCOUNTS-E3"
></A
><P
><B
>Przyk&#322;ad 3-4. Konta. Konfiguracja pure-ftpd.</B
></P
><P
>No to zaczynamy od instalacji serwera pure-ftpd. Pod Gentoo wyglÄda to tak:
<PRE
CLASS="SCREEN"
>bart # emerge pure-ftpd -av
These are the packages that I would merge, in order:
Calculating dependencies ...done!
[ebuild   R   ] net-ftp/pure-ftpd-1.0.20-r1  -caps -ldap +mysql +pam -postgres +ssl +vchroot 459 kB
Total size of downloads: 459 kB</PRE
>
			Co do innych systemĂłw to kaĹźdy chyba wie jak siÄ instaluje pakiety w
			swoim systemie, a jeĹźeli nie to pozostaje kompilacja ze ĹşrĂłdeĹ.
			Po zainstalowaniu przechodzimy do stworzenia pliku, ktĂłry bÄdzie
			odpowiadaĹ za ĹÄczenie siÄ z bazÄ LMS'a.
			Tworzymy plik <TT
CLASS="FILENAME"
>/etc/pureftpd-mysql.conf</TT
>, ktĂłry to 
			powinien zawieraÄ minimum:
<PRE
CLASS="SCREEN"
>MYSQLServer     localhost (adres serwera bazy danych - domyĹlnie 'localhost')
MYSQLPort       3306 (port na ktĂłrym dziaĹa serwer MySql - domyĹlnie '3306')
MYSQLSocket     /var/run/mysqld/mysqld.sock (
MYSQLUser       lms (nazwa usera z dostÄpem do bazy)
MYSQLPassword   hasĹo (tutaj naleĹźy podaÄ hasĹo)
MYSQLDatabase   lms (nazwa bazy danych)
MYSQLCrypt      crypt (sposĂłb przechowywania haseĹ)
MYSQLGetPW      SELECT password FROM passwd WHERE login="\L" (pobieranie hasĹa dla usera)
MYSQLGetUID     SELECT uid FROM passwd WHERE login="\L" (pobieranie uid dla usera)
MYSQLGetGID     SELECT gid FROM passwd WHERE login="\L" (pobieranie gid dla usera)
MYSQLGetDir     SELECT home FROM passwd WHERE login="\L" (pobieranie nazwy katalogu domowego dla usera)
MySQLGetQTASZ   SELECT quota_ftp FROM passwd WHERE login="\L" (quota czyli pojemnoĹÄ konta w MB - podajÄc w lms-ui 10 oznacza to pojemnoĹÄ 10MB)</PRE
>
			Teraz pozostaje nam juĹź tylko konfiguracja serwera pure-ftpd. (w gentoo
			plik konfiguracyjny mieĹci siÄ w <TT
CLASS="FILENAME"
>/etc/conf.d/pure-ftpd</TT
>) 
			a wiÄc:
<PRE
CLASS="SCREEN"
>## Najpierw odkomentujmy tÄ liniÄ, poniewaĹź inaczej serwer nie bÄdzie chciaĹ wystartowaÄ
IS_CONFIGURED="yes"
## Tutaj podajemy adres naszego serwera i port na ktĂłrym ma nasĹuchiwaÄ
SERVER="-S www.nasza.domena.pl,21"
## OkreĹlamy iloĹÄ jednoczesnych poĹÄczeĹ do serwera oraz iloĹÄ poĹÄczeĹ z tego samego IP
## To juĹź chyba kaĹźdy wedĹug potrzeb
MAX_CONN="-c 50"
MAX_CONN_IP="-C 2"
## Startujemy daemona w tle
DAEMON="-B"
## Ustalamy procentowÄ zajÄtoĹÄ dysku/partycji kiedy serwer powinien przestaÄ zezwalaÄ na przyjmowanie danych
DISK_FULL="-k 90%"
## JeĹźeli serwer jest za NATem odkomentuj tÄ liniÄ
#USE_NAT="-N"
## Autoryzacja ma byÄ pobierana z bazy LMS'a - podajemy ĹcieĹźkÄ do stworzonego przez nas wczeĹniej pliku
AUTH="-l mysql:/etc/pureftpd-mysql.conf"
## PozostaĹe opcje w moim wypadku sÄ takie
MISC_OTHER="-A -x -j"</PRE
></P
></DIV
></P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="menu-documents.html"
ACCESSKEY="P"
>Poprzedni</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Spis tre&#347;ci</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="menu-messages.html"
ACCESSKEY="N"
>Nast&#281;pny</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Dokumenty</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user.html"
ACCESSKEY="U"
>Pocz&#261;tek rozdzia&#322;u</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>WiadomoĹci</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>