<!-- Start of DOCPART.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>LMS - LAN Management System</TITLE
></HEAD
><BODY
><FONT
color="red"
>LMS - LAN Management System</FONT
><CENTER
>    <FONT
color="red"
>2003-04-07</FONT
>
    <FONT
color="red"
>LMS - LAN Management System</FONT
>
    <FONT
color="red"
>$id$</FONT
>
    <P>              <B
>Marcin</B
>
        <FONT
color="red"
>"Lexx"</FONT
>
        <FONT
color="red"
>Król</FONT
>
      
              <B
>Krzysztof</B
>
        <FONT
color="red"
>"Hunter"</FONT
>
        <FONT
color="red"
>Drewicz</FONT
>
      
              <B
>£ukasz</B
>
        <FONT
color="red"
>"Baseciq"</FONT
>
        <FONT
color="red"
>Mozer</FONT
>
      
    
    <FONT
color="red"
>     <FONT
color="red"
>2003</FONT
>
     <FONT
color="red"
>LMS Developers</FONT
>
    </FONT
>
    <FONT
color="red"
><P>Niniejszy  program  jest  oprogramowaniem  wolnodostêpnym;  mo¿esz  go rozprowadzaæ dalej i/lub modyfikowaæ na warunkach Powszechnej Licencji Publicznej  GNU, wydanej przez Fundacjê Wolnodostêpnego Oprogramowania - wed³ug wersji 2-giej tej Licencji lub której¶ z pó¼niejszych wersji.
    <P>Niniejszy  program  rozpowszechniany  jest  z  nadziej±,  i¿ bêdzie on u¿yteczny  -  jednak  BEZ  JAKIEJKOLWIEK  GWARANCJI,  nawet  domy¶lnej gwarancji  PRZYDATNO¦CI  HANDLOWEJ  albo  PRZYDATNO¦CI  DO OKRE¦LONYCH ZASTOSOWAÑ.   W  celu  uzyskania  bli¿szych  informacji  -  Powszechna Licencja Publiczna GNU.
    <P>Z  pewno¶ci±  wraz  z  niniejszym  programem otrzyma³e¶ te¿ egzemplarz Powszechnej  Licencji  Publicznej  GNU;  je¶li  nie  -  napisz do Free Software  Foundation,  Inc.,  59  Temple Place - Suite 330, Boston, MA 02111-1307, USA. </FONT
>
  </CENTER
><HR
size="5"><H2
>Contents</H2
><ul
>  
  
  


    <LI>Chapter 1 - Na pocz±tek<UL
><LI>Czym jest LMS<LI>Co LMS mo¿e a czego nie<LI>Co wchodzi w sk³ad LMSa<LI>Instalacja<LI>Konfiguracja<LI>Bezpieczeñstwo</UL
>

  <LI>Chapter 2 - LMS UI (User Interface)<UL
><LI>Konfiguracja.</UL
>

    <LI>Chapter 3 - LMS-MGC<UL
></UL
>

    <LI>Chapter 4 - LMSd<UL
></UL
>

    <LI>Chapter 5 - Skrypty<UL
><LI>Instalacja<LI>lms-notify<LI>lms-cutof<LI>lms-eachmonth</UL
>

    <LI>Chapter 6 - FAQ<UL
></UL
>
<LI><A
href="DOCPART-INDEX.html#INDEXTOP"
>Index</A
></ul
></BODY
></HTML
><!-- End of DOCPART.html --><!-- Start of DOCPART-.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>Przedmowa</TITLE
></HEAD
><BODY
><FONT
color="red"
>Przedmowa</FONT
>
<P>Wersja parsowana z DocBook'a do htmla przy pomocy jade i pierwszego lepszego arkusza stylów, wiêc nie narzekaæ na brzydkeigo HTMLa. Polskie krzaczki s± w ISO. £adnego HTMLa mo¿na siê spodziewaæ jak wyjdzie wersja 1.0 LMSa (czyli w raczej dalszej nieokre¶lonej przysz³o¶ci ;-) )
<P>Sugestie s³aæ na lexx maupa polarnet kropka org.</BODY
></HTML
><!-- End of DOCPART-.html --><!-- Start of DOCPART-1.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>Na pocz±tek</TITLE
></HEAD
><BODY
>    <H1
>Chapter 1. Na pocz±tek</H1
>
          <H2
>Czym jest LMS</H2
>
	<P>"LMS" jest skrótem od "LAN Management System". Jest to zestaw aplikacji w PHP i Perlu, u³atwiaj±cych zarz±dzanie sieciami osiedlowymi (popularnie zwanymi Amatorskimi Sieciami Komputerowymi), opartych o bazê danych MySQL (docelowo, do wyboru, MySQL lub PostgreSQL). G³ówne za³o¿enia to uzyskanie jako¶ci us³ug oraz obs³ugi u¿ytkowników na poziomie providera z prawdziwego zdarzenia. Najbardziej podstawowe cechy LMS to: 
	<P><UL
>	  <LI>	     <P>baza danych u¿ytkowników (imiê, nazwisko, adres, numer telefonu, uwagi);
	  <P>
	  <LI>	     <P>baza danych komputerów (adres IP, adres MAC);
	  <P>
	  <LI>	     <P>prowadzenie prostego rachunku operacji finansowych oraz stanu funduszów sieci;
	  <P>
	  <LI>	     <P>ró¿ne taryfy abonamentowe;
	  <P>
	  <LI>	     <P>wysy³anie poczt± elektroniczn± upomnieñ do u¿ytkowników;
	  <P>
	  <LI>	     <P>automatyczne naliczanie op³at miesiêcznych;
	  <P>
	  <LI>	     <P>generowanie praktycznie jakiegkolwiek konfiga na podstawie danych o komputerach w bazie (przyk³adowe configi obejmuj± rc.masq na iptables, dhcpd.conf, oidentd_masq.conf, /etc/ethers, dns prosty i odwrotny);
	  <P>
	</UL
>
	<P>Aktualne prace zmierzaj± tak¿e w kierunku rozbudowy LMS'a o prostego CMS'a (Content Managment System) a tak¿e inne funkcje.
	<P><I
>UWAGA!</I
> Jako ¿e developerzy LMS'a s± band± niezdecydowanych i wiecznie marudz±cych person, prawdopodobnie prêdzej siê doczekacie koñca recesji ni¿ wersji stabilnej LMS'a. Do tego czasu macie dwie mo¿liwo¶ci: albo u¿ywaæ wersji 1.0pre5 która chodzi dobrze, albo mêczyæ siê z wersj± CVS i marudziæ na li¶cie mailingowej.
	<P>Rozbudowa o dodatkowe funkcje bêdzie zale¿eæ od potrzeb i sugestii u¿ytkowników. Projekt jest w powijakach i nie wiadomo do koñca, w któr± stronê bêdzie ewoluowa³. Ca³o¶æ zosta³a wymy¶lona w ramach administracji <A
href="http://www.netx.waw.pl/"
>ASK NetX</A
> i tam jest nieustannie rozwijana i poddawana testom ;)
	<P>Ca³o¶æ kodu publikowana jest na licencji GNU GPL v2.
    
          <H2
>Co LMS mo¿e a czego nie</H2
>
	<P>LMS Nie zast±pi Ci umiejêtno¶ci jakie powinien mieæ administrator. Je¶li nie potrafisz wykonaæ tak prostych czynno¶æ jak instalacja czy konfiguracja, prawdopodobnie nie bêdziesz umia³ dostroiæ LMS do swojego systemu. Tak wiêc bez znajomo¶ci systemów U*IX siê nie obejdzie.
    
          <H2
>Co wchodzi w sk³ad LMSa</H2
>
	<P>LMS sk³ada siê z kilku modu³ów, podstawowym modu³em jest <I
>LMS-UI</I
> (User Interface). Jest on w ca³o¶ci napisany w PHP i do pracy wymaga bazy danych (w³a¶ciwie to ka¿dy modu³ wymaga bazy danych). To w³a¶nie w LMS-UI wykonujemy wszystkie czynno¶ci, reszta modu³ów ma tylko za zadanie zautomatyzowaæ pracê LMSa.
	<P>LMS to tak¿e zestaw skryptów w jêzyku PERL, i to w³a¶nie te skrypty wymagaj± aby¶ posiada³ interpreter tego jêzyka. Je¶li bêdziesz chcia³ u¿ywaæ tych skryptów, musisz mieæ PERLa. Skrypty pozwalaj± m.in. na comiesiêczne naliczanie op³at abonamentowych b±d¼ wysy³anie upomnieñ. Jest jeszcze LMS-MGC, który te¿ jest skryptem ale na tyle uniwersalnym ¿e potrafi wygenerowaæ praktycznie dowolny plik konfiguracyjny, i zrestartowaæ us³ugê.
	<P>Jest jeszcze LMSd (LMS Daemon), napisany w jêzyku C. Jest on przeznaczony (a w³a¶ciwie jego wtyczki) do generowania plików konfiguracyjnych i restartowania us³ug. Odpowiada on za to, aby to co zosta³o zmienione w LMS-UI zosta³o zmienione tak¿e w rzeczywisto¶ci.
    
          <H2
>Instalacja</H2
>
		  <H3
>Wymagania</H3
>
	    	      <H4
>Serwer WWW</H4
>
	      <P>Poniewa¿ LMS-UI jest napisane w PHP, potrzebujemy serwer WWW który bêdzie ten jêzyk obs³ugiwa³. Preferowanym serwerem jest Apache <A
href="http://www.apache.org"
>www.apache.org</A
>
	    
	    	      <H4
>Interpreter PHP</H4
>
	      <P>Interpreter powinien byæ w wersji 4.2.x lub nowszej, chocia¿ dzia³a te¿ poprawnie na 4.1.x (ale poniewa¿ devepolerzy pracuj± na 4.2.3, nie mo¿na zagwarantowaæ poprawnej pracy na starszych wersjach. PHP mo¿emy sci±gn±æ ze strony <A
href="http://www.php.net"
>www.php.net</A
>
	    
	    	      <H4
>Serwer baz danych</H4
>
	      <P>Preferowany to MySQL. 3.23.53 i nowszy, starszy mo¿e te¿ dzia³aæ, je¶li nie to daj nam o tym znaæ ;-)
	      <P>LMS-UI oraz LMS-MGC <I
>mo¿e</I
> tak¿e dzia³aæ z postgresql, jednak narazie nikomu do tej pory nie chce siê przetestowaæ LMSa przy wspó³pracy z tym serwerem, a tak¿e zrobiæ zrzut baz.
	    
	                 <H4
>Biblioteki: Smarty i ADOdb</H4
>
             <P>LMS-UI do pracy wymaga jeszcze bibliotek Smarty (<A
href="http://smarty.php.net"
>http://smarty.php.net</A
>) w wersji 2.5.0 lub wy¿szej oraz ADOdb (<A
href="http://php.weblogs.com/ADOdb"
>http://php.weblogs.com/ADOdb</A
>) w wersji 3.2.0 lub wy¿szej.
            
                        <H4
>Perl</H4
>
	  <P>O ile dla LMS-UI wystarczy to co powy¿ej, to ¿eby mieæ dzia³aj±cy LMS-MGC, lub resztê skryptów potrzebujemy tak¿e perla i modu³y do niego czyli:
	  <P><UL
>	    <LI>	       <P>perl w³a¶ciwy i jego podstawowe modu³y (POSIX, GetOpt::Long);
	    <P>
	    <LI>	       <P>Net::SMTP;
	    <P>
	    <LI>	       <P>Config::IniFiles;
	    <P>
	    <LI>	       <P>DBI;
	    <P>
	    <LI>	       <P>DBD-mysql (Je¶li masz zamiar u¿ywaæ mysql'a);
	    <P>
	    <LI>	       <P>DBD-pg (Je¶li masz zamiar u¿ywaæ postgres'a);
	    <P>
	  </UL
>
	  
	  <P>A je¶li chcesz uruchomiæ LMSd potrzebujesz dzia³aj±cy kompilator jêzyka C.
	
		  <H3
>Sci±gamy LMSa</H3
>
	  <P><I
>Nota redaktorska:</I
> Opis sci±gania wersji CVSowej przy wydaniu stabilnym jest IMHO bezsensowny, ale teraz niech zostanie.
	  <P>LMSa mo¿emy sci±gn±æ ze strony domowej projektu (<A
href="http://lms.rulez.pl"
>lms.rulez.pl</A
>), lub bezpo¶rednio z CVS:
	  <P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>wget http://cvs.rulez.pl/viewcvs.cgi/lms/lms.tar.gz?tarball=1</FONT
></PRE
></TD
></TR
></TABLE
>
 	  <P>je¶li chcemy sci±gn±æ przez interfejs webowy lub je¶li mamy CVS mo¿emy wykonaæ komendê:
	  
	  <P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>cvs -d :pserver:cvs@cvs.rulez.pl:/home/cvsroot get lms</FONT
></PRE
></TD
></TR
></TABLE
>
	
		  <H3
>Umieszczamy LMS na dysku</H3
>
	  <P>Je¶li ¶ci±gneli¶my archwiwum to je teraz rozpakowujemy, a nastêpnie przenosimy pliki z lms-ui do katalogu osi±galnego z poziomy przegl±darki www (np. <TT
>/var/www/lms</TT
>). Pliki z konfiguracj± umieszczamy w katalogu <TT
>/etc/lms</TT
>).
	
		  <H3
>Biblioteki</H3
>
	  <P>Je¶li jeste¶my w katalogu z LMSem, to musimy ¶ci±gn±c biblioteki. Najpierw ¶ci±gamy Smarty:
	  <P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>cd /var/www/lms</FONT
>
<FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>cd lib</FONT
>	
<FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>wget http://smarty.php.net/distributions/Smarty-2.5.0.tar.gz</FONT
>
<FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>tar -xzf Smarty-2.5.0.tar.gz</FONT
>
<FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>mv Smarty-2.5.0/libs Smarty</FONT
></PRE
></TD
></TR
></TABLE
>
	  <P>Teraz ADOdb:
	  <P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>wget http://phplens.com/lens/dl/adodb320.tgz</FONT
>
<FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>tar -xzf adodb320.tgz</FONT
></PRE
></TD
></TR
></TABLE
>
          
        
    
          <H2
>Konfiguracja</H2
>
      <P>Po ¶ci±gniêciu i zainstalowaniu LMSa musimy jeszcze ustawiæ dwie rzeczy. Bazê danych, oraz podstawowe opcje w <TT
>lms.ini</TT
>
		  <H3
>MySQL</H3
>
	  <P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><FONT
color="red"
>lexx@troll:~$</FONT
> <FONT
color="red"
>mysql -u [U¿ytkownik z pe³nym dostêpem do bazy] -p</FONT
>
<FONT
color="red"
>Enter password:</FONT
> <FONT
color="red"
>[Has³o]</FONT
>
<FONT
color="red"
>mysql&#62;</FONT
> <FONT
color="red"
>create database lms;</FONT
>
<FONT
color="red"
>mysql&#62;</FONT
> <FONT
color="red"
>grant usage on lms.* to lms@localhost;</FONT
>
<FONT
color="red"
>mysql&#62;</FONT
> <FONT
color="red"
>grant select,insert,update,delete,create on lms.* to lms@localhost identified by '[Tajne Has³o]';</FONT
>
<FONT
color="red"
>mysql&#62;</FONT
> <FONT
color="red"
>flush privileges;</FONT
>
<FONT
color="red"
>mysql&#62;</FONT
> <FONT
color="red"
>use lms;</FONT
>
<FONT
color="red"
>mysql&#62;</FONT
> <FONT
color="red"
>source doc/lms.mysql;</FONT
></PRE
></TD
></TR
></TABLE
>
	
		 <H3
><TT
>lms.ini</TT
></H3
>
	 <P>Sekcja [database] - ustawienia bazy danych
         <P><UL
>          <LI>	   <P>type
	   <P>Typ bazy danych. Aktualnie w 100% supportowany jest 'mysql', ale jak narazie nie widaæ wiêkszych problemów z 'postgres'. Domy¶lnie: mysql
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>type = mysql</FONT
>
	  <P>
          <LI>	   <P>host
	   <P>Host gdzie zainstalowana jest baza danych. Najczê¶ciej, localhost, ale mo¿na tutaj wstawiæ cokolwiek (ipek, domena, path to socketa w formacie 'localhost:/path/to/socket'). Domy¶lnie: localhost
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>host = localhost</FONT
>
	  <P>
          <LI>	   <P>user
	   <P>U¿ytkownik do bazy danych. W wielu wypadkach (je¿eli postêpowa³e¶ zgodnie ze wskazówkami w dokumentacji) bêdzie to 'lms'. Je¿eli chcesz u¿ywaæ konta uprzywilejowanego, prawdopodobnie wpiszesz 'root' (MySQL na wiêkszo¶ci *nixów), 'mysql' (na PLD) b±d¼ 'postgres' (PostgreSQL). Domy¶lnie: root
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>user = mysql</FONT
>
	  <P>
          <LI>	   <P>password
	   <P>Has³o do bazy danych. Domy¶lnie puste.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>password = password</FONT
>
	  <P>
          <LI>	   <P>database
	   <P>Nazwa bazy danych, domy¶lnie lms.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>database = lms</FONT
>
	  <P>
         </UL
>
         <P>Sekcja [directories] - ustawienia katalogów
         <P><UL
>          <LI>	   <P>sys_dir
	   <P>Katalog systemowy. Jest to miejsce gdzie jest ca³a zawarto¶æ UI LMS'a, czyli index.php, grafiki, templejty i reszta. Domy¶lnie, index.php stara siê sam odnale¼æ w filesystemie u¿ywaj±c getcwd(), ale lepiej by by³o gdyby mu powiedzieæ gdzie jest:
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>sys_dir = /var/www/htdocs/lms/</FONT
>
	  <P>
          <LI>	   <P>modules_dir
	   <P>Katalog z "modu³ami" LMS'a - kawa³kami kodu które szumnie kto¶ (czyli Baseciq) nazwa³ modu³ami. Domy¶lnie jest to podkatalog modules w sys_dir.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>modules_dir = /usr/share/lms/modules/</FONT
>
	  <P>
          <LI>	   <P>lib_dir
	   <P>Katalog z "bibliotekami" LMS'a. Czyli zawarto¶æ katalogu lib. Domy¶lnie to podkatalog lib w sys_dir.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>lib_dir = /usr/share/lms/lib/</FONT
>
	  <P>
          <LI>	   <P>backup_dir
	   <P>Katalog z backupami SQL'owymi - miejsce gdzie LMS zapisuje dumpy z bazy. Domy¶lnie jest to podkatalog 'backups'. Naprawdê dobrze by by³o go przenie¶æ poza miejsce osi±galne przez przegl±darkê.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>backup_dir = /var/backup/lms/</FONT
>
	  <P>
          <LI>	   <P>smarty_dir
	   <P>Katalog z bibliotek± Smarty - domy¶lnie podkatalog Smarty w lib_dir.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>smarty_dir = /usr/lib/php/Smarty</FONT
>
	  <P>
          <LI>	   <P>smarty_compile_dir
	   <P>Katalog kompilacji Smartyego. Miejsce gdzie Smarty kompiluje nasze templejty. Domy¶lnie to templates_c w katalogu sysdir.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>smarty_compile_dir = /var/smarty/compile/lms</FONT
>
	  <P>
          <LI>	   <P>smarty_templates_dir
	   <P>Katalog z templejtami którymi karmimy Smartiego. Domy¶lnie to podkatalog templates z sys_dir'a.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>smarty_templates_dir = /usr/share/lms/templates</FONT
>
	  <P>
          <LI>	   <P>adodb_dir
	   <P>Katalog z ADOdb - czyli tym co posredniczy pomiêdzy baz± a UI. Domy¶lnie podkatalog adodb w lib_dir.
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>adodb_dir = /usr/lib/php/adodb</FONT
>
	  <P>
         </UL
>
    
          <H2
>Bezpieczeñstwo</H2
>
        <P>Dostêp do lms-ui powinien byæ mo¿liwy tylko po SSL (co zreszt± mo¿na wymusiæ flag± <FONT
color="red"
>force_ssl</FONT
> w <TT
>lms.ini</TT
>), a katalog z kopiami zapasowymi baz danych powinien zostaæ przeniesiony do katalogu gdzie serwer WWW nie ma dostêpu (np. <TT
>/var/backup/lms</TT
>), bo inaczej do plików z kopiami zapasowymi bazy bêdzie siê mo¿na dostaæ z poziomu www bez autoryzacji.
    
  </BODY
></HTML
><!-- End of DOCPART-1.html --><!-- Start of DOCPART-2.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>LMS UI (User Interface)</TITLE
></HEAD
><BODY
> <H1
>Chapter 2. LMS UI (User Interface)</H1
>
 <P>Tutaj bêdzie opis LMS-UI
   <H2
>Konfiguracja.</H2
>
  <P>Konfiguracjê dla lms-ui mo¿emy ustaliæ w pliku <TT
>lms.ini</TT
> w sekcji <I
>[phpui]</I
>. Mo¿emy tam ustawiæ nastêpuj±ce parametry:
  <P><UL
>   <LI>    <P>allow_from  (opcjonalny)
    <P>Lista sieci i adresów IP które maj± dostêp do LMS. Je¿eli puste, ka¿dy adres IP ma dostêp do LMS'a, je¿eli wpiszemy tutaj listê adresów b±d¼ klas adresowych, LMS odrzuci b³êdem HTTP 403 ka¿dego niechcianego u¿ytkownika.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>allow_from = 192.168.0.0/16, 213.25.209.224/27, 213.241.77.29</FONT
>
   <P>
   <LI>    <P>timeout
    <P>Timeout sesji www. Po tym czasie (w sekudnach) u¿ytkownik zostanie wylogowany je¿eli nie podejmie ¿adnej akcji. Domy¶lnie 600 sekund.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>timeout = 900</FONT
>
    <P><B
>NOTE:</B
><BLOCKQUOTE
><P>Uwaga! Nie ma mo¿liwo¶ci ustawienia braku timeoutu. Je¿eli ustawisz t± warto¶æ na zero, nie bêdziesz móg³ korzystaæ z LMS!</BLOCKQUOTE
>
   <P>
   <LI>    <P>userlist_pagelimit
    <P>Limit wy¶wietlanych pozycji na stronie w li¶cie u¿ytkowników. Domy¶lnie brak limitu.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>userlist_pagelimit	= 10</FONT
>
   <P>
   <LI>    <P>nodelist_pagelimit
    <P>Limit wy¶wietlanych pozycji na stronie w li¶cie komputerów. Domy¶lnie brak limitu.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>nodelist_pagelimit	= 10</FONT
>
   <P>
   <LI>    <P>reload_type
    <P>Typ reloadu. Dozwolone warto¶ci:
    <P>exec - wywo³ywanie jakiej¶ komendy (najczê¶ciej co¶ przez sudo, jaki¶ skrypt lub co¶, konfigurowalny poni¿ej)
    <P>sql  - zrobienie wpisów w SQL'u (te¿ mo¿na ustawiæ konkretne query SQL'a)
    <P>Domy¶lna warto¶æ to 'sql'.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>reload_type = exec</FONT
>
   <P>
   <LI>    <P>reload_execcmd
    <P>Komenda do wykonania podczas reloadu je¿eli reload_type jest ustawione na 'exec'. Domy¶lnie /bin/true. String ten puszczany do komendy system() wiêc pronuje rozwagê i pomy¶lenie co siê robi i jak :) Generalnie ¶redniki powinny byæ parsowane przez bash'a, ale z paru wzglêdów LMS sam dzieli poni¿szy ci±g pod wzglêdem ¶redników i wykonuje komendy pojedyñczo.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>reload_execcmd = "sudo /usr/bin/reload_lms.sh"</FONT
>
   <P>
   <LI>    <P>reload_sqlquery
    <P>Query SQL'a. Generalnie, LMS przy nie ustawionym swoim w³asnym QUERY robi dziwne rzeczy które ja ju¿ wymy¶li³em. Chwilowo pewnie wogóle nie kompatybilne z mteg'owym demonikiem, ale pracujemy nad uzgodnieniem formatu. Jak kto¶ bardzo chce, to mo¿na u¿yæ '%TIME%' jako podstawki pod aktualny timestamp unixowy. UWAGA! Znak ¶rednika (czyli ;) jest traktowany jako separator kwerend. Tj. oddzielaj±c znakiem ¶rednika mo¿esz wpisaæ kilka komend MySQL'a.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>reload_sqlquery = "INSERT INTO reload VALUES ('1','%TIME%')"</FONT
>
   <P>
   <LI>    <P>force_ssl
    <P>Wymuszanie SSL'a. Ustawinie tej zmiennej na 1 spowoduje ¿e LMS bêdzie wymusza³ po³±czenie SSL powoduj±c redirect do 'https://'.$_SERVER[HTTP_HOST].$_SERVER[REQUEST_URI] przy ka¿dej próbie dostêpu bez SSL. Domy¶lnie wy³±czone.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>force_ssl = 0</FONT
>
   <P>
   <LI>    <P>allow_mac_sharing
    <P>Przyzwolenie na dodawanie rekordów komputerów z adresami MAC ju¿ istniej±cymi (nie sprawdza czy jaki¶ inny komputer posiada taki adres MAC). Domy¶lnie wy³±czone
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>allow_mac_sharing	= 1</FONT
>
   <P>
   <LI>    <P>smarty_debug
    <P>W³±czenie konsoli debugowej Smartyego, przydatne do ¶ledzenia warto¶ci przekazywanych z PHP do Smartyego. Domy¶lnie wy³±czone.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>smarty_debug = 1</FONT
>
   <P>
   <LI>    <P>adodb_debug
    <P>W³±czenie debugu ADOdb, przydatne w ¶ledzeniu b³êdów w kwerendach SQL. Domy¶lnie wy³±czone.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>adodb_debug = 1</FONT
>
   <P>
   <LI>    <P>adodb_debug_log
    <P>Plik z logiem debugu ADOdb. Je¿eli w³±czymy adodb_debug i podamy tutaj nazwê pliku (do którego bêdzie móg³ zapisaæ serwer www) ca³y debug bêdzie szed³ do pliku, a na interface jedynie krytyczne b³êdy SQL'a. Domy¶lnie puste.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>adodb_debug_log	= /var/log/debug/lms-adodb.log</FONT
>
   <P>
   <LI>    <P>debug_mail
    <P>Adres e-mail do debugowania - pod ten email bêd± sz³y maile wysy³ane z sekcji 'mailing' LMS'a, zamiast do w³a¶ciwych u¿ytkowników.
    <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>debug_mail = root@localhost</FONT
>
   <P>
  </UL
>
 </BODY
></HTML
><!-- End of DOCPART-2.html --><!-- Start of DOCPART-3.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>LMS-MGC</TITLE
></HEAD
><BODY
>    <H1
>Chapter 3. LMS-MGC</H1
>
   	<P>Nie u¿ywam LMS-MGC, mo¿e Ty napiszesz ten kawa³ek dokumentacji?
  </BODY
></HTML
><!-- End of DOCPART-3.html --><!-- Start of DOCPART-4.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>LMSd</TITLE
></HEAD
><BODY
>    <H1
>Chapter 4. LMSd</H1
>
	<P>Chwilowo bez opiekuna. Mo¿e ty chcesz siê zaopiekowaæ? :-)
  </BODY
></HTML
><!-- End of DOCPART-4.html --><!-- Start of DOCPART-5.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>Skrypty</TITLE
></HEAD
><BODY
>    <H1
>Chapter 5. Skrypty</H1
>
               <H2
>Instalacja</H2
>
        <P>Je¶li chcemy ustawiæ konfiguracjê którego¶ ze skryptów, robimy to w odpowiedniej sekcji <TT
>lms.ini</TT
>. Same skrypty przenosimy do katalogu <TT
>/usr/sbin</TT
>. Po przeniesieniu musimy je jeszcze dopisaæ do crontaba tak, aby by³y uruchamiane automatycznie w³a¶nie wtedy kiedy tego chcemy.
        <P>Pamiêtaj ¿e przewa¿nie bêdziesz chcia³ aby te skrypty by³y uruchamiane tylko raz w miesi±cu (no chyba ¿e chcesz naliczaæ u¿ytkownikom op³aty kilka razy w miesi±cu.)
        <P>Przyk³adowo, je¶li chcieliby¶my aby op³ata abonamentowa by³a naliczana uzytkownikom 5 dnia ka¿dego miesi±ca o godzinie 1:20, przyk³adowy wpis w <TT
>crontab</TT
> powinien wygl±daæ tak:
        <P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><P>20 1 5 * *       /usr/sbin/lms-eachmonth</PRE
></TD
></TR
></TABLE
>
        <P>Po wiêcej informacji mo¿esz siêgn±æ do <FONT
color="red"
>man crontab</FONT
>
       
       	<H2
>lms-notify</H2
>
	 	  <H3
>Szablony</H3
>
          
	  <P>lms-notify jest dobrym sposobem przypominania ludziom o tym ¿e do pracy sieci i ³±cz konieczne s± ich pieni±¿ki. Pozwala on na napisanie kilku[-nastu] plików tekstowych [w iso-8859-2] i traktowania ich jako szablonów do mailingu.
	  <P>W plikach mo¿na u¿ywaæ nastêpuj±cych s³ów:
	  <P><UL
>	    <LI>	       <P>%date-m
	    <P>
	    <LI>	       <P>%date-y
	    <P>
	    <LI>	       <P>%saldo
	    <P>
	    <LI>	       <P>%abonament
	    <P>
	    <LI>	       <P>%b
	    <P>
	    <LI>	       <P>%B
	    <P>
	    <LI>	       <P>%last_10_in_a_table
	    <P>
	  </UL
>
	  <P>które rozwijane s± do nastêpuj±cych danych:
	  <P><I
>%date-m</I
> zostanie zast±pione aktualnym miesi±cem, licz±c od 1 poprzedzone 0, np. 02
	  <P><I
>%date-y</I
> zostanie zast±pione aktualnym rokiem, np 2003
	  <P><I
>%saldo</I
> zostanie zast±pione aktualnym saldem u¿ytkownika, np. 535
	  <P><I
>%abonament</I
> zostanie zast±pione kwot± abonamentu jaka jest do danego u¿ytkownika przypisana, np. 107
	  <P><I
>%b</I
> saldo z zanegowanym znakiem, np. 107
	  <P><I
>%B</I
> saldo z prawdziwym znakiem, np. -107
	  <P><I
>%last_10_in_a_table</I
> wyci±g ostatnich 10 operacji kasowych na koncie u¿ytkownika, np:
	  <FONT
color="red"
>	   <FONT
color="red"
>Przyk³adowy wyci±g 10 ostatnich operacji kasowych</FONT
>
<P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><P>Data       | Opis                                                 | Warto¶æ
-----------+------------------------------------------------------+---------
2003-02-02 | Abonament za miesi±c 2003/02                         |  107.00
2003-02-01 | Wp³ata                                               | -107.00
2003-02-01 | Abonament za miesi±c 2003/02                         |  107.00
2003-02-01 | Wp³ata                                               | -321.00
2003-01-31 | Abonament za miesi±c 2003/01                         |  107.00
2003-01-31 | Abonament za miesi±c 2003/01                         |  107.00
2003-01-31 | Abonament za miesi±c 2003/01                         |  107.00
-----------+------------------------------------------------------+---------</PRE
></TD
></TR
></TABLE
></FONT
>
	  <FONT
color="red"
>           <FONT
color="red"
>Przyk³ad szablonu:</FONT
>
<P><TABLE
border="0"
bgcolor="#E0E0E0"
width="100%"
><TR
><TD
><PRE
><P>UWAGA! Ta wiadomo¶æ zosta³a wygenerowana automatycznie.

Uprzejmie informujemy i¿ na Pani/Pana koncie figuruje zaleg³o¶æ w op³atach za
internet w wysoko¶ci %B z³.

Je¿eli porozumieli siê ju¿ Pañstwo z administratorami w kwestii op³aty za
bierz±cy miesi±c czyli %date-m %date-y roku, prosimy o
zignorowanie tej wiadomo¶ci.

W wypadku gdy uwa¿aj± Pañstwo i¿ zaleg³o¶æ ta jest nieporozumieniem prosimy o
jak najszybszy kontakt.

Wszelkie informacje na temat Pañstwa rozliczeñ mog± Pañstwo znale¼æ pod
adresem http://www.naszasiec.pl/mojekonto/

Je¿eli chcieliby Pañstwo uregulowaæ zaleg³o¶ci prosimy o kontakt:

Dzia³ Rozliczeñ ASK NaszaSiec

Gerwazy Regu³a
telefon: 0-509031337
email: gerwazy@staff.naszasiec.pl

Gwidon Mniejwa¿ny
telefon: 0-606666666
email: gwidonm@naszasiec.pl

ps. za³±czamy ostatnie 10 operacji jakie zosta³o zarejestrowane przez nasz
system bilingowy na Pañstwa koncie:

kwota operacji | typ operacji | data

%last_10_in_a_table

--
Amatorska Sieæ Komputerowa NaszaSiec
http://www.naszasiec.pl/</PRE
></TD
></TR
></TABLE
></FONT
>
          
	  	  <H3
>Konfiguracja</H3
>
           
           <P>Konfiguracjê dla lms-notify mo¿emy ustaliæ w pliku <TT
>lms.ini</TT
> w sekcji <I
>[notify]</I
>. Mo¿emy tam ustawiæ nastêpuj±ce parametry:
	   <P><UL
>            <LI>	     <P>limit (opcjonalny)
	     <P>Pozwala na ustalenie limitu bilansu poni¿ej którego do u¿ytkownika zostanie wys³any email z upomnieniem. Domy¶lnie limit = 0
	     <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>limit = -20</FONT
>
	    <P>
            <LI>	     <P>mailsubject (wymagany)
	     <P>Pozwala na ustalenie tematu emaila wysy³anego do u¿ytkownika. Mo¿na u¿ywaæ podstawieñ znanych z szablonów (%B, %b, %date-y, %date-m, %last_10_in_a_table). Domy¶lnie nieustawione.
	     <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>mailsubject = Informacje o zaleg³o¶ciach w op³atach za internet</FONT
>
	    <P>
	    <LI>	     <P>mailtemplate (wymagany)
	     <P>Pozwala na wskazanie szablonu wiadomo¶ci która zostanie wys³ana do u¿ytkownika. Wiêcej o szablonach tutaj. Domy¶lnie nieustawione
	     <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>mailtemplate = /etc/lms/notifytemplate.txt</FONT
>
            <P>
            <LI>             <P>mailfrom
             <P>Adres e-mail z którego zostanie wys³any e-mail. Proszê pamiêtaæ, ¿e na niektórych MTA (np. exim) konto to musi istnieæ w systemie. Domy¶lnie nieustawione
             <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>mailfrom	= staff@domain.pl</FONT
>
            <P>
            <LI>             <P>mailfname
             <P>Nazwa nadawcy maila
             <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>mailfname	= Administratorzy</FONT
>
            <P>
            <LI>             <P>smtp_server
             <P>Serwer SMTP przez który ma zostaæ wys³ana wiadomo¶æ. Domy¶lnie: 127.0.0.1
             <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>smtp_server = smtp.mydomain.pl</FONT
>
            <P>
            <LI>             <P>debug_email (opcjonalny)
             <P>Adres email do debugowania. Gdy ustawiony, ca³a poczta zostaje wys³ana na dany email zamiast do u¿ytkowników. Przydatne do debugowania i sprawdzania czy wszystko dzia³a OK. Domy¶lnie nieustawiony.
             <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>lexx@domain.pl</FONT
>
            <P>
          </UL
>
          
	
		 <H2
>lms-cutof</H2
>
	 <P>Skrypt pozwala na od³±czenie (a raczej zmianê w bazie danych stanu komputerów na wy³±czony) u¿ytkowników których bilans jest poni¿ej zadanej warto¶ci. W³a¶ciwe od³±czanie powinno byæ realizowane przez LMSd lub LMS-MGC.
         <P>Konfiguracjê dla lms-cutof mo¿emy ustaliæ w pliku <TT
>lms.ini</TT
> w sekcji <I
>[cutof]</I
>. Mo¿emy tam ustawiæ nastêpuj±ce parametry:
	 <P><UL
>          <LI>	   <P>limit (opcjonalny)
	   <P>Pozwala na ustalenie limitu bilansu poni¿ej którego do bazy danych zostanie zapisany stan od³±czony. Domy¶lnie limit = 0
	   <FONT
color="red"
><FONT
color="red"
>Przyk³ad:</FONT
><P>limit = -20</FONT
>
	  <P>
	 </UL
>
	
		 <H2
>lms-eachmonth</H2
>
	 <P>Skrypt po uruchomieniu nalicza u¿ytkownikom op³atê abonamentow±. Aby dzia³a³ poprawnie powinien byæ uruchamiany tylko raz w miesi±cu (o ile u¿ytkownicy wnosz± op³aty co miesi±c). Skrypt ten nie posiada ¿adnych opcji konfiguracyjnych.
        
  </BODY
></HTML
><!-- End of DOCPART-5.html --><!-- Start of DOCPART-6.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>FAQ</TITLE
></HEAD
><BODY
>    <H1
>Chapter 6. FAQ</H1
>
      <P>Jest jakie¶ FAQ?
  </BODY
></HTML
><!-- End of DOCPART-6.html --><!-- Start of DOCPART-INDEX.html --><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML
><HEAD
><TITLE
>LMS - LAN Management System</TITLE
></HEAD
><BODY
><A
name="INDEXTOP"
></A
><H1
>Index</H1
><UL
></UL
></BODY
></HTML
><!-- End of DOCPART-INDEX.html -->