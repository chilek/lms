{include file="header.html"}
<!--// $Id$ //-->
<h1>{$layout.pagetitle}</h1>
<table width="100%" cellpadding="3">
	<tr class="DARK">
		<td width="1%" class="fleftu" nowrap="nowrap">
			<a href="?m=messagelist&o=cdate{if $listdata.direction eq "asc" && $listdata.order eq "cdate"},desc{/if}">{trans("Date:")}</a> {if $listdata.order eq "cdate"}<img src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</td>
		<td width="1%" class="fbt" nowrap="nowrap">
		</td>
		<td width="96%" class="fbt" nowrap="nowrap">
			<a href="?m=messagelist&o=subject{if $listdata.direction eq "asc" && $listdata.order eq "number"},desc{/if}">{trans("Subject:")}</a> {if $listdata.order eq "subject"}<img src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</td>
		<td width="1%" class="fbt" nowrap="nowrap">
			<a href="?m=messagelist&o=cnt{if $listdata.direction eq "asc" && $listdata.order eq "cnt"},desc{/if}">{trans("Recipients:")}</a> {if $listdata.order eq "cnt"}<img src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</td>
		<td width="1%" class="frightu" nowrap="nowrap">
			<strong>{t a=$listdata.total}Total: $a{/t}</strong>&nbsp;
		</td>
	</tr>
	<tr class="DARK">
		<td class="fall" colspan="5" nowrap="nowrap">
			<form method="POST" name="page" action="?m=messagelist">
			<input type="submit" class="hiddenbtn">
			<strong>{trans("Filter:")} </strong> 
			<input type="text" name="search" value="{$listdata.search}" {tip text="Enter value of searching data and select category"}>&nbsp;
			<select size="1" name="cat">
				<option value=""{if $listdata.cat eq ""} selected="selected"{/if}>{trans("- select filter category -")}</option>
				<option value="subject"{if $listdata.cat eq "subject"} selected="selected"{/if}>{trans("subject")}</option>
				<option value="name"{if $listdata.cat eq "name"} selected="selected"{/if}>{trans("customer name")}</option>
				<option value="customerid"{if $listdata.cat eq "customerid"} selected="selected"{/if}>{trans("customer ID")}</option>
				<option value="username"{if $listdata.cat eq "username"} selected="selected"{/if}>{trans("user name")}</option>
				<option value="userid"{if $listdata.cat eq "userid"} selected="selected"{/if}>{trans("user ID")}</option>
				<option value="destination"{if $listdata.cat eq "destination"} selected="selected"{/if}>{trans("destination number/email")}</option>
			</select>&nbsp;
			{trans("Type:")}
			<select size="1" name="type">
				<option value="0"{if !$listdata.type} selected="selected"{/if}>{trans("- all types -")}</option>
				<option value="{$smarty.const.MSG_MAIL}"{if $listdata.type == $smarty.const.MSG_MAIL} selected="selected"{/if}>{trans("email")}</option>
				<option value="{$smarty.const.MSG_SMS}"{if $listdata.type == $smarty.const.MSG_SMS} selected="selected"{/if}>{trans("sms")}</option>
				<option value="{$smarty.const.MSG_ANYSMS}"{if $listdata.type == $smarty.const.MSG_ANYSMS} selected="selected"{/if}>{trans("any sms")}</option>
			</select>&nbsp;
			{trans("Status:")}
			<select size="1" name="status">
				<option value=""{if !$listdata.status} selected="selected"{/if}>{trans("- all statuses -")}</option>
				<option value="{$smarty.const.MSG_NEW}"{if $listdata.status == $smarty.const.MSG_NEW} selected="selected"{/if}>{trans("waiting<!plural>")}</option>
			{*
				<option value="{$smarty.const.MSG_DRAFT}"{if $listdata.status == $smarty.const.MSG_DRAFT} selected="selected"{/if}>{trans("drafts")}</option>
			*}
				<option value="{$smarty.const.MSG_SENT}"{if $listdata.status == $smarty.const.MSG_SENT} selected="selected"{/if}>{trans("sent<!plural>")}</option>
				<option value="{$smarty.const.MSG_ERROR}"{if $listdata.status == $smarty.const.MSG_ERROR} selected="selected"{/if}>{trans("errornous<!plural>")}</option>
			</select>
			&nbsp;<a href="javascript: document.page.submit();">&raquo;&raquo;&raquo;</a>
			</form>
		</td>
	</tr>		
	{if $listdata.total != 0}
	<tr class="dark">
		<td width="100%" class="fall" colspan="5">
			{include file="scroller.html" loop=$messagelist scrollerno=1}
		</td>
	</tr>
	{/if}
	{cycle values="light,lucid" print=false}
	{section name=messagelist loop=$messagelist start=$start max=$pagelimit}
	{assign var=message value=$messagelist[messagelist]}
	<tr class="{cycle}{if $message.error == $message.cnt} alert{elseif $message.error} blendalert{elseif $message.sent == $message.cnt} blend{/if}" onmouseover="addClass(this, 'highlight')" onmouseout="removeClass(this, 'highlight')">
		<td width="1%" class="fleft" nowrap="nowrap" onclick="return self.location.href='?m=messageinfo&id={$message.id}';">
			{$message.cdate|date_format:"%Y/%m/%d %H:%M"}
		</td>
		<td width="1%" align="right" nowrap="nowrap" onclick="return self.location.href='?m=messageinfo&id={$message.id}';">
			{if $message.type > $smarty.const.MSG_MAIL}
			<img src="img/sms.gif" alt="sms">
			{else}
			<img src="img/email.gif" alt="email">
			{/if}
		</td>
		<td width="96%" onclick="return self.location.href='?m=messageinfo&id={$message.id}';">
			{$message.subject}
		</td>
		<td width="1%" nowrap="nowrap" align="RIGHT" onclick="return self.location.href='?m=messageinfo&id={$message.id}';">
			{$message.cnt|default:0}
		</td>
		<td width="1%" align="RIGHT" class="fright" nowrap="nowrap">
			<a href="?m=messageinfo&id={$message.id}"><img src="img/info.gif" alt="[ {trans("Info")} ]" title="[ {trans("Info")} ]"></a>
		</td>
	</tr>
	{sectionelse}
	<tr>
		<td width="100%" class="fall" align="center" colspan="5">
			<P>&nbsp;</P>
			<P><strong>{trans("No such messages in database.")}</strong></P>
			<P>&nbsp;</P>
		</td>
	</tr>	
	{/section}
	{if $listdata.total != 0}
	<tr class="dark">
		<td width="100%" class="fall" colspan="5">
			{include file="scroller.html" loop=$messagelist scrollerno=2}
		</td>
	</tr>
	{/if}
	<tr class="dark">
		<td width="2%" class="fleftu" colspan="2" nowrap="nowrap">
		</td>
		<td class="frightu" colspan="3">
			<strong>{t a=$listdata.total}Total: $a{/t}</strong>
		</td>
	</tr>
</table>
{include file="footer.html"}
