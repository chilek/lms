{if $part eq "titlebar"}
<div class="lmsPopupTitleBar">
	<div class="lmsPopupTitleBox">
		<div class="lmsPopupTitle">{t a=$ipaddr}Ping to $a{/t}</div>
		<div id="{$popupid}_popupCloseBox" class="olPopupCloseBox lmsPopupCloseBox"></div>
	</div>
	<div class="lmsPopupTitleBarBottom"></div>
</div>
<iframe id="autoiframe_{$popupid}" width=100 height=10 frameborder=0 scrolling=no src="?m=ping&ip={$ipaddr}"></iframe>
{elseif $part eq "ipform"}
<div class="lmsPopupTitleBar">
	<div class="lmsPopupTitleBox">
		<div class="lmsPopupTitle"></div>
		<div id="{$popupid}_popupCloseBox" class="olPopupCloseBox lmsPopupCloseBox"></div>
	</div>
	<div class="lmsPopupTitleBarBottom"></div>
</div>
<div class="lmsIpPopupContents">
	<div class="lmsIpPopupLabel">{t}Enter IP address:{/t}</div>
	<div class="lmsIpPopupForm">
		<form name="ipform" id="ipform" method="GET" action="?m=ping" onsubmit="return ping_any_host('{$popupid}');">
			<input type="text" name="ip">
			<input type="submit" class="hiddenbtn">
		</form>
	</div>
</div>
{else}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--// $Id$ //-->
<html><head>
<meta name="GENERATOR" content="LMS {$layout.lmsv}">
<meta http-equiv="Content-Language" content="{$LANGDEFS.$_ui_language.html}">
<meta http-equiv="Content-Type" content="text/html; charset={$LANGDEFS.$_ui_language.html}">
<title>::: LMS :{if $layout.pagetitle neq ""} {$layout.pagetitle} :{/if}::</title>
<link href="img/style.css" rel="stylesheet" type="text/css">
<link href="img/map.css" rel="stylesheet" type="text/css">
{$xajax}
</head>
{if !$part}
<frameset name="all" frameborder="0" framespacing="0" ROWS="*">
	<frame scrolling="always" frameborder="0" marginheight="0" marginwidth="0" name="m" noresize src="?m=ping&p=main&ip={$ipaddr}">
</frameset>
{else}
<script type="text/javascript" src="img/common.js"></script>
<body class="lmsPingContentsFrame">
	<div id="data" class="lmsPingContents"></div>
	<div class="lmsPingBottom">
		<div id="summary" class="lmsPingSummary">
			{t a="0" b="0" c="0"}Total: $a% ($b/$c){/t}
		</div>
		<div class="lmsPingAutoScroll">
			<form id="params">
				<input type="hidden" name="ipaddr" value="{$ipaddr}">
				<input type="hidden" id="transmitted" name="transmitted" value="0">
				<input type="hidden" id="received" name="received" value="0">
				<input type="hidden" id="minimum" name="minimum" value="1000.0">
				<input type="hidden" id="maximum" name="maximum" value="0.0">
				<input type="checkbox" id="autoscroll" name="autoscroll" checked><a href="javascript:checkElement('autoscroll');">{t}Auto Scroll{/t}</a>
			</form>
		</div>
	</div>
</body>
<script type="text/javascript">
<!--
	var reqTime = 0;

	function ping_reply()
	{
		var d = new Date();
		var waitTime = 1000 - d.getTime() + reqTime;
		if (waitTime < 10)
			ping_refresh();
		else
			setTimeout("ping_refresh()", waitTime);
	}

	function ping_refresh()
	{
		elem = document.getElementById('data');
		if (elem && document.getElementById('autoscroll').checked)
			elem.scrollTop += 1000;
		xajax_refresh(xajax.getFormValues('params'));

		var d = new Date();
		reqTime = d.getTime();
	}

	ping_refresh();
//-->
</script>
{/if}
</html>
{/if}