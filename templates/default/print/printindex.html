{extends file="layout.html"}
{block name=title}LMS: {$layout.pagetitle|striphtml}{/block}
{block name=module_content}
<!--// $Id$ //-->

<style>

	.print-menu {
		display: flex;
		align-items: center;
	}

	.print-menu > *:not(:first-child) {
		margin-left: 1em;
	}

	.print-filter {
		display: flex;
		align-items: center;
	}

</style>

<H1>{$layout.pagetitle}</H1>
{$default_printpage = ConfigHelper::getConfig('invoices.default_printpage')}
{if $printmenu=="customer"}
<FORM method="POST" name="printcustomerlist" id="printcustomerlist" action="?m=customerprint&amp;type=customerlist">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
	<THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/customer.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Customers List:")}
		</TH>
	</TR>
	</THEAD>
	<TBODY>
	<TR>
		<TD class="container" style="width: 100%;" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;" class="nobr">
						<TABLE>
							<TR>
								<TD style="width: 1%;"><IMG src="img/customer.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Status:")}</TD>
								<TD style="width: 98%;">
									<SELECT size="1" name="filter[]" {tip class="lms-ui-multiselect" text="Select customer's group"}
											data-default-value="- {trans("all<!customers>")} -" multiple>
										{foreach $_CSTATUSES as $statusidx => $status}
										<OPTION value="{$statusidx}"{if $statusidx == $smarty.const.CSTATUS_CONNECTED} selected{/if}>{$status.plurallabel}</OPTION>
										{/foreach}
										<OPTION VALUE="50">{trans("deleted<!plural>")}</OPTION>
										<OPTION VALUE="72">{trans("existing<!plural>")}</OPTION>
										<OPTION value="51">{trans("with disconnected nodes")}</OPTION>
										<OPTION value="63">{trans("with connected nodes")}</OPTION>
										<OPTION value="52">{trans("in debt")}</OPTION>
										<OPTION value="57">{trans("in debt above 100%")}</OPTION>
										<OPTION value="58">{trans("in debt above 200%")}</OPTION>
										<OPTION value="59">{trans("without contracts")}</OPTION>
										<OPTION value="76">{trans("without active contracts")}</OPTION>
										<OPTION value="60">{trans("with expired contracts")}</OPTION>
										<OPTION value="77">{trans("with expired, active contracts")}</OPTION>
										<OPTION value="61">{trans("with expiring contracts")}</OPTION>
										<OPTION value="78">{trans("with expiring, active contracts")}</OPTION>
										<OPTION VALUE="75">{trans("with discount")}</OPTION>
										<OPTION value="73">{trans("with unarchived documents")}</OPTION>
										<OPTION value="-1" data-exclusive>{trans("without nodes")}</OPTION>
									</SELECT>
									<label>
										<INPUT class="radio" type="radio" value="AND" name="sk"{if $sk!='OR'} checked{/if}>
										{trans("and")}
									</label>
									<label>
										<INPUT class="radio" type="radio" value="OR" name="sk"{if $sk=='OR'} checked{/if}>
										{trans("or")}
									</label>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;" class="nobr"><IMG src="img/division.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Division")}:</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT size="1" name="division" {tip text="Select division"}>
										<OPTION value="0">- {trans("all")} -</OPTION>
										{foreach $divisions as $item}
											<OPTION value="{$item.id}">{$item.label}</OPTION>
										{/foreach}
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/folder.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Legal personality:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT size="1" name="type" {tip text="Select legal personality type"}>
										<OPTION value="" selected>{trans("- all -")}</OPTION>
										<OPTION value="{$smarty.const.CTYPES_PRIVATE}">{assign var='type' value=$smarty.const.CTYPES_PRIVATE}{$_CTYPES.$type}</OPTION>
										<OPTION value="{$smarty.const.CTYPES_COMPANY}">{assign var='type' value=$smarty.const.CTYPES_COMPANY}{$_CTYPES.$type}</OPTION>
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/netdev.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Link type:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT size="1" name="linktype" {tip text="Select link type"}>
										<OPTION value="">{trans("- all -")}</OPTION>
										{foreach from=$_LINKTYPES item=item key=key}
										<OPTION value="{$key}">{$item}</OPTION>
										{/foreach}
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/netdev.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Link speed:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT size="1" name="linkspeed" {tip text="Select link speed"}>
										<OPTION value="">{trans("- all -")}</OPTION>
										{foreach from=$_LINKSPEEDS item=item key=key}
										<OPTION value="{$key}">{$item}</OPTION>
										{/foreach}
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/network.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Network:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT size="1" name="network" {tip text="Select network"}>
										<OPTION value="0" selected>{trans("- all networks -")}</OPTION>
										{section name="networks" loop=$networks}
										<OPTION value="{$networks[networks].id}">{$networks[networks].name|truncate:40:"...":true}</OPTION>
										{/section}
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/group.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Group:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT size="1" name="customergroup" {tip text="Select group"}>
										<OPTION value="0" selected>{trans("- all groups -")}</OPTION>
										{section name="customergroups" loop=$customergroups}
										<OPTION value="{$customergroups[customergroups].id}">{$customergroups[customergroups].name|truncate:40:"...":true}</OPTION>
										{/section}
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/nodegroup.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Nodes Group:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT size="1" name="nodegroup" {tip text="Select group"}>
										<OPTION value="" selected>{trans("- all groups -")}</OPTION>
										{foreach from=$nodegroups item=nodegroup}
										<OPTION value="{$nodegroup.id}">{$nodegroup.name|truncate:30:"...":true}</OPTION>
										{/foreach}
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/state.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Country state:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<SELECT name="stateid" {tip text="Select country state"}>
										<OPTION value="0">{trans("- all states -")}</OPTION>
										{foreach from=$cstateslist item=item key=key}
										<OPTION value="{$key}">{$item.name}</OPTION>
										{/foreach}
									</SELECT>
								</TD>
							</TR>
						</TABLE>
					</TD>
					<TD style="width: 1%;"><IMG src="img/view.gif" alt=""></TD>
					<TD style="width: 1%;" class="bold nobr">{trans("Sorting:")}</TD>
					<TD style="width: 97%;">
						<TABLE style="width: 1%;" {tip text="Select sorting direction and criteria"}>
							<TR>
								<TD style="width: 100%;" class="nobr">
									<SELECT SIZE="1" name="order">
										<OPTION value="customername" selected>{trans("First/last or Company name")}</OPTION>
										<OPTION value="id">{trans("Id")}</OPTION>
										<OPTION value="extid">{trans("External ID")}</OPTION>
										<OPTION value="balance">{trans("Balance")}</OPTION>
										<OPTION value="tariff">{trans("Subscription")}</OPTION>
										<OPTION value="address">{trans("Address")}</OPTION>
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD style="width: 100%;" class="nobr">
									<SELECT SIZE="1" name="direction">
										<OPTION value="asc" selected>{trans("ascending")}</OPTION>
										<OPTION value="desc">{trans("descending")}</OPTION>
									</SELECT>
								</TD>
							</TR>
						</TABLE>
					</TD>
				</TR>
				<TR>
					<TD style="width: 100%;" colspan="4">
						<TABLE>
							<TR>
								<TD style="width: 1%;"><IMG src="img/calendar.gif" alt=""></TD>
								<TD style="width: 1%;" class="bold nobr">{trans("Balance date:")}</TD>
								<TD style="width: 98%;" class="nobr">
									<INPUT type="text" name="day" size="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format or click to choose it from calendar"}>
								</TD>
							</TR>
							<TR>
								<TD style="width: 1%;"><IMG src="img/docum.gif" alt=""></TD>
								<TD style="width: 99%;" class="nobr" colspan="2">
									<span class="bold nobr">{trans("With document of type:")}</span>
									<SELECT SIZE="1" name="doctype" {tip text="Select document type"}>
										<OPTION value="0">{trans("- all -")}</OPTION>
										{foreach from=$_DOCTYPES key=key item=item}
										<OPTION value="{$key}">{$item}</OPTION>
										{/foreach}
									</SELECT>
									<span class="bold nobr">{trans("in date:")}</span>
									{trans("From")}&nbsp;<INPUT type="text" name="docfrom" size="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format or click to choose it from calendar"}>
									{trans("To")}&nbsp;<INPUT type="text" name="docto" size="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format or click to choose it from calendar"}>
								</TD>
							</TR>
							<TR>
								<TD>
									<INPUT type="checkbox" name="sendingregister" value="1" id="sendingregister" {tip text="Check if would like to print cutomerlist as sending register"}>
								</TD>
								<TD class="bold nobr" colspan="2">
									<label for="sendingregister">
										{trans("sending register format")}
									</label>
								</TD>
							</TR>
							<TR>
								<TD>
									<INPUT type="checkbox" name="customernodes" value="1" id="customernodes">
								</TD>
								<TD class="bold nobr" colspan="2">
									<label for="customernodes">
										{trans("include customer node info")}
									</label>
								</TD>
							</TR>
						</TABLE>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" class="text-right" colspan="2">
			<A href="javascript:document.printcustomerlist.target='_blank';document.printcustomerlist.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" style="margin: 0px 2px;"></A>
		</TD>
	</TR>
	</TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="finances"}
<FORM method="post" name="printbalancelist" id="printbalancelist" action="?m=print&type=balancelist">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
		    <IMG src="img/money.gif" alt="">
		</TH>
		<TH  scope="col" class="bold nobr">
		    {trans("Network Balance Sheet")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE width="100%">
				<TR>
					<TD style="width: 1%;" class="nobr">
					    <TABLE cellpadding="3">
					        <TR>
					    	    <TD style="width: 1%;">
							<IMG src="img/users.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
						        {trans("User:")}
						    </TD>
						    <TD style="width: 98%;">
						        <SELECT size="1" name="user" {tip text="You can select user to limit results"}>
						    	    <OPTION value="">{trans("- all users -")}</OPTION>
							    {section name="users" loop=$users}
							    <OPTION value="{$users[users].id}">{$users[users].name|truncate:40:"...":true}</OPTION>
							    {/section}
					    	    </SELECT>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/network.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Network:")}
						    </TD>
						    <TD style="width: 98%;">
							<SELECT size="1" name="network" {tip text="Select network"}>
							    <OPTION value="0" SELECTED>{trans("- all networks -")}</OPTION>
							    {section name="networks" loop=$networks}
							    <OPTION value="{$networks[networks].id}">{$networks[networks].name|truncate:40:"...":true}</OPTION>
							    {/section}
							</SELECT>
						    </TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/division.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Division")}:
						    </TD>
						    <TD style="width: 98%;" class="nobr">
							<SELECT size="1" name="division" {tip text="Select division"}>
								<OPTION value="0">- {trans("all")} -</OPTION>
								{foreach $divisions as $item}
									<OPTION value="{$item.id}">{$item.label}</OPTION>
								{/foreach}
							</SELECT>
						    </TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/group.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Group:")}
						    </TD>
						    <TD style="width: 98%;">
							<SELECT size="1" name="customergroup" {tip text="Select group"}>
							    <OPTION value="0" SELECTED>{trans("- all groups -")}</OPTION>
							    {section name="customergroups" loop=$customergroups}
							    <OPTION value="{$customergroups[customergroups].id}">{$customergroups[customergroups].name|truncate:40:"...":true}</OPTION>
							    {/section}
							</SELECT>
						    </TD>
						</TR>
					    </TABLE>
					</TD>
					<TD style="width: 1%;" class="nobr">
					    <TABLE>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/money.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Transaction type:")}
						    </TD>
							<TD style="width: 98%;" class="multiselect">
								<SELECT name="types[]" class="lms-ui-multiselect" {tip text="Select transaction type"} multiple data-default-value="{trans("- all types -")}">
									<OPTION value="1">{trans("Liability")}</OPTION>
									<OPTION value="2">{trans("Income")}</OPTION>
									<OPTION value="3">{trans("Expense")}</OPTION>
								</SELECT>
							</TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
						    	<IMG src="img/print.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
                        				{trans("Documents:")}
                        			    </TD>
                        			    <TD style="width: 98%;">
                        				<SELECT size="1" name="docs" {tip text="Select transaction type"}>
                                			    <OPTION value="">{trans("- all -")}</OPTION>
                            				    <OPTION value="documented">{trans("with document")}</OPTION>
                            				    <OPTION value="notdocumented">{trans("without document")}</OPTION>
                        				</SELECT>
                        			    </TD>
                    				</TR>
						<TR>
						    <TD style="width: 1%;">
						    	<IMG src="img/isource.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
                        				{trans("Source:")}
                        			    </TD>
                        			    <TD style="width: 98%;">
							<SELECT size="1" name="source" {tip text="You can select import source to limit results"}>
							<OPTION value="0">{trans("- all sources -")}</OPTION>
							<OPTION value="-1">- {trans("none")} -</OPTION>
							{foreach from=$sourcelist item=item}
							<OPTION value="{$item.id}">{$item.name}</OPTION>
							{/foreach}
							</SELECT>
						    </TD>
						</TR>
					    </TABLE>
					</TD>
					<TD style="width: 1%;">
						<IMG src="img/calendar.gif" alt="">
					</TD>
					<TD style="width: 95%;" class="nobr">
						<span class="bold nobr">{trans("Period:")}</span>
						{date_period_preset from="#printbalancelist [name=\"balancefrom\"]" to="#printbalancelist [name=\"balanceto\"]"}
						{trans("From")}&nbsp;<INPUT type="text" name="balancefrom" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format or click to choose it from calendar"}>
						{trans("To")}&nbsp;<INPUT type="text" name="balanceto" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<A href="javascript:document.printbalancelist.target='_blank';document.printbalancelist.submit();">{trans("Print")} <IMG src="img/print.gif" alt=""></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if ($printmenu=="customer" || $printmenu=="finances") && (ConfigHelper::checkConfig('privileges.superuser') || !ConfigHelper::checkConfig('privileges.hide_finances'))}
<FORM method="post" name="printcustomerbalance" id="printcustomerbalance" action="?m=print&amp;type=customerbalance">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
	<THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Customer Balance Sheet")}
		</TH>
	</TR>
	</THEAD>
	<TBODY>
	<TR>
		<TD style="width: 100%;" class="container" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
						<IMG src="img/customer.gif" alt="">
					</TD>
					<TD style="width: 1%;" class="bold nobr">
						{trans("Customer:")}
					</TD>
					<TD style="width: 1%;" class="nobr">
						{customerlist form="printcustomerbalance" customers=$customers version=2
							selectname="cust" inputname="customer" firstoption=""}
					</TD>
					<TD style="width: 1%;">
						<IMG src="img/calendar.gif" alt="">
					</TD>
					<TD style="width: 96%;" class="nobr">
						<span class="bold nobr">{trans("Period:")}</span>&nbsp;
						{date_period_preset from="#printcustomerbalance [name=\"from\"]" to="#printcustomerbalance [name=\"to\"]"}
						{trans("From")}&nbsp;<INPUT type="text" name="from" size="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means 1970/01/01) or click to choose it from calendar"}>
						{trans("To")}&nbsp;<INPUT type="text" name="to" size="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" class="container" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
						<img src="img/group.gif" alt="">
					</TD>
					<TD style="width: 99%;" colspan="4">
						<label>
							{trans("Aggregate documents")}
							<input type="checkbox" name="aggregate_documents" value="1"{if ConfigHelper::checkConfig('phpui.aggregate_documents')} checked{/if}>
						</label>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" class="text-right" colspan="2">
			<A href="javascript:document.printcustomerbalance.target='_blank';document.printcustomerbalance.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" style="margin: 0px 2px;"></A>
		</TD>
	</TR>
	</TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="finances"}
<FORM method="post" name="invoicereport" id="invoicereport" action="?m=invoicereport">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Sale Registry")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
					    <TABLE width="100%">
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/division.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Division")}:
						    </TD>
						    <TD style="width: 98%;" colspan="2" class="nobr">
							<SELECT size="1" name="division" {tip text="Select division"}>
								<OPTION value="0">- {trans("all")} -</OPTION>
								{foreach $divisions as $item}
									<OPTION value="{$item.id}">{$item.label}</OPTION>
								{/foreach}
							</SELECT>
						    </TD>
						</TR>
						<tr>
							<td><img src="img/customer.gif" alt=""></td>
							<td class="bold">{trans("Customers")}:</td>
							<td>
								<select name="customer_type">
									<option value="-1">{trans("- all customers -")}</option>
									<option value="{$smarty.const.CTYPES_PRIVATE}">{trans("private person")}</option>
									<option value="{$smarty.const.CTYPES_COMPANY}">{trans("legal entity")}</option>
								</select>
							</td>
						</tr>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/group.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Group:")}
						    </TD>
							<TD style="width: 97%;" class="multiselect nobr">
								<SELECT size="4" name="group[]" class="lms-ui-multiselect" multiple {tip text="Select group"} data-default-value="{trans("- all groups -")}">
									{foreach $customergroups as $customergroup}
									<OPTION value="{$customergroup.id}">{$customergroup.name|truncate:30:"...":true}</OPTION>
									{/foreach}
								</SELECT>
							</TD>
						    <TD style="width: 1%;" class="nobr">
    							<INPUT type="checkbox" name="groupexclude" id="invoicereport-groupexclude" {if $listdata.groupexclude} CHECKED{/if}><label for="invoicereport-groupexclude">{trans("exclude group")}</label>
						    </TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/queue.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Plan:")}
						    </TD>
							<TD style="width: 98%;" colspan="2" class="multiselect nobr">
								<SELECT name="numberplanid[]" class="lms-ui-multiselect" style="min-width: 200px;" {tip text="Select numbering plan"} multiple data-default-value="{trans("- all -")}">
									{foreach $numberplans as $plan}
									{$period = $plan.period}
									<OPTION value="{$plan.id}">{number number=$plan.next template=$plan.template time=$invoice.cdate} ({$_NUM_PERIODS.$period})</OPTION>
									{/foreach}
								</SELECT>
							</TD>
						</TR>
						<TR>
							<TD style="width: 1%;">
								<IMG src="img/settings.gif" alt="">
							</TD>
							<TD style="width: 1%;" class="bold nobr">
								{trans("Adjust the print")}:
							</TD>
							<TD style="width: 98%;" colspan="2" class="nobr">
								<label>
									<input type="checkbox" name="printcustomerid" value="1">
									{trans("hide customer ID")}
								</label>
								<label>
									<input type="checkbox" name="printonlysummary" value="1">
									{trans("only summary")}
								</label>
							</TD>
						</TR>
					    </TABLE>
					</TD>
					<TD style="width: 1%;">
					    <TABLE width="100%">
						    <TR>
						        <TD style="width: 1%;">
						            <IMG src="img/calendar.gif" alt="">
					            </TD>
					            <TD style="width: 1%;" class="bold nobr">
						            {trans("Period:")}
					            </TD>
					            <TD style="width: 98%;" colspan="2" class="nobr">
									{date_period_preset from="#invoicereport [name=\"from\"]" to="#invoicereport [name=\"to\"]"}
									{trans("From")}&nbsp;<INPUT type="text" name="from" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
						            {trans("To")}&nbsp;<INPUT type="text" name="to" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
					            </TD>
					        </TR>
						    <TR>
						        <TD colspan="2"></TD>
					            <TD colspan="2" class="nobr">
					                {trans("sort by")}:
					                <SELECT name="sorttype" {tip text="Select sort cryterion"}>
					                    <OPTION value="cdate">{trans("Draw-up date")}</OPTION>
					                    <OPTION value="sdate">{trans("Sale date")}</OPTION>
					                    <OPTION value="pdate">{trans("Deadline")}</OPTION>
					                    <option value="number">{trans("Document number")}</option>
					                </SELECT>
					            </TD>
					        </TR>
					        <TR>
								<TD>
									<IMG src="img/docum.gif" alt="">
								</TD>
								<TD class="bold nobr">
									{trans("Type:")}
								</TD>
								<TD colspan="2">
									<SELECT name="doctype[]" {tip class="lms-ui-multiselect" text="Select document type"} multiple data-default-value="{trans("- all -")}">
										<OPTION value="invoices">{trans("invoices")}</OPTION>
										<OPTION value="cnotes">{trans("credit notes")}</OPTION>
										<OPTION value="dnotes" data-exclusive>{trans("debit notes")}</OPTION>
									</SELECT>
								</TD>
					        </TR>
					    </TABLE>
					</TD>
					<TD style="width: 98%;" class="nobr">
						<input type="checkbox" name="extended" value="1" id="invoicereport-extended"><label for="invoicereport-extended">{trans("extended format")}</label>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<A href="javascript:document.invoicereport.target='_blank';document.invoicereport.submit();">{trans("Print")} <IMG src="img/print.gif" alt=""></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="finances"}
<FORM method="post" name="printreceiptlist" id="printreceiptlist" action="?m=print&type=receiptlist">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Cash Report")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
					    <TABLE width="100%">
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/queue.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Registry:")}
						    </TD>
						    <TD style="width: 98%;" class="nobr">
							<SELECT SIZE="1" name="registry" {tip text="Select cash registry"}>
					    		    <OPTION value="0">{trans("- all -")}</OPTION>
						    	    {foreach from=$cashreglist item=c}
							    <OPTION value="{$c.id}">{$c.name|truncate:40:"...":true} ({$c.id|string_format:"%04d"})</OPTION>
						    	    {/foreach}
							</SELECT>
						    </TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/group.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Group:")}
						    </TD>
						    <TD style="width: 98%;" class="nobr">
							<SELECT size="1" name="group">
							    <OPTION value="0" SELECTED>{trans("- all groups -")}</OPTION>
			    				    {section name="customergroups" loop=$customergroups}
							    <OPTION value="{$customergroups[customergroups].id}">{$customergroups[customergroups].name|truncate:30:"...":true}</OPTION>
							    {/section}
							</SELECT>
    							<INPUT type="checkbox" name="groupexclude" id="receiptlist-groupexclude" {if $listdata.groupexclude} CHECKED{/if}><label for="receiptlist-groupexclude">{trans("exclude group")}</label>
						    </TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/users.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("User:")}
						    </TD>
						    <TD style="width: 98%;" class="nobr">
							<SELECT size="1" name="user" {tip text="You can select user to limit results"}>
							    <OPTION value="">{trans("- all users -")}</OPTION>
							    {section name="users" loop=$users}
							    <OPTION value="{$users[users].id}">{$users[users].name|truncate:40:"...":true}</OPTION>
							    {/section}
							</SELECT>
						    </TD>
						</TR>
					    </TABLE>
					<TD style="width: 1%;">
						<IMG src="img/calendar.gif" alt="">
					</TD>
					<TD style="width: 1%;" class="nobr">
						<span class="bold nobr">{trans("Period:")}</span>&nbsp;
						{date_period_preset from="#printreceiptlist [name=\"from\"]" to="#printreceiptlist [name=\"to\"]"}
						{trans("From")}&nbsp;<INPUT type="text" name="from" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
						{trans("To")}&nbsp;<INPUT type="text" name="to" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
					</TD>
					<TD style="width: 97%;" class="nobr">
						<input type="checkbox" name="extended" value="1" id="receiptlist-extended"><label for="receiptlist-extended">{trans("extended format")}</label>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<A href="javascript:document.printreceiptlist.target='_blank';document.printreceiptlist.submit();">{trans("Print")} <IMG src="img/print.gif" alt=""></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="finances"}
<FORM method="post" name="printinvoices" id="printinvoices" action="?m=print&type=invoices">
<INPUT type="submit" class="hiddenbtn">
<SCRIPT type="text/javascript">
<!--
	function print()
	{
		document.printinvoices.action="?m=print&type=invoices";
		document.printinvoices.target='_blank';
		document.printinvoices.submit();
	}

	function print_forms()
	{
		document.printinvoices.action="?m=print&type=transferforms&kind=1";
		document.printinvoices.target='_blank';
		document.printinvoices.submit();
	}

	function export_to_jpk(type) {
		if ($('form[name="printinvoices"] select[name="division"]').val() == '0') {
			alertDialog($t("Division not selected!"), $(".export_to_jpk"));
			return;
		}

		document.printinvoices.action = "?m=print&type=invoices&jpk=" + type + '&jpk_format='
			+ $('form[name="printinvoices"] select[name="format"]').val();
		document.printinvoices.submit();
	}
//-->
</SCRIPT>
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Invoices")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
					    <TABLE width="100%">
						<TR>
							<TD style="width: 1%;">
								<IMG src="img/division.gif" alt="">
							</TD>
							<TD style="width: 1%;" class="bold nobr">
								{trans("Division")}:
							</TD>
							<TD style="width: 98%;" class="nobr">
								<SELECT size="1" name="division" {tip text="Select division"}>
									<OPTION value="0">- {trans("all")} -</OPTION>
									{foreach $divisions as $division}
									<OPTION value="{$division.id}">{$division.label}</OPTION>
									{/foreach}
								</SELECT>
							</TD>
						</TR>
						<TR>
							<TD style="width: 1%;">
								<IMG src="img/customer.gif" alt="">
							</TD>
							<TD style="width: 1%;" class="bold nobr">
								{trans("Customer:")}
							</TD>
							<TD style="width: 98%;" class="nobr">
								{customerlist form="printinvoices" customers=$customers version=2
									selectname="cust" inputname="customer" firstoption="- all customers -" selecttip="You can select customer to limit results" inputtip="Enter customer ID or leave empty for all customers"}
							</TD>
						</TR>
						<tr>
							<td><img src="img/customer.gif" alt=""></td>
							<td class="bold">{trans("Customers")}:</td>
							<td>
								<select name="customer_type">
									<option value="-1">{trans("- all customers -")}</option>
									<option value="{$smarty.const.CTYPES_PRIVATE}">{trans("private person")}</option>
									<option value="{$smarty.const.CTYPES_COMPANY}">{trans("legal entity")}</option>
								</select>
							</td>
						</tr>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/group.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Group:")}
						    </TD>
						    <TD style="width: 98%;" class="nobr">
								<input type="hidden" name="group" value="all">
								<SELECT size="1" name="group[]" class="lms-ui-multiselect" data-default-value="{trans("- all groups -")}" multiple>
									{foreach $customergroups as $customergroup}
									<OPTION value="{$customergroup.id}">{$customergroup.name|truncate:30:"...":true}</OPTION>
									{/foreach}
								</SELECT>
								<INPUT type="checkbox" name="groupexclude" id="invoices-groupexclude" {if $listdata.groupexclude} CHECKED{/if}><label for="invoices-groupexclude">{trans("exclude group")}</label>
						    </TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/queue.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Plan:")}
						    </TD>
						    <TD style="width: 98%;" class="nobr">
								<input type="hidden" name="numberplan" value="all">
								<SELECT name="numberplan[]" {tip class="lms-ui-multiselect" text="Select numbering plan"} data-default-value="- {trans("all")} -" multiple>
									{foreach $numberplans as $plan}
									{assign var=period value=$plan.period}
									<OPTION value="{$plan.id}">{number number=$plan.next template=$plan.template time=$invoice.cdate} ({$_NUM_PERIODS.$period})</OPTION>
									{/foreach}
								</SELECT>
						    </TD>
						</TR>
					    </TABLE>
					</TD>
					<TD style="width: 99%;">
						<TABLE style="width: 100%;">
							<TR>
								<TD style="width: 1%;">
									<IMG src="img/calendar.gif" alt="">
								</TD>
								<TD style="width: 1%;" class="nobr">
									<span class="bold nobr">{trans("Period:")}</span>
									{date_period_preset from="#printinvoices [name=\"invoicefrom\"]" to="#printinvoices [name=\"invoiceto\"]"}
									{trans("From")}&nbsp;<INPUT type="text" name="invoicefrom" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
									{trans("To")}&nbsp;<INPUT type="text" name="invoiceto" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
								</TD>
								<TD style="width: 1%;">
									<IMG src="img/info.gif" alt="">
								</TD>
								<TD style="width: 97%; white-space: nowrap;">
									<INPUT type="checkbox" name="invoiceorg" ID="invoiceorg"{if preg_match('/original/i', $default_printpage)} CHECKED{/if}>&nbsp;<label for="invoiceorg">{trans("original")}</label>&nbsp;
									<INPUT type="checkbox" name="invoicecopy" ID="invoicecopy"{if preg_match('/copy/i', $default_printpage)}  CHECKED{/if}>&nbsp;<label for="invoicecopy">{trans("copy")}</label>&nbsp;
									<INPUT type="checkbox" name="invoicedup" ID="invoicedup"{if preg_match('/duplicate/i', $default_printpage)} CHECKED{/if}>&nbsp;<label for="invoicedup">{trans("duplicate")}</label>
								</TD>
							</TR>
							<TR>
								<TD>
									<IMG src="img/options.gif" alt="">
								</TD>
								<TD colspan="2" class="bold nobr">
									{trans("Agreement for an electronic invoice:")}
									<select name="einvoice">
										<option value="0">{trans("- all -")}</option>
										<option value="1">{trans("yes")}</option>
										<option value="2">{trans("no")}</option>
									</select>
								</TD>
								<TD>
									<label>
										<input type="checkbox" name="autoissued">
										{trans("only automatically issued")}
									</label>
									<br>
									<label>
										<input type="checkbox" name="manualissued">
										{trans("only manually issued")}
									</label>
								</TD>
							</TR>
						</TABLE>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<label style="display: none;">
				{trans("JPK format:")}
				<SELECT name="format">
					<OPTION value="xml">{trans("XML")}</OPTION>
					<OPTION value="csv">{trans("CSV")}</OPTION>
				</SELECT>
			</label>
			<input type="hidden" name="format" value="xml">
			<a class="export_to_jpk" href="javascript:export_to_jpk('fa');">{trans("Export to JPK-FA format")} <img src="img/docum.gif" alt=""></a>
			<a class="export_to_jpk" href="javascript:export_to_jpk('vat');">{trans("Export to JPK-VAT format")} <img src="img/docum.gif" alt=""></a>
			<a href="javascript:print_forms();">{trans("Print form of cash transfer")} <img src="img/print.gif" alt=""></a>
			<A href="javascript:print();">{trans("Print")} <IMG src="img/print.gif" alt="" hspace="2"></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="finances"}
<FORM method="post" name="printforms" id="printforms" action="?m=print&type=transferforms&kind=2">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Transfer forms")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
					    <TABLE width="100%">
						<TR>
							<TD style="width: 1%;">
								<IMG src="img/customer.gif" alt="">
							</TD>
							<TD style="width: 1%;" class="bold nobr">
								{trans("Customer:")}
							</TD>
							<TD style="width: 98%;" class="nobr">
								{customerlist form="printforms" customers=$customers version=2
									selectname="cust" inputname="customer" firstoption="- all customers -"
									selecttip="You can select customer to limit results"
									inputtip="Enter customer ID or leave empty for all customers"}
							</TD>
						</TR>
						<TR>
						    <TD style="width: 1%;">
							<IMG src="img/group.gif" alt="">
						    </TD>
						    <TD style="width: 1%;" class="bold nobr">
							{trans("Group:")}
						    </TD>
						    <TD style="width: 98%;" class="nobr">
							<SELECT size="1" name="customergroup">
							    <OPTION value="0" SELECTED>{trans("- all groups -")}</OPTION>
			    				    {section name="customergroups" loop=$customergroups}
							    <OPTION value="{$customergroups[customergroups].id}">{$customergroups[customergroups].name|truncate:30:"...":true}</OPTION>
							    {/section}
							</SELECT>
    							<INPUT type="checkbox" name="groupexclude" id="printforms-groupexclude" {if $listdata.groupexclude} CHECKED{/if}><label for="printforms-groupexclude">{trans("exclude group")}</label>
						    </TD>
						</TR>
					    </TABLE>
					</TD>
					<TD style="width: 1%;">
						<IMG src="img/value.gif" alt="">
					</TD>
					<TD style="width: 98%;" class="bold nobr">
						{trans("Balance:")}&nbsp;<INPUT type="text" name="balance" SIZE="10" {tip text="Enter balance limit (default 0)"}>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<A href="javascript:document.printforms.target='_blank';document.printforms.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" hspace="2"></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="incomereport" || $printmenu=="finances"}
<FORM method="post" name="printincomereport" id="printincomereport" action="?m=print&type=incomereport">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Total Invoiceless Income")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
						<IMG src="img/calendar.gif" alt="">
					</TD>
					<TD style="width: 99%;" class="nobr">
						<span class="bold nobr">{trans("Period:")}</span>&nbsp;
						{date_period_preset from="#printincomereport [name=\"from\"]" to="#printincomereport [name=\"to\"]"}
						{trans("From")}&nbsp;<INPUT type="text" name="from" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format or click to choose it from calendar"}>
						{trans("To")}&nbsp;<INPUT type="text" name="to" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<A href="javascript:document.printincomereport.target='_blank';document.printincomereport.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" hspace="2"></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if ($printmenu=="customer" || $printmenu=="finances") && (ConfigHelper::checkConfig('privileges.superuser') || !ConfigHelper::checkConfig('privileges.hide_finances'))}
<FORM method="post" name="liabilityreport" id="liabilityreport" action="?m=print&amp;type=liabilityreport">
<p style="display: none;">
<INPUT type="submit" class="hiddenbtn">
</p>
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
	<THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Liability Report")}
		</TH>
	</TR>
	</THEAD>
	<TBODY>
	<TR>
		<TD class="container" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
						<table width="100%">
							<COLGROUP>
								<COL style="width: 1%;">
								<COL style="width: 1%;">
								<COL style="width: 98%;">
							</COLGROUP>
							<TR>
								<TD>
									<IMG src="img/division.gif" alt="">
								</TD>
								<TD class="bold nobr">
									{trans("Division")}:
								</TD>
								<TD class="nobr">
									<SELECT size="1" name="division" {tip text="Select division"}>
										<OPTION value="0">- {trans("all")} -</OPTION>
										{foreach $divisions as $division}
										<OPTION value="{$division.id}">{$division.label}</OPTION>
										{/foreach}
									</SELECT>
								</TD>
							</TR>
							<TR>
								<TD>
									<IMG src="img/customer.gif" alt="">
								</TD>
								<TD class="bold nobr">
									{trans("Customer:")}
								</TD>
								<TD class="nobr">
									{customerlist form="liabilityreport" customers=$customers version=2
										selectname="cust" inputname="customer" firstoption="- all customers -"
										inputtip="Enter customer ID or leave empty for all customers"}
								</TD>
							</TR>
						</table>
					</td>
					<td style="width: 99%;">
						<table width="100%">
							<COLGROUP>
								<COL style="width: 1%;">
								<COL style="width: 1%;">
								<COL style="width: 1%;">
								<COL style="width: 1%;">
								<COL style="width: 96%;">
							</COLGROUP>
							<TR>
								<TD>
									<IMG src="img/calendar.gif" alt="">
								</TD>
								<TD class="bold nobr">
									{trans("Day:")}&nbsp;
									<INPUT type="text" name="day" size="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
								</TD>
								<TD>
									<IMG src="img/view.gif" alt="">
								</TD>
								<TD class="bold nobr">
									{trans("Sorting:")}
								</TD>
								<TD {tip text="Select sorting direction and criteria"}>
									<TABLE width="100%">
										<TR>
											<TD style="width: 100%;" class="nobr">
												<SELECT size="1" name="order">
													<OPTION value="customername" selected>{trans("First/last or Company name")}</OPTION>
													<OPTION value="grossvalue">{trans("Gross value")}</OPTION>
												</SELECT>
											</TD>
										</TR>
										<TR>
											<TD style="width: 100%;" class="nobr">
												<SELECT SIZE="1" name="direction">
													<OPTION value="asc" selected>{trans("ascending")}</OPTION>
													<OPTION value="desc">{trans("descending")}</OPTION>
												</SELECT>
											</TD>
										</TR>
									</TABLE>
								</TD>
							</TR>
						</table>
					</td>
				</tr>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" class="text-right" colspan="2">
			<A href="javascript:document.liabilityreport.target='_blank';document.liabilityreport.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" style="margin: 0px 2px;"></A>
		</TD>
	</TR>
	</TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="finances"}
<FORM method="post" name="printimportlist" id="printimportlist" action="?m=print&type=importlist">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/money.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Cash Import History")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;" class="nobr">
						<IMG src="img/isource.gif" alt="">
					</TD>
					<TD style="width: 1%;" class="bold nobr">
						{trans("Source:")}
					</TD>
					<TD style="width: 1%;">
						<SELECT size="1" name="source" {tip text="You can select import source to limit results"}>
						<OPTION value="0">{trans("- all sources -")}</OPTION>
						{foreach from=$sourcelist item=item}
						<OPTION value="{$item.id}">{$item.name}</OPTION>
						{/foreach}
						</SELECT>
					</TD>
					<TD style="width: 1%;">
						<IMG src="img/calendar.gif" alt="">
					</TD>
					<TD style="width: 96%;" class="nobr">
						<span class="bold nobr">{trans("Period:")}</span>
						{date_period_preset from="#printimportlist [name=\"importfrom\"]" to="#printimportlist [name=\"importto\"]"}
						{trans("From")}&nbsp;<INPUT type="text" name="importfrom" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format or click to choose it from calendar"}>
						{trans("To")}&nbsp;<INPUT type="text" name="importto" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<A href="javascript:document.printimportlist.target='_blank';document.printimportlist.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" hspace="2"></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="node"}
<FORM method="post" name="printnodelist" id="printnodelist" action="?m=nodeprint&type=nodelist">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
    <THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/node.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Nodes List")}
		</TH>
	</TR>
    </THEAD>
    <TBODY>
	<TR>
		<TD class="container" width="100%" colspan="2">
			<TABLE cellpadding="3">
				<TR>
					<TD class="bold nobr">
						<IMG src="img/node.gif" alt="">{trans("Status:")}
					</TD>
					<TD {tip text="Select nodes group"}>
						<INPUT class="radio light" type="radio" id="nodelist-all" name="filter" value="0" CHECKED><label for="nodelist-all">{trans("all")}</label>
						<INPUT class="radio light" type="radio" id="nodelist-connected" name="filter" value="1"><label for="nodelist-connected">{trans("connected<!plural:item>")}</label>
						<INPUT class="radio light" type="radio" id="nodelist-disconnected" name="filter" value="2"><label for="nodelist-disconnected">{trans("disconnected<!plural:item>")}</label>
						<INPUT class="radio light" type="radio" id="nodelist-indebt" name="filter" value="3"><label for="nodelist-indebt">{trans("indebted owner")}</label>
					</TD>
				</tr>
				<tr>
					<TD class="bold nobr">
						<IMG src="img/network.gif" alt="">
						{trans("Network:")}
					</td>
					<TD>
						<SELECT size="1" name="network" {tip text="Select network"}>
						    <OPTION value="0" SELECTED>{trans("- all networks -")}</OPTION>
						    {section name="networks" loop=$networks}
						    <OPTION value="{$networks[networks].id}">{$networks[networks].name|truncate:40:"...":true}</OPTION>
						    {/section}
						</SELECT>
					</TD>
				</TR>
				<TR>
					<TD class="bold nobr">
						<IMG src="img/group.gif" alt="">{trans("Group:")}
					</TD>
					<TD>
					    <SELECT size="1" name="customergroup" {tip text="Select group"}>
						    <OPTION value="0" SELECTED>{trans("- all groups -")}</OPTION>
						    {section name="customergroups" loop=$customergroups}
						    <OPTION value="{$customergroups[customergroups].id}">{$customergroups[customergroups].name|truncate:40:"...":true}</OPTION>
						    {/section}
					    </SELECT>
					</TD>
				</TR>
				<tr>
					<TD class="bold nobr">
						<IMG src="img/view.gif" alt="">{trans("Sorting:")}
					</TD>
					<TD {tip text="Select sorting direction and criteria"}>
							<SELECT SIZE="1" name="order">
							    <OPTION value="name" SELECTED>{trans("Name")}</OPTION>
							    <OPTION value="id">{trans("Id")}</OPTION>
							    <OPTION value="owner">{trans("Customer name")}</OPTION>
							    <OPTION value="ownerid">{trans("Customer ID")}</OPTION>
							    <OPTION value="ip">{trans("IP address")}</OPTION>
							    <OPTION value="mac">{trans("MAC address")}</OPTION>
							</SELECT>

							<SELECT SIZE="1" name="direction">
							    <OPTION value="asc" SELECTED>{trans("ascending")}</OPTION>
							    <OPTION value="desc">{trans("descending")}</OPTION>
							</SELECT>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" colspan="2" align="right">
			<A href="javascript:document.printnodelist.target='_blank';document.printnodelist.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" hspace="2"></A>
		</TD>
	</TR>
    </TBODY>
</TABLE>
</FORM>
{/if}
{if $printmenu=="traffic" || $printmenu=="customer"}
<FORM method="post" name="printcustomertraffic" id="printcustomertraffic"  action="?m=trafficprint&amp;type=customertraffic">
<INPUT type="submit" class="hiddenbtn">
<TABLE class="lmsbox">
    <COLGROUP>
        <COL style="width: 1%;">
        <COL style="width: 99%;">
    </COLGROUP>
	<THEAD>
	<TR>
		<TH scope="col">
			<IMG src="img/traffic.gif" alt="">
		</TH>
		<TH scope="col" class="bold nobr">
			{trans("Stats")}
		</TH>
	</TR>
	</THEAD>
	<TBODY>
	<TR>
		<TD style="width: 100%;" class="container" colspan="2">
			<TABLE width="100%" cellpadding="3">
				<TR>
					<TD style="width: 1%;">
						<IMG src="img/customer.gif" alt="">
					</TD>
					<TD style="width: 1%;" class="bold nobr">
						{trans("Customer:")}
					</TD>
					<TD style="width: 1%;" class="nobr">
						{customerlist form="printcustomertraffic" customers=$customers version=2
							selectname="cust" inputname="customer" firstoption=""}
					</TD>
					<TD style="width: 1%;">
						<IMG src="img/calendar.gif" alt="">
					</TD>
					<TD style="width: 1%;" class="bold nobr">
						{trans("Year:")}
					</TD>
					<TD style="width: 1%;">
						<SELECT size="1" name="year" {tip text="Select period"}>
							{foreach item=year from=$statyears}
							<OPTION value="{$year}"{if $year == $curryear} selected{/if}>{$year}</OPTION>
							{/foreach}
						</SELECT>
					</TD>
					<TD style="width: 1%;" class="bold nobr">
						{trans("Month:")}
					</TD>
					<TD style="width: 1%;">
						<SELECT size="1" name="month" {tip text="Select period"}>
							{foreach item=month key=id from=$months}
							<OPTION value="{$id}"{if $id == $currmonth} selected{/if}>{$month}</OPTION>
							{/foreach}
						</SELECT>
					</TD>
					<TD style="width: 92%;"></TD>
				</TR>
				<tr>
					<td colspan="9">
						<label>
							<input type="checkbox" name="showavg" value="1" checked>
							{trans("show average speed")}
						</label>
						<label>
							<input type="checkbox" name="showmax" value="1" checked>
							{trans("show maximum speed")}
						</label>
					</td>
				</tr>
			</TABLE>
		</TD>
	</TR>
	<TR>
		<TD style="width: 100%;" class="text-right" colspan="2">
			<A href="javascript:document.printcustomertraffic.target='_blank';document.printcustomertraffic.submit();">{trans("Print")} <IMG src="img/print.gif" alt="" style="margin: 0px 2px;"></A>
		</TD>
	</TR>
	</TBODY>
</TABLE>
</FORM>
{/if}

{if $printmenu == "customer"}
	<FORM method="POST" name="printtransgus" id="printtransgus" action="?m=customerprint&type=transgus">
		<INPUT type="submit" class="hiddenbtn">
		<TABLE class="lmsbox">
			<COLGROUP>
				<COL style="width: 1%;">
				<COL style="width: 99%;">
			</COLGROUP>
			<THEAD>
			<TR>
				<TH scope="col">
					<IMG src="img/customer.gif" alt="">
				</TH>
				<TH scope="col" class="bold nobr">
					{trans("TransGUS:")}
				</TH>
			</TR>
			</THEAD>
			<TBODY>
			<TR>
				<TD class="container" style="width: 100%;" colspan="2">
					<TABLE width="100%" cellpadding="3">
						<COLGROUP>
							<COL style="width: 1%;">
							<COL style="width: 1%;">
							<COL style="width: 98%;">
						</COLGROUP>
						<TR>
							<TD class="nobr"><IMG src="img/division.gif" alt=""></TD>
							<TD class="bold nobr">{trans("Division")}:</TD>
							<TD class="nobr">
								<SELECT size="1" name="division" {tip text="Select division"}>
									<OPTION value="0">{trans("- none -")}</OPTION>
									{foreach $divisions as $item}
										<OPTION value="{$item.id}">{$item.label}</OPTION>
									{/foreach}
								</SELECT>
							</TD>
						</TR>
						<TR>
							<TD>
								<IMG src="img/group.gif" alt="">
							</TD>
							<TD class="bold nobr">
								{trans("Group:")}
							</TD>
							<TD class="nobr">
								<SELECT size="4" name="customergroups[]" class="lms-ui-multiselect"
										multiple {tip text="Select group"}
										data-default-value="{trans("- all groups -")}">
									{foreach $customergroups as $customergroup}
										<OPTION value="{$customergroup.id}">{$customergroup.name|truncate:30:"...":true}</OPTION>
									{/foreach}
								</SELECT>
							</TD>
						</TR>
						<TR>
							<TD class="nobr"><IMG src="img/phone.gif" alt=""></TD>
							<TD class="bold nobr">
								<label for="transgus-phonecontacts">
									{trans("Phone contacts:")}
								</label>
							</TD>
							<TD class="nobr">
								<input type="checkbox" id="transgus-phonecontacts" name="phonecontacts" value="1">
							</TD>
						</TR>
					</TABLE>
				</TD>
			</TR>
			<TR>
				<TD style="width: 100%;" class="text-right" colspan="2">
					<A id="transgus-submit" href="#">{trans("Generate XML report")}
						<IMG src="img/print.gif" alt="" style="margin: 0px 2px;"></A>
				</TD>
			</TR>
			</TBODY>
		</TABLE>
	</FORM>

	<script>

		$(function () {
			$("#transgus-submit").click(function () {
				if ($('form[name="printtransgus"] select[name="division"]').val() == '0') {
					alertDialog($t("Division not selected!"), this);
					return;
				}
				javascript:document.printtransgus.submit();
			});
		});

	</script>

{/if}


{if $printmenu=="netdev"}
<form method="post" name="uke-siis" id="uke-siis" action="?m=netdevprint&type=uke-siis">
<input type="submit" class="hiddenbtn">
<table class="lmsbox">
    <colgroup>
        <col style="width: 1%;">
        <col style="width: 1%;">
        <col style="width: 99%;">
    </colgroup>
    <thead>
	<tr>
		<th scope="col" colspan="3" class="bold nobr">
		    <img src="img/netdev.gif" alt=""> {trans("UKE SIIS report")}
		</th>
	</tr>
    </thead>
    <tbody>
	<tr>
		<td>
			<img src="img/docum.gif" alt="">
		</td>
		<td class="bold nobr">
			{trans("Exported sheets:")}
		</td>
		<td style="width: 98%;">
			{*<input type="checkbox" name="sheets[dp]" id="sheets_dp" value="1" checked> <label for="sheets_dp">DP</label> *}
			<input type="checkbox" name="sheets[proj]" id="sheets_proj" value="1" checked> <label for="sheets_proj">PROJ</label>
			<input type="checkbox" name="sheets[ob]" id="sheets_ob" value="1" checked> <label for="sheets_ob">OB</label>
			<input type="checkbox" name="sheets[ww]" id="sheets_ww" value="1" checked> <label for="sheets_ww">WW</label>
			<input type="checkbox" name="sheets[wo]" id="sheets_wo" value="1" checked> <label for="sheets_wo">WO</label>
			<input type="checkbox" name="sheets[int]" id="sheets_int" value="1" checked> <label for="sheets_int">INT</label>
			<input type="checkbox" name="sheets[sr]" id="sheets_sr" value="1" checked> <label for="sheets_sr">SR</label>
			<input type="checkbox" name="sheets[ps]" id="sheets_ps" value="1" checked> <label for="sheets_ps">PS</label>
			<input type="checkbox" name="sheets[lp]" id="sheets_lp" value="1" checked> <label for="sheets_lp">LP</label>
			<input type="checkbox" name="sheets[rl]" id="sheets_rl" value="1" checked> <label for="sheets_rl">RL</label>
			<input type="checkbox" name="sheets[pol]" id="sheets_pol" value="1" checked> <label for="sheets_pol">POL</label>
			<input type="checkbox" name="sheets[zas]" id="sheets_zas" value="1" checked> <label for="sheets_zas">ZAS</label>
			<input type="checkbox" name="sheets[us]" id="sheets_us" value="1" checked> <label for="sheets_us">US</label>
		</td>
	</tr>

	<tr>
		<td>
			<img src="img/netdev.gif" alt="">
		</td>
		<td class="bold nobr">
			<label for="customernetdevices">
				{trans("Include customer network device assignments:")}
			</label>
		</td>
		<td>
			<input type="checkbox" name="customernetdevices" id="customernetdevices" value="1">
		</td>
	</tr>

	{if $linktypes}
	<tr>
		<td class="valign-top"><img src="img/view.gif" alt=""></td>
		<td class="bold valign-top">{trans('Potential range')}:</td>
		<td>
			{$def_vals = json_decode(ConfigHelper::getConfig("phpui.linktype_ranges", '{"0":100,"1":2000,"2":300}'), true)}
			{$i = 0}

			<table>
				{foreach $linktypes as $l_id=>$l_name}
				<tr class="blend">
					<td>
						<label>
							<input type="checkbox" class="range_chk" name="uke[linktypes][{$i}][type]" value="{$l_id}">{$l_name}
						</label>
					</td>
					<td>
						<input type="number" min="0" name="uke[linktypes][{$i}][range]" {if $def_vals[$l_id]}value="{$def_vals[$l_id]}"{/if} style="width: 50px;" disabled> {trans('meters')}
					</td>
				</tr>
				{$i = $i+1}
				{/foreach}
			</table>
		</td>
	</tr>
	{/if}

	<tr>
		<td colspan="3" class="buttons">
			<a href="javascript:document.forms['uke-siis'].submit();">{trans("Save")} <img src="img/save.gif" alt=""></a>
		</td>
	</tr>
    </tbody>
</table>

<script>
	$( function() {
		$( '.range_chk' ).click( function() {
			var tr  = $(this).closest('tr');
			var inp = tr.find('input[type=number]');

			tr.toggleClass('blend');

			if ( inp.attr('disabled') ) {
				inp.attr('disabled', false);
			} else {
				inp.attr('disabled', true);
			}
		});
	});
</script>

</FORM>
{/if}

{if $printmenu == "netdev" || $printmenu == "finances"}
<form method="post" name="uke-income" id="uke-income" action="?m=netdevprint&type=uke-income&module-filter=print" target="_blank">
	<input type="submit" class="hiddenbtn">
	<table class="lmsbox">
		<colgroup>
			<col style="width: 1%;">
			<col style="width: 1%;">
			<col style="width: 99%;">
		</colgroup>
		<thead>
		<tr>
			<th scope="col" colspan="3" class="bold nobr">
				<img src="img/money.gif" alt=""> {trans("UKE income report")}
			</th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td>
				<img src="img/docum.gif" alt="">
			</td>
			<td class="bold nobr">
				{trans("Type:")}
			</td>
			<td class="nobr">
				<label>
					<input type="radio" name="type" value="linktechnologies"{if !isset($filter['uke-income']['type']) || $filter['uke-income']['type'] == 'linktechnologies'} checked{/if}>
					{trans("link technologies")}
				</label>
				<label>
					<input type="radio" name="type" value="servicetypes"{if isset($filter['uke-income']['type']) && $filter['uke-income']['type'] == 'servicetypes'} checked{/if}>
					{trans("service types")}
				</label>
			</td>
		</tr>
		<tr>
			<td>
				<img src="img/division.gif" alt="">
			</td>
			<td class="bold nobr">
				{trans("Division:")}
			</td>
			<td>
				<select name="division"	{tip text="Select division"}>
					<option value="">{trans("- all -")}</option>
					{foreach $divisions as $division}
						<option value="{$division.id}"{if isset($filter['uke-income']['division']) && $filter['uke-income']['division'] == $division.id} selected{/if}
							>{$division.label}</option>
					{/foreach}
				</select>
			</td>
		</tr>
		<tr>
			<TD>
				<IMG src="img/calendar.gif" alt="">
			</TD>
			<TD class="bold nobr">
				{trans("Period:")}
			</TD>
			<TD class="nobr">
				{date_period_preset from="#uke-income [name=\"from\"]" to="#uke-income [name=\"to\"]" periods="previous-year,previous-month,current-year,current-month,next-month,next-year"}
				{trans("From")}
				<INPUT type="text" name="from" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}"
					{tip class="lms-ui-date no-persistent-filter-field" text="Enter date in 'yyyy/mm/dd' format or click to choose it from calendar"}>
				{trans("To")}
				<INPUT type="text" name="to" SIZE="10" maxlength="10" placeholder="{trans("yyyy/mm/dd")}"
					{tip class="lms-ui-date no-persistent-filter-field" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar"}>
			</TD>
		</tr>
		<tr>
			<td>
				<img src="img/downrate.gif" alt="">
			</td>
			<td class="bold nobr">
				<label for="bandwidths">
					{trans("Bandwidth distribution:")}
				</label>
			</td>
			<td>
				<input type="checkbox" name="bandwidths" id="bandwidths" value="1"{if isset($filter['uke-income']['bandwidths'])} checked{/if}>
			</td>
		</tr>
		<tr>
			<td>
				<img src="img/tax.gif" alt="">
			</td>
			<td class="bold nobr">
				<label for="brutto">
					{trans("Brutto:")}
				</label>
			</td>
			<td>
				<input type="checkbox" name="brutto" id="brutto" value="1"{if isset($filter['uke-income']['brutto'])} checked{/if}>
			</td>
		</tr>
		<tr>
			<TD colspan="3" class="lms-ui-box-buttons">
				<div class="print-menu">
					{button icon="print" label="Print" onclick="javascript:document.forms['uke-income'].submit();"}
					<div class="print-filter">
						<strong>{trans("Filter:")}</strong>
						{persistent_filter id="uke-income"}
					</div>
				<div>
			</td>
		</tr>
		</tbody>
	</table>
</FORM>
{/if}

{/block}
