<!--// $Id$ //-->
{css}

{tab_container id="customerevents"}

	{tab_header content_id="eventspanel"}
		{tab_header_cell icon="fas fa-calendar-alt"}
			<strong>{trans("Customer Timetable:")}</strong>
			{if $limit}
				({t a=$limit}last $a events{/t})
			{/if}
		{/tab_header_cell}
		{tab_header_cell}
			<A href="?m=eventadd&customerid={$customerinfo.id}">{trans("New Event")} &raquo;</A>
			<A href="?m={$layout.module}&id={if $nodeinfo.id}{$nodeinfo.id}{else}{$customerinfo.id}{/if}&allevents={if $allevents}0{else}1{/if}">{if $allevents}{trans("Hide closed")}{else}{trans("Show closed")}{/if} &raquo;</A>
		{/tab_header_cell}
	{/tab_header}

	{tab_contents id="eventspanel"}
		{tab_table}
			<div class="lms-ui-tab-table-row header">
				<div class="lms-ui-tab-table-wrapper col-5">
					<div class="lms-ui-tab-table-wrapper col-4">
						<div class="lms-ui-tab-table-wrapper col-2">
							<div class="lms-ui-tab-table-column creation-date">
								<strong>{trans("Date:")}</strong>
							</div>
							<div class="lms-ui-tab-table-column type">
								<strong>{trans("Type:")}</strong>
							</div>
						</div>
						<div class="lms-ui-tab-table-wrapper col-2">
							<div class="lms-ui-tab-table-column number">
								{trans("ID:")}
							</div>
							<div class="lms-ui-tab-table-column title">
								{trans("Title:")}
							</div>
						</div>
					</div>

					<div class="lms-ui-tab-table-wrapper">
						<div class="lms-ui-tab-table-column description">
							{trans("Description:")}
						</div>
					</div>
				</div>

				<div class="lms-ui-tab-table-column buttons">
					&nbsp;
				</div>
			</div>

			{section name=eventlist loop=$eventlist max=$limit}
				<div class="lms-ui-tab-table-row{if $eventlist[eventlist].closed} blend{/if}" onClick="return self.location.href='?m=eventinfo&amp;id={$eventlist[eventlist].id}'">
					<div class="lms-ui-tab-table-wrapper col-5">
						<div class="lms-ui-tab-table-wrapper col-4">
							<div class="lms-ui-tab-table-wrapper col-2">
								<div class="lms-ui-tab-table-column creation-date">
									{$eventlist[eventlist].date|date_format:"%Y/%m/%d"}
								</div>
								<div class="lms-ui-tab-table-column type">
									{$_EVENTTYPES[$eventlist[eventlist].type]}
								</div>
							</div>
							<div class="lms-ui-tab-table-wrapper col-2">
								<div class="lms-ui-tab-table-column number">
									<A href="?m=rtticketview&id={$eventlist[eventlist].ticketid}">{$eventlist[eventlist].ticketid|default:"---"}</A>
								</div>
								<div class="lms-ui-tab-table-column title">
									{$eventlist[eventlist].title}
								</div>
							</div>
						</div>

						<div class="lms-ui-tab-table-wrapper">
							<div class="lms-ui-tab-table-column description">
								{$eventlist[eventlist].description}
							</div>
						</div>
					</div>
					<div class="lms-ui-tab-table-column buttons">
						{if $eventlist[eventlist].closed}
							<a class="lms-ui-close-button" href="?m=eventedit&amp;id={$eventlist[eventlist].id}&amp;action=open">
								<i title="{trans("Open")}"></i>
							</a>
						{else}
							<a class="lms-ui-open-button" href="?m=eventedit&amp;id={$eventlist[eventlist].id}&amp;action=close">
								<i title="{trans("close")}"></i>
							</a>
						{/if}
						<a class="lms-ui-delete-button" href="?m=eventdel&amp;id={$eventlist[eventlist].id}" OnClick="return confirmLink(this, '{trans("Are you sure, you want to delete that event?")}')">
							<i title="{trans("Delete")}"></i>
						</a>
						<a class="lms-ui-edit-button" href="?m=eventedit&amp;id={$eventlist[eventlist].id}">
							<i title="{trans("Edit")}"></i>
						</a>

					</div>
				</div>
			{sectionelse}
				<div class="lms-ui-tab-empty-table">
					{trans("There are no events in timetable.")}
				</div>
			{/section}
		{/tab_table}
	{/tab_contents}
{/tab_container}

{js}