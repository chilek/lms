{block name="quicksearchcontents"}

&nbsp;
<img src="img/customer.gif" alt="" {tip text="Enter customer ID, first/lastname, email or address and press Enter"}>
<select id="qs-customer-properties" class="lms-ui-quicksearch-property-selection lms-ui-multiselect-selection-group" data-mode="customer" multiple>
    <option value="id"{if !isset($qs_properties.customer) || isset($qs_properties.customer.id)} selected{/if}>{trans("<!qs>customer id")}</option>
    <option value="name"{if !isset($qs_properties.customer) || isset($qs_properties.customer.name)} selected{/if}>{trans("<!qs>customer name")}</option>
    <option value="address"{if !isset($qs_properties.customer) || isset($qs_properties.customer.address)} selected{/if}>{trans("<!qs>address")}</option>
    <option value="post_name"{if !isset($qs_properties.customer) || isset($qs_properties.customer.post_name)} selected{/if}>{trans("<!qs>post name")}</option>
    <option value="post_address"{if !isset($qs_properties.customer) || isset($qs_properties.customer.post_address)} selected{/if}>{trans("<!qs>post address")}</option>
    <option value="location_address"{if !isset($qs_properties.customer) || isset($qs_properties.customer.location_address)} selected{/if}>{trans("<!qs>location address")}</option>
    <option value="email"{if !isset($qs_properties.customer) || isset($qs_properties.customer.email)} selected{/if}>{trans("<!qs>email")}</option>
</select>
&nbsp;
<input type="text" name="qs[customer]" data-mode="customer" value="" size="15" {tip text="Enter customer ID, first/lastname, email or address and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+1">

&nbsp;
<img src="img/phone.gif" alt="" {tip text="Enter phone number and press Enter"}>
&nbsp;
<input type="text" name="qs[phone]" data-mode="phone" value="" size="15" {tip text="Enter phone number and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+2">

&nbsp;
<img src="img/node.gif" alt="" {tip text="Enter node ID, name, IP address or MAC address and press Enter"}>
<select id="qs-node-properties" class="lms-ui-quicksearch-property-selection lms-ui-multiselect-selection-group" data-mode="node" multiple>
    <option value="id"{if !isset($qs_properties.node) || isset($qs_properties.node.id)} selected{/if}>{trans("<!qs>node id")}</option>
    <option value="name"{if !isset($qs_properties.node) || isset($qs_properties.node.name)} selected{/if}>{trans("<!qs>node name")}</option>
    <option value="ip"{if !isset($qs_properties.node) || isset($qs_properties.node.ip)} selected{/if}>{trans("<!qs>ip address")}</option>
    <option value="public_ip"{if !isset($qs_properties.node) || isset($qs_properties.node.public_ip)} selected{/if}>{trans("<!qs>public ip address")}</option>
    <option value="mac"{if !isset($qs_properties.node) || isset($qs_properties.node.mac)} selected{/if}>{trans("<!qs>mac address")}</option>
</select>
&nbsp;
<input type="text" name="qs[node]" data-mode="node" value="" size="15" {tip text="Enter node ID, name, IP address or MAC address and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+3">
&nbsp;
<img src="img/network.gif" alt="" {tip text="Enter network ID, name or IP address and press Enter"}>
&nbsp;
<input type="text" name="qs[networks]" data-mode="networks" value="" size="15" {tip text="Enter network ID, name or IP address and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+4">
&nbsp;
<img src="img/netnode.png" alt="" {tip text="Enter netnode ID or name and press Enter"}>
&nbsp;
<input type="text" name="qs[netnode]" data-mode="netnode" value="" size="15" {tip text="Enter netnode ID or name and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+5">

&nbsp;
<img src="img/netdev.gif" alt="" {tip text="Enter device ID, name or serial number and press Enter"}>
<select id="qs-netdev-properties" class="lms-ui-quicksearch-property-selection lms-ui-multiselect-selection-group" data-mode="netdevice" multiple>
    <option value="id"{if !isset($qs_properties.netdevice) || isset($qs_properties.netdevice.id)} selected{/if}>{trans("<!qs>device id")}</option>
    <option value="name"{if !isset($qs_properties.netdevice) || isset($qs_properties.netdevice.name)} selected{/if}>{trans("<!qs>device name")}</option>
    <option value="serial"{if !isset($qs_properties.netdevice) || isset($qs_properties.netdevice.serial)} selected{/if}>{trans("<!qs>device serial number")}</option>
</select>
&nbsp;
<input type="text" name="qs[netdevice]" data-mode="netdevice" value="" size="15" {tip text="Enter device ID, name or serial number and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+6">

&nbsp;
<img src="img/wireless.gif" alt="" {tip text="Enter wireless SSID and press Enter"}>
&nbsp;
<input type="text" name="qs[wireless]" data-mode="wireless" value="" size="15" {tip text="Enter wireless SSID and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+7">

&nbsp;
<img src="img/ticket.gif" alt="" {tip text="Enter request tracker ID, subject or requestor name and press Enter"}>
<select id="qs-ticket-properties" class="lms-ui-quicksearch-property-selection lms-ui-multiselect-selection-group" data-mode="ticket" multiple>
    <option value="id"{if !isset($qs_properties.ticket) || isset($qs_properties.ticket.id)} selected{/if}>{trans("<!qs>ticket id")}</option>
    <option value="subject"{if !isset($qs_properties.ticket) || isset($qs_properties.ticket.subject)} selected{/if}>{trans("<!qs>ticket subject")}</option>
    <option value="requestor"{if !isset($qs_properties.ticket) || isset($qs_properties.ticket.requestor)} selected{/if}>{trans("<!qs>ticket requestor")}</option>
    <option value="customername"{if !isset($qs_properties.ticket) || isset($qs_properties.ticket.customername)} selected{/if}>{trans("<!qs>customer name")}</option>
</select>
&nbsp;
<input type="text" name="qs[ticket]" data-mode="ticket" value="" size="15" {tip text="Enter request tracker ID, subject or requestor name and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+8">

&nbsp;
<img src="img/account.gif" alt="" {tip text="Enter account or alias name and press Enter"}>
&nbsp;
<input type="text" name="qs[account]" data-mode="account" value="" size="15" {tip text="Enter account or alias name and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+9">

&nbsp;
<img src="img/docum.gif" alt="" {tip text="Enter document number and press Enter"}>
&nbsp;
<input type="text" name="qs[document]" data-mode="document" value="" size="15" {tip text="Enter document number and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+0">

&nbsp;
<img src="img/customers.gif" alt="" {tip text="Enter external customer ID fragment and press Enter"}>
&nbsp;
<input type="text" name="qs[customerext]" data-mode="customerext" value="" size="15" {tip text="Enter external customer ID fragment and press Enter" class="blend lms-ui-quick-search"} data-keyboard-shortcut="ctrl+e">

{/block}
<script>
	var qs_data = {
		"qs-properties": {}
	};
	{foreach $qs_properties as $mode => $properties}
	qs_data["qs-properties"]["{$mode}"] = "{implode(',', array_keys($properties))}";
	{/foreach}

    $('select.lms-ui-quicksearch-property-selection').each(function(k) {
        var icon = $(this).prev().attr('src');
        var id = $(this).attr('id');
        var mode = $(this).attr('data-mode');
        $(this).prev().remove();
		new multiselect({
			id: id,
			defaultValue: null,
			icon: icon,
			type: 'tiny'
		});
		$('#' + id).change(function() {
			var properties = [];
			var id = $(this).attr('id');

			$('#' + id + '-layer input:checked').each(function () {
				properties.push($(this).val());
			});
			qs_data["qs-properties"][mode] = properties.join(',');
            $.ajax({
				method: "POST",
				url: '?m=persistentsetting',
				data: qs_data
			});
		});
	});

    $('.lms-ui-quick-search[data-keyboard-shortcut]').each(function() {
		var input = $(this);
    	Mousetrap.bindGlobal(input.attr('data-keyboard-shortcut'), function (e) {
			e.preventDefault();
            input.click();
		});
	});
</script>
