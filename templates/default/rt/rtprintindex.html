{extends file="layout.html"}
{block name=title}LMS: {$layout.pagetitle|striphtml}{/block}
{block name=module_content}
<!--// $Id$ //-->
<h1>{$layout.pagetitle}</h1>
<form method="post" name="ticketslist" id="ticketslist" action="?m=rtprint&amp;type=ticketslist" target="_blank">
<input type="submit" class="hiddenbtn">
<table class="lmsbox">
    <thead>
		<tr>
			<td class="nobr" colspan="2">
				{icon name="helpdesk" label="List of Requests" label_class="bold"}
			</td>
		</tr>
	</thead>
    <tbody>
		<tr>
			<td class="nobr">
				{icon name="calendar" label="Period:" label_class="bold"}
			</td>
			<td class="nobr">
				<label>
					{trans("From:")}
					<input type="text" size="10" name="datefrom" value="" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar" trigger="datefrom"}>&nbsp;
				</label>
				<label>
					{trans("To:")}
					<input type="text" size="10" name="dateto" value="" placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar" trigger="dateto"}>&nbsp;
				</label>
			</>
		</tr>
		<tr>
			<td class="nobr">
				{icon name="location" label="Address:" label_class="bold"}
			</td>
			<td class="nobr">
				<input type="text" name="address" placeholder="{trans("Address:")}"> <input type="text" name="city" placeholder="{trans("City:")}"> <input type="text" name="zip" size="10" placeholder="{trans("Postcode:")}">
			</td>
		</tr>
		<tr>
			<td class="nobr">
				{icon name="queue" label="Queue:" label_class="bold"}
			</td>
			<td class="bold nobr">
				<select size="1" name="queue" {tip text="You can select queue to limit results"}>
					<option value="0">{trans("- all queues -")}</option>
					{section name=queues loop=$queues}
					<option value="{$queues[queues].id}">{$queues[queues].name|truncate:40:"...":true}</option>
					{/section}
				</select>
			</td>
		<tr>
			<td class="nobr">
				{icon name="customer" label="Customer:" label_class="bold"}
			</td>
			<td class="nobr">
				{customerlist form="ticketslist" customers=$customers selectname="cust" inputname="customer" firstoption="- all customers -" selecttip="You can select customer to limit results" inputtip="Enter customer ID or leave empty for all customers"}
			</td>
		</tr>
		<tr>
			<td class="nobr">
				{icon name="helpdesk" label="Subject:" label_class="bold"}
			</td>
			<td class="nobr">
				<input type="text" name="subject" size="30" {tip text="Enter subject"}>
			</td>
		</tr>
		<tr>
			<td class="nobr">
				{icon name="status" label="Status:" label_class="bold"}
			</td>
			<td>
				<select size="1" name="status" {tip text="You can select status to limit results"}>
					<option value="">- {trans("all")} -</option>
					<option value="-1">{trans("not resolved")}</option>
					{foreach $_RT_STATES as $key => $item}
					<option value="{$key}">{$item.label}</option>
					{/foreach}
				</SELECT>
			</td>
		</tr>
		<tr>
			<td class="nobr">
				{icon name="uptime" label="Uptime:" label_class="bold"}
			</td>
			<td class="nobr bold">
				<input type="text" name="days" size="3"> {trans("days")}
			</td>
		</tr>
		{if ConfigHelper::checkPrivilege('helpdesk_advanced_operations')}
		<tr>
			<td class="nobr">
				{icon name="delete" label="Removed:" label_class="bold"}
			</td>
			<td>
				<select size="1" name="removed" {tip text="You can select status to limit results"}>
					<option value="">- {trans("all")} -</option>
					<option value="-1">{trans("Not removed")}</option>
					<option value="1">{trans("Removed")}</option>
				</SELECT>
			</td>
		</tr>
		{/if}
		<tr>
			<td class="nobr">
				{icon name="queue" label="Categories:" label_class="bold"}
			</td>
			<td>
				<table>
					<tbody class="lms-ui-multi-check">
						{foreach $categories as $category}
						<tr>
							<td>
								<input type="checkbox" name="categories[{$category.id}]" class="lms-ui-multi-check" value="1" CHECKED>
							</td>
							<td align="left">
								<label for="cat1{$category.id}">{$category.name}</label>
							</td>
						</tr>
						{/foreach}
						<tr>
							<td align="center" class="ftop">
								<input type="checkbox" name="allbox" id="allbox-1" class="lms-ui-multi-check-all" VALUE="1" CHECKED>
							</td>
							<td class="ftop">
								<label for="allbox-1">{trans("Check All")}</label>
							</td>
						</tr>
					</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td colspan="2" align="right">
				<input type="checkbox" name="extended" VALUE="1" id="extended"><label for="extended">{trans("extended format")}</label>&nbsp;
				<input type="checkbox" name="contacts" VALUE="1" id="contacts" CHECKED><label for="contacts">{trans("include contact info")}</label>
				{button type="submit" label="Print" icon="submit"}
			</td>
		</tr>
    </tbody>
</table>
</form>

<FORM method="post" name="stats" id="stats" action="?m=rtprint&amp;type=stats" target="_blank">
	<input type="submit" class="hiddenbtn">
	<table class="lmsbox">
		<thead>
			<tr>
				<td class="nobr" colspan="2">
					{icon name="helpdesk" label="Requests Stats" label_class="bold"}
				</td>
			</tr>
		</thead>
    	<tbody>
			<tr>
				<td class="nobr">
					{icon name="timetable" label="Period:" label_class="bold"}
				</td>
				<td class="nobr bold">
					<label>
						{trans("From:")}
						<input type="text" size="10" name="datefrom"
							   placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar" trigger="datefrom"}>&nbsp;
					</label>
					<label>
						{trans("To:")}
						<input type="text" size="10" name="dateto"
							   placeholder="{trans("yyyy/mm/dd")}" {tip class="lms-ui-date" text="Enter date in 'yyyy/mm/dd' format (empty field means current date) or click to choose it from calendar" trigger="dateto"}>&nbsp;
					</label>
				</td>
			</tr>
			<tr>
				<td class="nobr">
					{icon name="queue" label="Queue:" label_class="bold"}
				</td>
				<td>
					<select size="1" name="queue" {tip text="You can select queue to limit results"}>
						<option value="0">{trans("- all queues -")}</option>
						{section name=queues loop=$queues}
						<option value="{$queues[queues].id}">{$queues[queues].name|truncate:40:"...":true}</option>
						{/section}
					</SELECT>
				</td>
			</tr>
			<tr>
				<td class="nobr">
					{icon name="customer" label="Customers:" label_class="bold"}
				</td>
				<td class="nobr bold">
					{t a="<input type=\"text\" name=\"times\" size=\"3\">" b="<input type=\"text\" name=\"days\" size=\"3\">"}Customers requesting more than $a times in last $b days{/t}
				</td>
			</tr>
			{if ConfigHelper::checkPrivilege('helpdesk_advanced_operations')}
			<tr>
				<td class="nobr">
					{icon name="delete" label="Removed:" label_class="bold"}
				</td>
				<td>
					<select size="1" name="removed" {tip text="You can select status to limit results"}>
						<option value="">- {trans("all")} -</option>
						<option value="-1">{trans("Not removed")}</option>
						<option value="1">{trans("Removed")}</option>
					</SELECT>
				</td>
			</tr>
			{/if}
			<tr>
				<td class="nobr">
					{icon name="queue" label="Categories:" label_class="bold"}
				</td>
				<td>
					<table>
						<tbody class="lms-ui-multi-check">
						{foreach $categories as $category}
							<tr>
								<td align="center">
									<input type="checkbox" name="categories[{$category.id}]" class="lms-ui-multi-check" value="1" CHECKED>
								</td>
								<td>
									<label for="cat2{$category.id}">{$category.name}</label>
								</td>
							</tr>
						{/foreach}
							<tr>
								<td align="center" class="ftop">
									<input type="checkbox" name="allbox" id="allbox-2" class="lms-ui-multi-check-all" VALUE="1" CHECKED>
								</td>
								<td class="ftop">
									<label for="allbox-2">{trans("Check All")}</label>
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
			<tr>
				<td colspan="2" align="right">
					{button type="submit" icon="print" label="Print"}
				</td>
			</tr>
		</tbody>
	</table>
</form>
{/block}
