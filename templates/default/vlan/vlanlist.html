{extends file="layout.html"}
{block name=title}{$layout.pagetitle|striphtml}{/block}
{block name=module_content}

<h1>{$pagetitle|escape}</h1>

<table class="lmsbox lms-ui-background-cycle">
    <thead>
        <tr class="bold">
            <td class="vlan-id">
                {icon name="id" label="ID"}
            </td>
            <td class="vlan-vid">
                {icon name="vlan" label="VLAN ID"}
            </td>
            <td class="vlan-desc">
                {icon name="description" label="Description"}
            </td>
            <td class="vlan-customerid">
                {icon name="customer" label="Assigned Customer"}
            </td>
            <td class="vlan-netnodeid">
                {icon name="netnode" label="Assigned Network node"}
            </td>
            <td class="text-right" class="lms-ui-box-buttons" data-popup-menu-title="{trans('Sort by')}">
                {buttons label="Sort by" type="button" icon="sorting"}
                    {button type='link' icon="id" tip="ID" href="?m=vlanlist"}
                    {button type='link' icon="vlan" tip="VLAN ID" href="?m=vlanlist&orderby=vlanid"}
                    {button type='link' icon="description" tip="VLAN Description" href="?m=vlanlist&orderby=description"}
                    {button type='link' icon="customer" tip="Customer ID" href="?m=vlanlist&orderby=customerid"}
                    {button type='link' icon="netnode" tip="Network Node ID" href="?m=vlanlist&orderby=netnodeid"}
                {/buttons}

                {button icon="columns" label="Column visibility"  accesskey="c" onclick="dialogopen('#changecolumnsvisibilitymodal')"}
                {button icon="add" label="Add" accesskey="v" onclick="dialogopen('#addvlanmodal')"}
            </td>
        </tr>
    </thead>
    <tbody>
        {foreach $vlanlist as $v}
        <tr class="highlight">
            <td class=" vlan-id">
                {$v.id}
            </td>
            <td class="vlan-vid">
                {$v.vlanid}
            </td>
            <td class="vlan-desc" {tip text=$v.description}>
                {$v.description|trunescape:40}
            </td>
            <td class="vlan-customerid" {tip text=$v.customername}>
                <a href="?m=customerinfo&id={$v.customerid}">{$v.customername|truncate:20:"&hellip;"}</a>
            </td>
            <td class="vlan-netnodeid" {tip text=$v.netnodename}>
                <a href="?m=netnodeinfo&id={$v.netnodeid}">{$v.netnodename|truncate:20:"&hellip;"}</a>
            </td>
            <td class="buttons">
                {button type="link" icon="edit" href="?m=vlanlist&action=modify&id={$v.id}" tip="Edit"}
                {button type="link" icon="delete" href="?m=vlanlist&action=delete&id={$v.id}" tip="Delete"}
            </td>
        </tr>
        {/foreach}
    </tbody>
</table>

{include file="vlan/vlanmodify-dialog.html"}
{include file="vlan/vlanmodify-columnsvisibility.html"}

<script>
    function dialogopen(target) {
        $( target ).dialog("open");
    }

    function dialogclose(target) {
        $( target ).dialog("close");
    }
</script>
{/block}
