{include file="header.html"}
{include file="userheader.html"}
<!--// $Id$ //-->
<H1>{$layout.pagetitle}</H1>
<P>
<TABLE cellpadding="3" WIDTH="100%">
	<TR bgcolor="#CEBD9B" {tip text="Click on column's name to change sorting order"}>
		<TD width="95%" class="fleftu">
			<B>
			<img src="img/user.gif" ALT="" align="absmiddle">&nbsp;<a href="?m={$layout.module}&s={$listdata.state}&o=username{if $listdata.direction eq "asc" && $listdata.order eq "username"},desc{/if}">{t}Name/Surname and Forename:{/t}</A></B> {if $listdata.order eq "username"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<img src="img/phone.gif" ALT="" align="absmiddle">&nbsp;<a href="?m={$layout.module}&s={$listdata.state}&o=phone{if $listdata.direction eq "asc" && $listdata.order eq "phone"},desc{/if}">{t}Phone:{/t}</A></B> {if $listdata.order eq "phone"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<img src="img/home.gif" ALT="" align="absmiddle">&nbsp;<a href="?m={$layout.module}&s={$listdata.state}&o=address{if $listdata.direction eq "asc" && $listdata.order eq "address"},desc{/if}">{t}Address:{/t}</A> {if $listdata.order eq "address"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}
		</TD>
		<TD align="right" width="1%" class="fbt" VALIGN="top" NOWRAP>
			<a href="?m={$layout.module}&s={$listdata.state}&o=id{if $listdata.direction eq "asc" && $listdata.order eq "id"},desc{/if}">{t}ID:{/t}</A></B> {if $listdata.order eq "id"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			&nbsp;
		</TD>
		<TD width="1%" class="fbt" VALIGN="TOP" NOWRAP>
			<img src="img/mail.gif" ALT="" align="absmiddle">&nbsp;<a href="?m={$layout.module}&s={$listdata.state}&o=email{if $listdata.direction eq "asc" && $listdata.order eq "email"},desc{/if}">{t}E-mail:{/t}</A> {if $listdata.order eq "email"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<img src="img/gg.gif" ALT="" align="absmiddle">&nbsp;<a href="?m={$layout.module}&s={$listdata.state}&o=gg{if $listdata.direction eq "asc" && $listdata.order eq "gg"},desc{/if}">{t}IM:{/t}</A> {if $listdata.order eq "gg"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<a href="?m={$layout.module}&s={$listdata.state}&o=nip{if $listdata.direction eq "asc" && $listdata.order eq "nip"},desc{/if}">{t}FIN/SSN:{/t}</A> {if $listdata.order eq "nip"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
		</TD>
		<TD width="1%" class="fbt">
			<img src="img/money.gif" ALT="" align="absmiddle">
		</TD>
		<TD width="1%" class="fbt" ALIGN="right" VALIGN="TOP" NOWRAP>
			<a href="?m={$layout.module}&s={$listdata.state}&o=balance{if $listdata.direction eq "asc" && $listdata.order eq "balance"},desc{/if}">{t}Balance:{/t}</A>&nbsp;{if $listdata.order eq "balance"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<a href="?m={$layout.module}&s={$listdata.state}&o=tariff{if $listdata.direction eq "asc" && $listdata.order eq "tariff"},desc{/if}">{t}Subscription:{/t}</A>&nbsp;{if $listdata.order eq "tariff"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}
		</TD>
		<TD width="1%" class="frightu">
			<NOBR><B>{t 0=$listdata.total}Total: $0{/t}</B></NOBR>
		</TD>
	</TR>
	<TR CLASS="DARK">
		<TD CLASS="fall" colspan="6">
			<P><FORM METHOD="GET" ACTION="?m={$layout.module}" NAME="choosefilter">
				<B>{t}Filter:{/t}</B> {t}Customers:{/t}
				<INPUT TYPE="HIDDEN" NAME="m" VALUE="userlist">
				<INPUT TYPE="HIDDEN" NAME="page" VALUE="1">
				<SELECT SIZE="1" CLASS="bold" NAME="s" ONCHANGE="document.choosefilter.submit();">
					<OPTION VALUE="3"{if $listdata.state eq 3} SELECTED{/if}>{t}connected{/t}</OPTION>
					<OPTION VALUE="2"{if $listdata.state eq 2} SELECTED{/if}>{t}awaiting{/t}</OPTION>
					<OPTION VALUE="1"{if $listdata.state eq 1} SELECTED{/if}>{t}intrested{/t}</OPTION>
					<OPTION VALUE="4"{if $listdata.state eq 4} SELECTED{/if}>{t}deleted{/t}</OPTION>
					<OPTION VALUE="5"{if $listdata.state eq 5} SELECTED{/if}>{t}disconnected{/t}</OPTION>
					<OPTION VALUE="6"{if $listdata.state eq 6} SELECTED{/if}>{t}in debt{/t}</OPTION>
					<OPTION VALUE="7"{if $listdata.state eq 7} SELECTED{/if}>{t}online{/t}</OPTION>
					<OPTION VALUE="0"{if $listdata.state eq 0} SELECTED{/if}>{t}- all -{/t}</OPTION>
				</SELECT>&nbsp;
				{t}Network:{/t}
				<SELECT SIZE="1" CLASS="bold" NAME="n" ONCHANGE="document.choosefilter.submit();">
					<OPTION value="0" {if !$listdata.network} SELECTED {/if}>{t}- all -{/t}</OPTION>
					{section name=networks loop=$networks}
					<OPTION value="{$networks[networks].id}" {if $listdata.network eq $networks[networks].id} SELECTED {/if}>{$networks[networks].name|truncate:50:"..."}</OPTION>
					{/section}
				</SELECT>&nbsp;
				{t}Group:{/t}
				<SELECT SIZE="1" CLASS="bold" NAME="g" ONCHANGE="document.choosefilter.submit();">
					<OPTION value="" {if !$listdata.usergroup} SELECTED {/if}>{t}- all -{/t}</OPTION>
					{section name=usergroups loop=$usergroups}
					<OPTION value="{$usergroups[usergroups].id}" {if $listdata.usergroup eq $usergroups[usergroups].id} SELECTED {/if}>{$usergroups[usergroups].name|truncate:50:"..."}</OPTION>
					{/section}
				</SELECT>
			</FORM></P>
		</TD>
	</TR>		
	{if $listdata.total != 0}
	<TR CLASS="DARK">
		<TD COLSPAN="6" CLASS="FALL">
			<B>{t}Page:{/t}
				{if $page > 1}<A HREF="?m={$layout.module}&s={$listdata.state}&o={$listdata.order},{$listdata.direction}&page={math equation="x - 1" x=$page}">&laquo;&laquo;&laquo;</A>{else}&laquo;&laquo;&laquo;{/if}
				{section name=pcnt loop=$userlist step=$pagelimit}
				{if $page eq $smarty.section.pcnt.rownum}[{else} <A HREF="?m={$layout.module}&s={$listdata.state}&o={$listdata.order},{$listdata.direction}&page={$smarty.section.pcnt.rownum}">{/if}{$smarty.section.pcnt.rownum}{if $page eq $smarty.section.pcnt.rownum}]{else}</A> {/if}
				{/section}
				{if $page < $smarty.section.pcnt.rownum}<A HREF="?m={$layout.module}&s={$listdata.state}&o={$listdata.order},{$listdata.direction}&page={math equation="x + 1" x=$page}">&raquo;&raquo;&raquo;</A>{else}&raquo;&raquo;&raquo;{/if}
			</B> 
			{math equation="x + 1" x=$start assign=startx}
			{if $start + $pagelimit > $listdata.total}
				{assign var=endx value=$listdata.total}{else}{math equation="x + y" x=$start y=$pagelimit assign=endx}
			{/if}
			({t 0=$startx 1=$endx 2=$listdata.total}records $0 - $1 of $2{/t})
		</TD>
	</TR>
	{/if}
	{cycle values="#DFD5BD,#EBE4D6" print=false}
	{section name=userlist loop=$userlist start=$start max=$pagelimit}
	<TR bgcolor="{cycle}" {cycle print=false} onmouseover="setPointer(this, '#CCFFCC')" onmouseout="setPointer(this, '{cycle}')"{if $userlist[userlist].nodeac eq 0} class="blend"{/if}>
		<TD onClick="return self.location.href='?m=userinfo&id={$userlist[userlist].id}';" class="fleft" valign="top">
			<A name="{$userlist[userlist].id}"><IMG src="img/{if $userlist[userlist].status eq 1}unk{/if}{if $userlist[userlist].status eq 2}wait{/if}{if $userlist[userlist].status eq 3}user{/if}.gif" ALT="" align="absmiddle" border="0">{if $userlist[userlist].info}&nbsp;<img src="img/usercomment.gif" ALT="" align="absmiddle" {tip text=$userlist[userlist].info}>{/if}{if $userlist[userlist].message}&nbsp;<img src="img/mail.gif" ALT="" align="absmiddle" {tip text=$userlist[userlist].message}>{/if}&nbsp;<B>{$userlist[userlist].username|escape}</B></A><BR>
			<IMG src="img/phone.gif" ALT="" align="absmiddle" border="0">&nbsp;{$userlist[userlist].phone1|default:"&nbsp;"}<BR>
			<IMG SRC="img/home.gif" ALT="" align="absmiddle" border="0">&nbsp;{$userlist[userlist].address}{if $userlist[userlist].city neq ""},{/if} {$userlist[userlist].zip} {$userlist[userlist].city}
		</TD>
		<TD 	{if $userlist[userlist].account}
				{if $userlist[userlist].status neq 3} 
					onClick="return self.location.href='?m=userinfo&id={$userlist[userlist].id}';"
				{/if}
			{/if} valign="top" align="right">
			<img src="img/empty.gif" align="absmiddle" width="1" height="16" ALT="" border="0">({$userlist[userlist].id|string_format:"%04d"})<BR>
			{if $userlist[userlist].account}
				{if $userlist[userlist].status eq 3}
					{if $userlist[userlist].nodeac eq 1}
						<A HREF="?m=nodeset&ownerid={$userlist[userlist].id}"><IMG SRC="img/access.gif" align="absmiddle" ALT="[ {t}Disconnect All{/t} ]" border="0"></A><BR>
					{else}
						{if $userlist[userlist].nodeac eq 2}
							<A HREF="?m=nodeset&ownerid={$userlist[userlist].id}"><IMG SRC="img/mixaccess.gif" align="absmiddle" ALT="[ {t}Disconnect All{/t} ]" border="0"></A><BR>
						{else}<A HREF="?m=nodeset&ownerid={$userlist[userlist].id}&access=1"><IMG SRC="img/noaccess.gif" align="absmiddle" ALT="[ {t}Connect All{/t} ]" border="0"></A><BR>
						{/if}
					{/if}
				{/if}
			{else}
				<IMG src="img/exclamation.gif" align="absmiddle" border="0" ALT="{t}No such assigned nodes{/t}"><BR>
			{/if}			
			{if $userlist[userlist].warncount}
				{if $userlist[userlist].status eq 3}
					{if $userlist[userlist].nodewarn eq 1}
						<A HREF="?m=nodewarn&ownerid={$userlist[userlist].id}"><IMG SRC="img/warningon.gif" align="absmiddle" ALT="[ {t}Disable Warnings for All{/t} ]" border="0"></A>
					{else}
						{if $userlist[userlist].nodewarn eq 2}
							<A HREF="?m=nodewarn&ownerid={$userlist[userlist].id}"><IMG SRC="img/warningmix.gif" align="absmiddle" ALT="[ {t}Disable Warning for All{/t} ]" border="0"></A>
						{else}<A HREF="?m=nodewarn&ownerid={$userlist[userlist].id}&warning=1"><IMG SRC="img/warningoff.gif" align="absmiddle" ALT="[ {t}Enable Warnings for All{/t} ]" border="0"></A>
						{/if}
					{/if}
				{/if}
			{/if}			
		</TD>
		<TD onClick="return self.location.href='?m=userinfo&id={$userlist[userlist].id}';" valign="top">
			{if $userlist[userlist].email}<IMG src="img/mail.gif" ALT="" align="absmiddle" border="0">&nbsp;{$userlist[userlist].email|default:"&nbsp;"}</A><BR>{/if}
			{if $userlist[userlist].gguin}<IMG src="img/gg.gif" ALT="" align="absmiddle" border="0">&nbsp;{if $userlist[userlist].gguin}{$userlist[userlist].gguin}{else}&nbsp;{/if}<BR>{/if}
			{if $userlist[userlist].nip}<IMG SRC="img/empty.gif" ALT="" align="absmiddle" height="16" width="1"><B>{t}FIN{/t}:</B>&nbsp;<NOBR>{$userlist[userlist].nip}</NOBR>{else}{if $userlist[userlist].pesel}<IMG SRC="img/empty.gif" ALT="" align="absmiddle" height="16" width="1"><B>{t}SSN{/t}:</B>&nbsp;<NOBR>{$userlist[userlist].pesel}</NOBR>{/if}{/if}
		</TD>
		<TD onClick="return self.location.href='?m=userinfo&id={$userlist[userlist].id}';" valign="middle">
			<IMG src="img/money.gif" align="left" border="0" ALT="">
		</TD>
		<TD align="right" valign="top" NOWRAP>
			<NOBR><IMG src="img/empty.gif" width="1" height="16" ALIGN="absmiddle" ALT="" BORDER="0">{if $userlist[userlist].balance < 0}<font color="#ff0000"><B>{/if}{$userlist[userlist].balance|money_format}{if $userlist[userlist].balance < 0}</FONT></B>{/if}<BR><IMG src="img/empty.gif" width="1" height="16" ALIGN="absmiddle" ALT="" BORDER="0"><FONT CLASS="blend">{$userlist[userlist].tariffvalue|money_format}</FONT>
			{if $userlist[userlist].balance < 0}<BR>
			<A HREF="?m=userbalanceok&id={$userlist[userlist].id}" OnClick="return confirmLink(this, '{t 0=$userlist[userlist].username}Are you sure, you want to account ALL debts of customer \'$0\'?{/t}');">{t}Clear Account{/t} &raquo;</A>
			{/if}
			</NOBR>
		</TD>
		<TD class="fright">
			<NOBR>
			<A href="?m=userdel&id={$userlist[userlist].id}" OnCLick="return confirmLink(this, '{t 0=$userlist[userlist].username}Are you sure, you want to remove customer \'$0\' from database?\n\nIf that customer have some nodes, they will also removed and data definitely lost!{/t}');"><IMG src="img/delete.gif" align="absmiddle" border="0" ALT="[ {t}Delete{/t} ]"></A> 
			<A href="?m=useredit&id={$userlist[userlist].id}"><IMG src="img/edit.gif" border="0" align="absmiddle" ALT="[ {t}Edit{/t} ]"></A> 
			<A href="?m=userinfo&id={$userlist[userlist].id}"><IMG src="img/info.gif" border="0" align="absmiddle" ALT="[ {t}Info{/t} ]"></A>
			</NOBR>
		</TD>
	</TR>
	{sectionelse}
	<TR>
		<TD colspan="6" align="center" class="flr">
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p><B>{t}No such customers matching filter conditions or list is empty.{/t}</B></p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
		</TD>
	</TR>
	{/section}
	{if $listdata.total != 0}
	<TR CLASS="DARK">
		<TD COLSPAN="6" CLASS="FALL">
			<B>{t}Page:{/t}
				{if $page > 1}<A HREF="?m={$layout.module}&s={$listdata.state}&o={$listdata.order},{$listdata.direction}&page={math equation="x - 1" x=$page}">&laquo;&laquo;&laquo;</A>{else}&laquo;&laquo;&laquo;{/if}
				{section name=pcnt loop=$userlist step=$pagelimit}
				{if $page eq $smarty.section.pcnt.rownum}[{else} <A HREF="?m={$layout.module}&s={$listdata.state}&o={$listdata.order},{$listdata.direction}&page={$smarty.section.pcnt.rownum}">{/if}{$smarty.section.pcnt.rownum}{if $page eq $smarty.section.pcnt.rownum}]{else}</A> {/if}
				{/section}
				{if $page < $smarty.section.pcnt.rownum}<A HREF="?m={$layout.module}&s={$listdata.state}&o={$listdata.order},{$listdata.direction}&page={math equation="x + 1" x=$page}">&raquo;&raquo;&raquo;</A>{else}&raquo;&raquo;&raquo;{/if}
			</B>
			{math equation="x + 1" x=$start assign=startx}
			{if $start + $pagelimit > $listdata.total}
				{assign var=endx value=$listdata.total}{else}{math equation="x + y" x=$start y=$pagelimit assign=endx}
			{/if}
			({t 0=$startx 1=$endx 2=$listdata.total}records $0 - $1 of $2{/t})
		</TD>
	</TR>
	{/if}
	<TR bgColor="#DFD5BD">
		<TD colspan="2" class="fleftu" align="right" valign="top">
			<IMG SRC="img/info2.gif" border="0" ALT="" align="absmiddle"> <B>{t}Total:{/t} {$listdata.total}</B>	
		</TD>
		<TD class="fbt" align="right">
			<B>{t}Outstandings{/t}:<BR>
			{t}Overcharges{/t}:</B>
		</TD>
		<TD class="fbt" align="right" COLSPAN="2"> 
			<B>{$listdata.below|money_format}<BR>
			{$listdata.over|money_format}</B>
		</TD>
		<TD class="frightu">
			&nbsp;
		</TD>
	</TR>
</TABLE>
</P>
{include file="footer.html"}
