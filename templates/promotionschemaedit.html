{include file="header.html"}
<!-- $Id$ -->
<H1>{$layout.pagetitle}</H1>
<FORM METHOD="POST" NAME="schemaedit" ACTION="?m=promotionschemaedit&id={$schema.id}">
<INPUT type="submit" class="hiddenbtn">
<TABLE WIDTH="100%" CELLPADDING="3">
	<TR CLASS="DARK">
		<TD WIDTH="1%" CLASS="fleftu">
			<IMG SRC="img/promoschema.gif" ALT="">
		</TD>
		<TD WIDTH="1%" CLASS="fbt">
			<B>{t}Name:{/t}</B>
		</TD>
		<TD WIDTH="98%" CLASS="frightu">
			<INPUT TYPE="TEXT" NAME="schema[name]" VALUE="{$schema.name}" SIZE="40" {tip text="Enter schema name" trigger="name" bold=1}>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%" CLASS="fleft">
			<IMG SRC="img/calendar.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
			<B>{t}Periods:{/t}</B>
		</TD>
		<TD WIDTH="98%" CLASS="fright" ID="periodcont">
		    {foreach from=$schema.periods item=period key=key}
			<SELECT NAME="schema[periods][]" {tip text="Select length of the period (in months)"} onchange="period_change(this)">
			    {if !$key}
			    <OPTION value="0"{if !$period} selected{/if}>- {t}unlimited{/t} -</OPTION>
			    {/if}
			    {foreach from=$schema.selection item=item}
			    <OPTION value="{$item}"{if $period == $item} selected{/if}>{$item}</OPTION>
			    {/foreach}
			</SELECT>
			{/foreach}
			<A href="javascript:del_period_item()" ID="perioddel"{if count($schema.periods) < 2} style="display:none"{/if}><IMG src="img/delete.gif" alt="" {tip text="Delete"}></A>
			<A href="javascript:add_period_item()"><IMG src="img/add.gif" alt="" {tip text="Add"}></A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%" CLASS="fleft">
			<IMG SRC="img/options.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
			<B>{t}Options:{/t}</B>
		</TD>
		<TD WIDTH="98%" class="fright">
		    <TABLE width="100%">
		        <TR>
		            <TD width="1%" NOWRAP>{t}Contract prolongation after promotion period:{/t}</TD>
		            <TD width="99%">
		                <INPUT type="checkbox" name="schema[continuation]" value="1"{if $schema.continuation} checked{/if}>
		            </TD>
		        </TR>
		        <TR>
		            <TD NOWRAP>{t}Additional subscription after promotion period:{/t}</TD>
		            <TD>
		                <SELECT name="schema[ctariffid]" {tip text="Select subscription" trigger="ctariffid"}>
		                    <OPTION value="0"{if !$schema.ctariffid} SELECTED{/if}>- {t}none{/t} -</OPTION>
		                {foreach from=$tariffs item=t}
                            <OPTION value="{$t.id}"{if $t.id == $schema.ctariffid} SELECTED{/if}>
                            {$t.name|truncate:40:"...":true} ({$t.value|money_format}{if $t.upceil || $t.downceil}, {$t.downceil}/{$t.upceil} kbit/s{/if})
                            </OPTION>
                        {/foreach}
		                </SELECT>
		            </TD>
		        </TR>
		    </TABLE>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%" CLASS="fleft">
			<IMG SRC="img/info1.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
			<B>{t}Description:{/t}</B>
		</TD>
		<TD WIDTH="98%" CLASS="fright">
			<TEXTAREA NAME="schema[description]" COLS="50" ROWS="5" {tip text="Enter additional information (optional)"}>{$schema.description}</TEXTAREA>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="100%" COLSPAN="3" CLASS="FBOTTOMU" ALIGN="RIGHT"> 
			<A HREF="javascript:document.schemaedit.submit();" accesskey="s">{t}Submit{/t} <IMG SRC="img/save.gif" alt=""></A>
			<A HREF="?m=promotionschemainfo&id={$schema.id}">{t}Cancel{/t} <IMG SRC="img/cancel.gif" alt=""></A><BR>
		</TD>
	</TR>
</TABLE></FORM>
</P>
<SCRIPT type="text/javascript">
{literal}
<!--
document.forms['schemaedit'].elements['schema[name]'].focus();

function add_period_item()
{
    var cont = document.getElementById('periodcont'),
        items = cont.getElementsByTagName('SELECT'),
        last = items[items.length-1],
        item = last.cloneNode(true),
        del = document.getElementById('perioddel');

    if (item.options[0].value == "0")
        item.removeChild(item.options[0]);

    last.parentNode.insertBefore(item, del);
    del.style.display = items.length > 1 ? '' : 'none';
}
function del_period_item()
{
    var cont = document.getElementById('periodcont'),
        items = cont.getElementsByTagName('SELECT'),
        last = items[items.length-1];

    last.parentNode.removeChild(last);
    document.getElementById('perioddel').style.display = items.length > 1 ? '' : 'none';
}
//-->
{/literal}
</SCRIPT>
{include file="footer.html"}
