{include file="header.html"}
<!--// $Id$ //-->
<H1>{$layout.pagetitle}</H1>
<TABLE cellpadding="3" width="100%">
	<TR class="dark" {tip text="Click on column name to change sorting order"}>
		<TD class="fleftu" width="97%">
			<img src="img/node.gif" border="0" ALT="" align="absmiddle"> <A href="?m=nodelist&o=name{if $listdata.direction eq "asc" && $listdata.order eq "name"},desc{/if}"><B>{t}Name:{/t}</B></A> {if $listdata.order eq "name"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<img src="img/user.gif" border="0" ALT="" align="absmiddle"> <A href="?m=nodelist&o=owner{if $listdata.direction eq "asc" && $listdata.order eq "owner"},desc{/if}">{t}Customer:{/t}</A> {if $listdata.order eq "owner"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}
		</TD>
		<TD Class="fbt" align="right" valign="top" width="1%" nowrap>
			<img src="img/empty.gif" align="absmiddle" ALT="" border="0" width="1" height="16"><A href="?m=nodelist&o=id{if $listdata.direction eq "asc" && $listdata.order eq "id"},desc{/if}">{t}Node ID:{/t}</A> {if $listdata.order eq "id"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<img src="img/empty.gif" align="absmiddle" ALT="" border="0" width="1" height="16"><A href="?m=nodelist&o=ownerid{if $listdata.direction eq "asc" && $listdata.order eq "ownerid"},desc{/if}">{t}Customer ID:{/t}</A> {if $listdata.order eq "ownerid"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}
		</TD>
		<TD CLASS="fbt" width="1%" nowrap>
			<img src="img/ip.gif" border="0" ALT="" align="absmiddle">&nbsp;<A href="?m=nodelist&o=ip{if $listdata.direction eq "asc" && $listdata.order eq "ip"},desc{/if}">{t}IP address:{/t}</A> {if $listdata.order eq "ip"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<A href="?m=nodelist&o=ip_pub{if $listdata.direction eq "asc" && $listdata.order eq "ip_pub"},desc{/if}">({t}Pub. IP address:{/t})</A> {if $listdata.order eq "ip_pub"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}<BR>
			<img src="img/mac.gif" border="0" ALT="" align="absmiddle">&nbsp;<A href="?m=nodelist&o=mac{if $listdata.direction eq "asc" && $listdata.order eq "mac"},desc{/if}">{t}MAC address:{/t}</A> {if $listdata.order eq "mac"}<IMG SRC="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" align="absmiddle" border="0" ALT="">{/if}
		</TD>
		<TD CLASS="frightu" width="1%" align="right">
			<NOBR><B>{t 0=$listdata.total}Total: $0{/t}</B></NOBR>
		</TD>
	</TR>
	{if $listdata.total != 0}
	<TR CLASS="dark">
		<TD CLASS="fall" colspan="4">
			<B>{t}Page:{/t}
				{if $page > 1}<A HREF="?m=nodelist&o={$listdata.order},{$listdata.direction|lower}&page={math equation="x - 1" x=$page}">&laquo;&laquo;&laquo;</A>{else}&laquo;&laquo;&laquo;{/if}
				{section name=pcnt loop=$nodelist step=$pagelimit}
				{if $page eq $smarty.section.pcnt.rownum}[{else} <A HREF="?m=nodelist&o={$listdata.order},{$listdata.direction|lower}&page={$smarty.section.pcnt.rownum}">{/if}{$smarty.section.pcnt.rownum}{if $page eq $smarty.section.pcnt.rownum}]{else}</A> {/if}
				{/section}
				{if $page < $smarty.section.pcnt.rownum}<A HREF="?m=nodelist&o={$listdata.order},{$listdata.direction|lower}&page={math equation="x + 1" x=$page}">&raquo;&raquo;&raquo;</A>{else}&raquo;&raquo;&raquo;{/if}
			</B> 
			{math equation="x + 1" x=$start assign=startx}
			{if $start + $pagelimit > $listdata.total}
				{assign var=endx value=$listdata.total}{else}{math equation="x + y" x=$start y=$pagelimit assign=endx}
			{/if}
			({t 0=$startx 1=$endx 2=$listdata.total}records $0 - $1 of $2{/t})
		</TD>
	</TR>
	{/if}
	{cycle values="#DFD5BD,#EBE4D6" print=false}{section name=nodelist loop=$nodelist start=$start max=$pagelimit}
	<TR bgcolor="{cycle}" {cycle print=false} onmouseover="setPointer(this, '#CCFFCC')" onmouseout="setPointer(this, '{cycle}')"{if ! $nodelist[nodelist].access} class="blend"{/if}>
		<TD width="95%" class="fleft" onClick="return self.location.href='?m=nodeinfo&id={$nodelist[nodelist].id}';">
			<a name="{$nodelist[nodelist].id}">
			{if $nodelist[nodelist].lastonline}
			    {if ($smarty.now-$nodelist[nodelist].lastonline) > $_config.phpui.lastonline_limit}
				<img src="img/node_off.gif" border="0" ALT="" align="absmiddle">
			    {else}
				<img src="img/node_on.gif" border="0" ALT="" align="absmiddle">
			    {/if}
			{else}
			    <img src="img/node_unk.gif" border="0" ALT="" align="absmiddle">
			{/if}
			{if $nodelist[nodelist].info}
			    <IMG src="img/info1.gif" alt="" align="absmiddle" {tip text=$nodelist[nodelist].info}>
			{/if}
			<B>{$nodelist[nodelist].name}</B></A><BR>
			<img src="img/user.gif" border="0" ALT="" align="absmiddle">&nbsp;<A href="?m=userinfo&id={$nodelist[nodelist].ownerid}" {tip 0=$nodelist[nodelist].ownerid dynpopup='?m=userinfoshort&id=$0'}>{if ! $nodelist[nodelist].access}<font color="#888888">{/if}{$nodelist[nodelist].owner|truncate:60:" ..."|replace:" ":"&nbsp;"}{if ! $nodelist[nodelist].access}</FONT>{/if}</A>
		</TD>
		<TD align="right" width="1%" onClick="return self.location.href='?m=nodeinfo&id={$nodelist[nodelist].id}';" valign="top">
			<img src="img/empty.gif" align="absmiddle" ALT="" border="0" width="1" height="16">({$nodelist[nodelist].id|string_format:"%04d"})<BR>
			<img src="img/empty.gif" align="absmiddle" ALT="" border="0" width="1" height="16"><font class="blend">({$nodelist[nodelist].ownerid|string_format:"%04d"})</font>
		</TD>
		<TD width="1%" onClick="return self.location.href='?m=nodeinfo&id={$nodelist[nodelist].id}';" valign="top" nowrap>
			<img src="img/ip.gif" border="0" ALT="" align="absmiddle">&nbsp;{$nodelist[nodelist].ip} {if $nodelist[nodelist].ip_pub != "0.0.0.0"}({$nodelist[nodelist].ip_pub}){/if}<BR>
			<nobr><img src="img/mac.gif" border="0" ALT="" align="absmiddle">&nbsp;{$nodelist[nodelist].mac}</nobr>
		</TD>
		<TD class="fright" width="1%">
			<nobr>
			<a href="?m=nodeset&id={$nodelist[nodelist].id}"><img src="img/{if ! $nodelist[nodelist].access}no{/if}access.gif" border="0" ALT="{if ! $nodelist[nodelist].access}[ {t}Connect{/t} ]{else}[ {t}Disconnect{/t} ]{/if}"></A>
                        <a href="?m=nodewarn&id={$nodelist[nodelist].id}"><img src="img/warning{if ! $nodelist[nodelist].warning}off{else}on{/if}.gif" border="0" ALT="{if ! $nodelist[nodelist].warning}[ {t}Enable warning{/t} ]{else}[ {t}Disable warning{/t} ]{/if}"></A>
			<a onClick="return confirmLink(this, '{t 0=$nodelist[nodelist].name|upper}Are you sure, you want to remove node \'$0\' from database?{/t}')" href="?m=nodedel&id={$nodelist[nodelist].id}"><img src="img/delete.gif" border="0" ALT="[ {t}Delete{/t} ]"></A>
			<a href="?m=nodeedit&id={$nodelist[nodelist].id}"><img src="img/edit.gif" border="0" ALT="[ {t}Edit{/t} ]"></A>
			<a href="?m=nodeinfo&id={$nodelist[nodelist].id}"><img src="img/info.gif" border="0" ALT="[ {t}Info{/t} ]"></A>
			</nobr>
		</TD>
	</TR>
	{if $nodelist[nodelist.index_next].ownerid eq $nodelist[nodelist].ownerid && $listdata.order eq "owner"}{cycle print=false}{/if}
	{sectionelse}
	<TR>
		<TD colspan="4" class="fall" align="center">
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p><B>{t}No such nodes in database.{/t}</b></p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
		</TD>
	</TR>
	{/section}
	{if $listdata.total != 0}
	<TR CLASS="dark">
		<TD CLASS="fall" colspan="4">
			<B>{t}Page:{/t}
				{if $page > 1}<A HREF="?m=nodelist&o={$listdata.order},{$listdata.direction|lower}&page={math equation="x - 1" x=$page}">&laquo;&laquo;&laquo;</A>{else}&laquo;&laquo;&laquo;{/if}
				{section name=pcnt loop=$nodelist step=$pagelimit}  
				{if $page eq $smarty.section.pcnt.rownum}[{else} <A HREF="?m=nodelist&o={$listdata.order},{$listdata.direction|lower}&page={$smarty.section.pcnt.rownum}">{/if}{$smarty.section.pcnt.rownum}{if $page eq $smarty.section.pcnt.rownum}]{else}</A> {/if}
				{/section}
				{if $page < $smarty.section.pcnt.rownum}<A HREF="?m=nodelist&o={$listdata.order},{$listdata.direction|lower}&page={math equation="x + 1" x=$page}">&raquo;&raquo;&raquo;</A>{else}&raquo;&raquo;&raquo;{/if}
			</B> 
			{math equation="x + 1" x=$start assign=startx}
			{if $start + $pagelimit > $listdata.total}
				{assign var=endx value=$listdata.total}{else}{math equation="x + y" x=$start y=$pagelimit assign=endx}
			{/if}
			({t 0=$startx 1=$endx 2=$listdata.total}records $0 - $1 of $2{/t})
		</TD>
	</TR>
	{/if}
	<TR CLASS="light">
		<TD WIDTH="98%" COLSPAN="2" CLASS="fleftu" ALIGN="right">
			<B>
				{t}Total:{/t}<BR>
				{t}Connected Nodes:{/t}<BR>
				{t}Disconnected:{/t}
			</B>
		</TD>
		<TD WIDTH="2%" COLSPAN="2" CLASS="frightu" VALIGN="TOP">
			<B>
				{if $listdata.total}{$listdata.total}{else}0{/if}<BR>
				{if $listdata.totalon}{$listdata.totalon}{else}0{/if}<BR>
				{if $listdata.totaloff}{$listdata.totaloff}{else}0{/if}
			</B>
		</TD>				
	</TR>			
</TABLE>
{include file="footer.html"}
