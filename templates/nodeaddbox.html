<!--// $Id$ //-->
<FORM NAME="nodeadd" METHOD="POST" ACTION="?m=nodeadd{if $customerinfo.id}&ownerid={$customerinfo.id}{/if}">
<INPUT type="submit" class="hiddenbtn">
<TABLE WIDTH="100%" CELLPADDING="3">
	<TR CLASS="DARK">
		<TD WIDTH="1%" CLASS="FLEFTU">
			<IMG SRC="img/node.gif" ALT="{t}Name:{/t}">
		</TD>
		<TD WIDTH="99%" CLASS="FRIGHTU">
			<INPUT TYPE="TEXT" NAME="nodedata[name]" VALUE="{$nodedata.name|upper}" MAXLENGTH="32" size="30" {tip text="Enter node name" trigger="name" bold=1}>
		</TD>
	</TR>
        <TR class="LIGHT">
                <TD WIDTH="100%" COLSPAN="2" CLASS="flr">
		        <TABLE WIDTH="100%" CELLPADDING="0">
				<TR CLASS="LIGHT">
					<TD WIDTH="50%" VALIGN="top">
						<TABLE WIDTH="100%" CELLPADDING="3">
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/ip.gif" ALT="{t}IP address:{/t}">
		</TD>
		<TD WIDTH="99%">
			<INPUT TYPE="TEXT" NAME="nodedataipaddr" VALUE="{$nodedata.ipaddr}" {tip text="Enter IP address" trigger="ipaddr"}> <a href="javascript: void(0);" onClick="return ipchoosewin(document.nodeadd.nodedataipaddr);" {tip text="Click to select IP from the list"}>&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/ip_pub.gif" ALT="{t}Pub. IP address:{/t}">
		</TD>
		<TD WIDTH="99%">
			<INPUT TYPE="TEXT" NAME="nodedataipaddr_pub" VALUE="{$nodedata.ipaddr_pub}" {tip text="Enter IP address (optional)" trigger="ipaddr_pub"}> <a href="javascript: void(0);" onClick="return ipchoosewin(document.nodeadd.nodedataipaddr_pub);" {tip text="Click to select IP from the list"}>&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/mac.gif" ALT="{t}MAC address:{/t}">
		</TD>
		<TD WIDTH="99%" NOWRAP>
			<INPUT TYPE="TEXT" NAME="nodedatamac" VALUE="{$nodedata.mac}" {tip text="Enter MAC address" trigger="mac"}> <a href="javascript: void(0);" onClick="return macchoosewin(document.nodeadd.nodedatamac);" {tip text="Click to select MAC from the list"}>&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/passwd.gif" ALT="{t}Password:{/t}">
		</TD>
		<TD WIDTH="99%">
			<INPUT TYPE="TEXT" NAME="nodedata[passwd]" VALUE="{$nodedata.passwd}" {tip text="Enter password (optional)" trigger="passwd"}> <a href="javascript: GenPasswd();" {tip text="Click to generate random password"}>&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/nodegroup.gif" ALT="{t}Node group:{/t}">
		</TD>
		<TD WIDTH="99%" NOWRAP>
			<SELECT SIZE="1" NAME="nodedata[nodegroup]" {tip text="Select group to attribute to node"} trigger="nodegroup"} style="max-width:250px;">
				<OPTION VALUE="0">{t}... select group ...{/t}</OPTION>
				{foreach from=$allnodegroups item=group}
				<OPTION VALUE="{$group.id}" {if $group.id==$nodedata.nodegroup} SELECTED{/if}>{$group.name} ({$group.id|string_format:"%04d"})</OPTION>
				{/foreach}
			</SELECT>
		</TD>
	</TR>

	{if $netdevices}
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/netdev.gif" ALT="{t}Net device:{/t}">
		</TD>
		<TD WIDTH="99%" NOWRAP>
			<SELECT SIZE="1" NAME="nodedata[netdev]" {tip text="Select network device (optional)" trigger="netdev"} style="max-width:250px;">
				<OPTION VALUE="0"{if !$nodedata.netdev} SELECTED{/if}>{t}- select device -{/t}</OPTION>
				{section name=netdevices loop=$netdevices}
				<OPTION VALUE="{$netdevices[netdevices].id}"{if $netdevices[netdevices].id==$nodedata.netdev} SELECTED{/if}>{$netdevices[netdevices].name} {$netdevices[netdevices].producer}{if $netdevices[netdevices].location} / {$netdevices[netdevices].location}{/if}</OPTION>
				{/section}
			</SELECT>
			<INPUT name="nodedata[port]" value="{if $nodedata.port}{$nodedata.port}{/if}" size="2" {tip text="Enter port number in device (optional)" trigger="port"}>
			<INPUT class="box light" type="checkbox" name="nodedata[linktype]" value="1"{if $nodedata.linktype} CHECKED{/if}><IMG src="img/wireless.gif" alt="{t}wireless{/t}" {tip text="wireless"}>
		</TD>
	</TR>
	{/if}
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/{if ! $nodedata.access}no{/if}access.gif" ALT="">
		</TD>
		<TD WIDTH="99%">
			<SELECT SIZE="1" NAME="nodedata[access]" {tip text="Select node status" trigger="access"}>
				<OPTION VALUE="1"{if $nodedata.access} SELECTED{/if}>{t}connected<!singular>{/t}</OPTION>
				<OPTION VALUE="0"{if ! $nodedata.access} SELECTED{/if}>{t}disconnected<!singular>{/t}</OPTION>
			</SELECT>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/warning{if !$nodedata.warning}off{else}on{/if}.gif" ALT="">
		</TD>
		<TD WIDTH="99%">
			<SELECT SIZE="1" NAME="nodedata[warning]" {tip text="Set message for node"}>
				<OPTION VALUE="1"{if $nodedata.warning} SELECTED{/if}>{t}enabled{/t}</OPTION>
				<OPTION VALUE="0"{if ! $nodedata.warning} SELECTED{/if}>{t}disabled{/t}</OPTION>
			</SELECT>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/customer.gif" ALT="{t}Customer:{/t}">
		</TD>
		<TD WIDTH="99%">
			<SELECT SIZE="1" NAME="nodedata[ownerid]" {tip text="Assign node to customer" trigger="customer"} style="max-width:250px;">
				{section name=customers loop=$customers}
				<OPTION VALUE="{$customers[customers].id}"{if $nodedata.ownerid == $customers[customers].id} SELECTED{/if}>{$customers[customers].customername|truncate:40:"...":true} ({$customers[customers].id|string_format:"%04d"})</OPTION>
				{/section}
			</SELECT>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/options.gif" ALT="">
		</TD>
		<TD WIDTH="99%" NOWRAP>
			<A HREF="javascript:checkElement('chkmac');">{t}MAC checking{/t}: </A><INPUT TYPE="checkbox" NAME="nodedata[chkmac]" VALUE="1" CLASS="light box" id="chkmac" {tip text="Enable/disable MAC address checking" trigger="chkmac"}{if !isset($nodeinfo.chkmac) || $nodeinfo.chkmac} checked{/if}>&nbsp;
			<A HREF="javascript:checkElement('halfduplex');">{t}Half duplex{/t}: </A><INPUT TYPE="checkbox" CLASS="box light" VALUE="1" NAME="nodedata[halfduplex]" id="halfduplex" {if $nodeinfo.halfduplex} checked{/if} {tip text="Select transmission mode"}> 
		</TD>
	</TR>
    					</TABLE>
				</TD>
				<TD WIDTH="50%" style="vertical-align: top;">
					<TABLE WIDTH="100%" CELLPADDING="3">
	<TR>
		<TD WIDTH="1%">
			<IMG SRC="img/home.gif" ALT="{t}Location:{/t}">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>{t}Location:{/t}</B>
		</TD>
		<TD WIDTH="98%">
			<TEXTAREA NAME="nodedata[location]" COLS="50" ROWS="5" {tip text="Enter node location (optional)"}>{$nodedata.location}</TEXTAREA>
		</TD>
	</TR>
	<TR>
		<TD WIDTH="1%">
			<IMG SRC="img/info.gif" ALT="{t}Description:{/t}">
		</TD>
		<TD WIDTH="1%" NOWRAP>
			<B>{t}Description:{/t}</B>
		</TD>
		<TD WIDTH="98%">
			<TEXTAREA NAME="nodedata[info]" COLS="50" ROWS="5" {tip text="Enter additional informations (optional)"}>{$nodedata.info}</TEXTAREA>
		</TD>
	</TR>
	                        		</TABLE>
				        </TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="100%" CLASS="FBOTTOMU" COLSPAN="2" ALIGN="RIGHT">
			<A HREF="?m=nodescan{if $customerinfo.id}&ownerid={$customerinfo.id}{/if}">{t}Scan{/t} <IMG SRC="img/search.gif" alt=""></A>
			<A HREF="javascript:document.nodeadd.submit();" ACCESSKEY="s">{t}Submit{/t} <IMG SRC="img/save.gif" alt=""></A>
			<A HREF="?m={if $customerinfo.id}customerinfo&id={$customerinfo.id}{else}nodelist{/if}">{t}Cancel{/t} <IMG SRC="img/cancel.gif" alt=""></A><BR>
			<INPUT type="checkbox" name="nodedata[reuse]" id="reuse" value="ON" class="box light"" id="reuse" {if $nodedata.reuse}checked{/if}><A HREF="javascript:checkElement('reuse')"> {t}Display this form again, when this node is saved{/t}</A>
		</TD>
	</TR>	
</TABLE></FORM>
{literal}
<SCRIPT type="text/javascript">
<!--
	document.forms['nodeadd'].elements['nodedata[name]'].focus();

	function GenPasswd()
	{
		var passwd = new Array();
		var items = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
		var length = {/literal}{$_config.phpui.nodepassword_length|default:"16"}{literal};
		if(length > 32) length = 32;
		
		for(var i=0; i<length; i++)
		{
			n = Math.floor(Math.random() * items.length);
			passwd[i] = items.substring(n, n+1);
		}

		document.forms['nodeadd'].elements['nodedata[passwd]'].value = passwd.join("");
	}	
//-->
</SCRIPT>
{/literal}
