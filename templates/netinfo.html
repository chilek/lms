{include file="header.html"}
{include file="netheader.html"}
<!--// $Id$ //-->
{if $unlockedit}<script language="javascript">
	<!--
		function getText(index)
		{literal}{{/literal}
			{section name=networks loop=$networks}
			if(index=={$networks[networks].id}) return '{$networks[networks].name|upper} ({$networks[networks].address}/{$networks[networks].prefix})';
			{/section}
		{literal}}{/literal}	
	//-->
</script>{/if}
<H1>{$layout.pagetitle}</H1>
<TABLE cellpadding="3" width="100%">
	{if $unlockedit}<FORM METHOD="POST" ACTION="?m=netedit&id={$network.id}" NAME="netedit">{/if}
	<TR class="dark">
		{if !$unlockedit}
		<TD width="100%" class="fall" colspan="4">
			<IMG SRC="img/network.gif" border="0" align="absmiddle" ALT=""> <B>{$network.name|upper} ({$network.id|string_format:"%04d"})</B>
		</TD>
		{else}
		<TD width="1%" class="fleftu" nowarp>
			<IMG SRC="img/network.gif" border="0" align="absmiddle" ALT=""> <B>Nazwa:</B>
		</TD>
		<TD width="99%" class="frightu" colspan="3">
			 <INPUT TYPE="text" NAME="networkdata[name]" VALUE="{$network.name|upper}" {tip trigger="name" bold=1}> <B>({$network.id|string_format:"%04d"})</B>
		</TD>
		{/if}
	</TR>
	<TR class="light">
		<TD width="1%" class="fleft">
			<nobr><IMG SRC="img/ip.gif" border="0" align="absmiddle" ALT=""> <B>Adres / prefix:</B></nobr>
		</TD>
		<TD width="48%">
			<NOBR>{if $unlockedit}<INPUT TYPE="text" NAME="networkdata[address]" VALUE="{$network.address}" {tip text="Wpisz adres sieci i wybierz maskê" trigger="address"}> / <SELECT size="1" title="Prefixlen" name="networkdata[prefix]">{section name=prefixlist loop=$prefixlist.id}<OPTION VALUE="{$prefixlist.id[prefixlist]}"{if $prefixlist.id[prefixlist] eq $network.prefix} SELECTED{/if}>{$prefixlist.value[prefixlist]}</OPTION>{/section}</SELECT>{else}{$network.address}/{$network.prefix}{/if}</NOBR>
		</TD>
		<TD width="2%" rowspan="2">
			<NOBR><IMG src="img/dhcp.gif" border="0" align="absmiddle" ALT=""> <B>Zakres DHCP:</B></NOBR>	
		</TD>
		<TD width="48%" class="fright" rowspan="2">
			{if $unlockedit}<INPUT TYPE="text" NAME="networkdata[dhcpstart]" VALUE="{$network.dhcpstart}" {tip text="Podaj pocz±tek zakresu adresów DHCP (opcjonalnie)" trigger="dhcpstart"}><BR>
			<INPUT TYPE="text" NAME="networkdata[dhcpend]" VALUE="{$network.dhcpend}" {tip text="Podaj koniec zakresu adresów DHCP (opcjonalnie)" trigger="dhcpend"}>{else}
			{$network.dhcpstart}<BR>
			{$network.dhcpend}
			{/if}
		</TD>
	</TR>
	<TR class="light">
		<td width="1%" class="fleft">
			<nobr><img src="img/cmp.gif" border="0" align="absmiddle" ALT=""> <B>Rozmiar sieci:</B>
		</TD>
		<TD width="49%">
			{$network.size} adresów
		</TD>
	</TR>
	<TR CLASS="light">
		<TD WIDTH="1%" CLASS="FLEFT">
			<IMG SRC="img/mac.gif" BORDER="0" ALIGN="asbmiddle" ALT=""> <B>Interfejs:</B>
		</TD>
		<TD COLSPAN="3" CLASS="FRIGHT" WIDTH="99%">
			{if $unlockedit}
			<INPUT TYPE="text" NAME="networkdata[interface]" VALUE="{$network.interface}" {tip text="Podaj interfejs, do którego pod³±czona jest sieæ (opcjonalnie)" trigger="interface"}>
			{else}
			{$network.interface}
			{/if}
		</TD>
	</TR>
	<TR class="light">
		<TD width="2%" class="fleft">
			<nobr><img src="img/gateway.gif" border="0" align="absmiddle" ALT=""> <B>Gateway:</B></nobr>
		</TD>		
		<TD width="48%">
			{if $unlockedit}
			<INPUT TYPE="text" NAME="networkdata[gateway]" VALUE="{$network.gateway}" {tip text="Podaj bramê sieci (opcjonalnie)" trigger="gateway"}> 
			{else}
			{$network.gateway}
			{/if}
		</TD>
		<TD width="2%">
			<nobr><img src="img/dns.gif" border="0" align="absmiddle" ALT=""> <B>Serwery DNS:</B></NOBR>
		</TD>
		<TD width="48%" class="fright">
			{if $unlockedit}
			<INPUT TYPE="text" NAME="networkdata[dns]" VALUE="{$network.dns}" {tip text="Podaj adres podstawowego serwera DNS (opcjonalnie)" trigger="dns"}><BR>
			<INPUT TYPE="text" NAME="networkdata[dns2]" VALUE="{$network.dns2}" {tip text="Podaj adres dodatkowego serwera DNS (opcjonalnie)" trigger="dns2"}>
			{else}
			{$network.dns}<BR>
			{$network.dns2}
			{/if}
		</TD>
	</TR>
	<TR class="light">
		<TD width="2%" class="fleft">
			<nobr><img src="img/wins.gif" border="0" align="absmiddle" ALT=""> <B>Serwer WINS:</B></NOBR>
		</TD>
		<TD width="48%">
			{if $unlockedit}
			<INPUT TYPE="text" NAME="networkdata[wins]" VALUE="{$network.wins}" {tip text="Podaj adres serwera WINS (opcjonalnie)" trigger="wins"}>
			{else}
			{$network.wins}
			{/if}
		</TD>
		<TD width="2%">
			<nobr><img src="img/node.gif" border="0" align="absmiddle" ALT=""> <B>Domena:</B></NOBR>
		</TD>
		<TD width="48%" class="fright">
			{if $unlockedit}
			<INPUT TYPE="text" NAME="networkdata[domain]" VALUE="{$network.domain}" {tip text="Podaj nazwê domenow± sieci (opcjonalnie)" trigger="domain"}>
			{else}
			{$network.domain}
			{/if}
		</TD>
	</TR>
{if $unlockedit}</form>{/if}
	<TR class="light">
		<TD width="100%" class="fbottomu" colspan="4" align="right">
			{if $unlockedit}
			<form name="remap" action="" method="get">
				<A {confirm text="Jeste¶ pewien ¿e chcesz przyznaæ wszystkim komputerom adresy od nowa? Pamiêtaj, ¿e mo¿e to wywo³aæ niez³e zamieszanie w sieci :)" href="?m=netcmp&id=`$network.id`"}>Porz±dkuj sieæ <img src="img/cmp.gif" align="absmiddle" ALT="[ Posortuj ]" border="0"></A><BR>
				<input type="hidden" name="is_sure">
				<input type="hidden" name="m" value="netremap">
				<input type="hidden" name="id" value="{$network.id}">
				<a href="javascript:document.remap.submit()" onClick="return confirmForm(is_sure,'Jeste¶ pewien ¿e chcesz przeadresowaæ sieæ {$network.name} do sieci '+getText(document.remap.mapto.value)+'?','1');">Przeadresuj do sieci:</A> 
					<select size="1" name="mapto" {tip text="Wybierz sieæ, do której chcesz przenie¶æ komputery"}>
						{section name=networks loop=$networks}
						{if $networks[networks].id neq $network.id}
						<option value="{$networks[networks].id}">{$networks[networks].name} ({$networks[networks].address}/{$networks[networks].prefix})</option>
						{/if}
						{/section}
					</select>
				<img src="img/remap.gif" border="0" ALT="" align="absmiddle"><BR>
				<a href="javascript:document.netedit.submit()" ACCESSKEY="S">Zapisz <IMG src="img/save.gif" ALT="[ Zapisz ]" align="absmiddle" border="0"></a>
				<A href="?m=netdel&id={$network.id}" onClick="return confirmLink(this,'Jeste¶ pewien ¿e chcesz usun±æ sieæ \'{$network.name|upper}\'?')">Usuñ <img src="img/delete.gif" align="absmiddle" ALT="[ Usuñ ]" border="0"></A>
				<a href="?m=netinfo&id={$network.id}">Anuluj <img src="img/cancel.gif" align="absmiddle" ALT="[ Anuluj ]" border="0"></A></TD></form>
			{else}	
			<A href="?m=netedit&id={$network.id}" ACCESSKEY="E">Edytuj <img src="img/edit.gif" align="absmiddle" ALT="[ Edytuj ]" border="0"></A>
			<A href="?m=netdel&id={$network.id}" onClick="return confirmLink(this,'Jeste¶ pewien ¿e chcesz usun±æ sieæ \'{$network.name|upper}\'?')">Usuñ <img src="img/delete.gif" align="absmiddle" ALT="[ Usuñ ]" border="0"></A>
		</TD>
			{/if}
	</TR>
	{if $network.page}
	<TR class="dark">
		<TD width="50%" class="fleftu" colspan="2">
			<img src="img/ip.gif" align="absmiddle" ALT="" border="0"> <B>Wykorzystanie adresów IP:</B>
		</TD>
		<TD WIDTH="50%" CLASS="frightu" COLSPAN="2" ALIGN="RIGHT">
			<B>{if $network.page > 1}<A HREF="?m=net{if $unlockedit}edit{else}info{/if}&id={$network.id}&page={math equation="x - 1" x=$network.page}">&laquo;&laquo;&laquo;</A>{else}<FONT CLASS="BLEND">&laquo;&laquo;&laquo;</FONT>{/if} Strona {$network.page} z {$network.pages} {if $network.page < $network.pages}<A HREF="?m=net{if $unlockedit}edit{else}info{/if}&id={$network.id}&page={math equation="x + 1" x=$network.page}">&raquo;&raquo;&raquo;</A>{else}<FONT CLASS="BLEND">&raquo;&raquo;&raquo;</FONT>{/if}</B>
		</TD>		
	</TR>
	<TR>
		<TD width="100%" class="fall" colspan="4">
			<table width="100%" cellpadding="3">
				{cycle values="#DFD5BD,#EBE4D6" print=false}
				{section name=network loop=$network.nodes.id max=$network.rows}
				<TR>
					{section name=subnetwork loop=$network.nodes.address start=$smarty.section.network.index step=$network.rows}
					<TD bgcolor="{cycle}" {cycle print=false}align="center" width="25%" onmouseover="setPointerTD(this, '#CCFFCC')" onmouseout="setPointerTD(this, '{cycle}')" {cycle print=false}valign="middle"{if $network.nodes.id[networkip]} class="blend"{/if}{if !$network.nodes.ownerid[subnetwork] && $network.nodes.netdev[subnetwork]} onclick="return self.location.href='?m=netdevinfo&id={$network.nodes.netdev[subnetwork]}'"}{else}{if $network.nodes.id[subnetwork]} onclick="return self.location.href='?m=userinfo&id={$network.nodes.ownerid[subnetwork]}#{$network.nodes.id[subnetwork]}'"{else}{if !$network.nodes.name[subnetwork]} onclick="return self.location.href='?m=nodeadd&preip={$network.nodes.address[subnetwork]}'"{/if}{/if}{/if}>
					<img src="img/node.gif" align="left" ALT="" border="0">
					{if !$network.nodes.ownerid[subnetwork] && $network.nodes.netdev[subnetwork]}<a href="?m=netdevinfo&id={$network.nodes.netdev[subnetwork]}"><font class="blend">{$network.nodes.name[subnetwork]}</font></A>{else}{if $network.nodes.id[subnetwork]}<a href="?m=userinfo&id={$network.nodes.ownerid[subnetwork]}#{$network.nodes.id[subnetwork]}"><font class="blend">{$network.nodes.name[subnetwork]}</font></A>{else}{if $network.nodes.name[subnetwork]}<FONT CLASS="blend">{$network.nodes.name[subnetwork]}</FONT>{else}<a href="?m=nodeadd&preip={$network.nodes.address[subnetwork]}">{$network.nodes.address[subnetwork]}</A>{/if}{/if}{/if}
					
				</TD>
				{/section}
				{cycle print=false}
				</TR>
				{/section}
				<TR class="light">
					<TD CLASS="fleftu" COLSPAN="2">
						<B>{if $network.page > 1}<A HREF="?m=net{if $unlockedit}edit{else}info{/if}&id={$network.id}&page={math equation="x - 1" x=$network.page}">&laquo;&laquo;&laquo;</A>{else}<FONT CLASS="BLEND">&laquo;&laquo;&laquo;</FONT>{/if} Strona {$network.page} z {$network.pages} {if $network.page < $network.pages}<A HREF="?m=net{if $unlockedit}edit{else}info{/if}&id={$network.id}&page={math equation="x + 1" x=$network.page}">&raquo;&raquo;&raquo;</A>{else}<FONT CLASS="BLEND">&raquo;&raquo;&raquo;</FONT>{/if}</B>
					</TD>
					<TD ALIGN="RIGHT" CLASS="frightu" COLSPAN="2">
						<B>Razem: {$network.assigned} (na tej stronie: {$network.pageassigned|default:"0"}, dostêpne: {$network.free})</B>
					</TD>
				</TR>
			</table>
		</TD>
	</TR>
	{/if}
</TABLE>
{include file="footer.html"}
