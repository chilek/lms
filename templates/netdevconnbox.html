<!--// $Id$ //-->
<table style="width: 100%;" cellpadding="3">
	<tr class="DARK">
		<td style="width: 100%; text-align: left; white-space: nowrap;" class="fall hand" onClick="showOrHide('devicedevices');">
			<img src="img/mac.gif" alt="">
			<span class="bold">{t a=$netdevlist|@count}Connected devices ($a):{/t}</span>
		</td>
	</tr>
	<tr id="devicedevices" style="display:none;">
		<td class="fall" style="width: 100%;">
			<table style="width: 100%;" cellpadding="5" cellspacing="0">
	<tr class="dark">
		<td class="fleftu" style="width: 97%;">
			<img src="img/netdev.gif" alt=""> <span class="bold">{trans("Name")} / {trans("Producer")}:</span><br />
			<img src="img/home.gif" alt=""> {trans("Location:")}
		</td>
		<td class="fbt" style="width: 1%; text-align: right; white-space: nowrap;">
			{trans("Port")}:<br />
			{trans("ID:")}
		</td>
		<td class="fbt" style="width: 1%; white-space: nowrap;">
			<img src="img/netdev_takenports.gif" alt=""> {trans("Dest. port")}:<br />
			<img src="img/port.gif" alt=""> {trans("Ports (used):")}
		</td>
		<td class="frightu" style="width: 1%;">
			&nbsp;
		</td>
	</tr>
	{cycle values="light,lucid" print=false}
	{section name=netdevlist loop=$netdevlist start=$start}
	<tr class="{cycle}" onmouseover="addClass(this, 'highlight')" onmouseout="removeClass(this, 'highlight')">
		<td style="width: 97%; vertical-align: top; white-space: nowrap;" onClick="return self.location.href='?m=netdevinfo&id={$netdevlist[netdevlist].id}';">
			<img src="img/netdev.gif" alt=""> <a name="{$netdevlist[netdevlist].id}"><span class="bold">{$netdevlist[netdevlist].name} {if $netdevlist[netdevlist].producer}/ {$netdevlist[netdevlist].producer}{/if}</span></a><br />
			<img src="img/home.gif" alt=""> {$netdevlist[netdevlist].location}
		</td>
		<td style="width: 1%; text-align: right; white-space: nowrap;" onClick="return self.location.href='?m=netdevinfo&id={$netdevlist[netdevlist].id}';">
			<img src="img/empty.gif" height="16">[{if $netdevlist[netdevlist].srcport}{$netdevlist[netdevlist].srcport}{/if}]<br />
			({$netdevlist[netdevlist].id|string_format:"%04d"})
		</td>
		<td style="width: 1%; white-space: nowrap;">
			<span id="devlinkproperties_{$netdevlist[netdevlist].id}" onClick="javascript:netlinkpropertieschoosewin('{$netdevinfo.id}', '{$netdevlist[netdevlist].id}', true);">
				<img src="img/{if $netdevlist[netdevlist].linktype == 1}wireless.gif{elseif $netdevlist[netdevlist].linktype == 2}netdev_takenports.gif{else}netdev_takenports.gif{/if}" alt="[ {trans("Change connection properties")} ]" title="[ {trans("Change connection properties")} ]" {tip trigger="devlinkproperties_$netdevlist[netdevlist].id" text="<span style=\"white-space: nowrap;\">{trans("Link type:")} {$_LINKTYPES[$netdevlist[netdevlist].linktype]}<br />{trans("Link speed:")} {$_LINKSPEEDS[$netdevlist[netdevlist].linkspeed]}</span>"}>
			</span>
			<span onClick="return self.location.href='?m=netdevinfo&id={$netdevlist[netdevlist].id}';">
			[{if $netdevlist[netdevlist].dstport}{$netdevlist[netdevlist].dstport}{/if}]
			<br /><img src="img/port.gif" alt=""> {$netdevlist[netdevlist].ports} ({$netdevlist[netdevlist].takenports})
			</span>
		</td>
		<td style="width: 1%; text-align: right;">
			<a href="?m=netdevedit&action=disconnect&id={$netdevinfo.id}&devid={$netdevlist[netdevlist].id}" OnClick="return confirmLink(this, '{trans("Are you sure, you want to delete that connection?")}');"><img src="img/delete.gif" {tip text="Delete connection"}></a>
		</td>
	</tr>
	{sectionelse}
	<tr>
		<td colspan="4" style="text-align: center;">
			<P>&nbsp;</P>
			<P><span class="bold">{trans("No such connected devices.")}</span></P>
			<P>&nbsp;</P>
		</td>
	</tr>
	{/section}
	<tr class="light">
		<td style="width: 100%; text-align: center; white-space: nowrap;" class="ftop" colspan="4">
			{if $netdevinfo.ports eq $netdevinfo.takenports}
			<span class="bold">{trans("All ports in that device are in use.")}</span>
			{elseif !$restnetdevlist}
			<span class="bold">{trans("No such devices for connection.")}</span>
			{else}
			<form method="GET" action="?m=netdevedit" name="connect">
			<input type="submit" class="hiddenbtn">
			<input type="HIDDEN" name="m" value="netdevedit">
			<input type="HIDDEN" name="id" value="{$netdevinfo.id}">
			<input type="HIDDEN" name="action" value="connect">
			<table style="width: 100%;">
				<tr>
					<td style="width: 99%; white-space: nowrap;">
						<span class="bold">{trans("Connect")}:</span>
						{trans("Device:")}<select name="netdev" style="width: 300px" {tip trigger="link" text="Select from list device for connection"}>
						{section name=restnetdevlist loop=$restnetdevlist}
							{assign var=netdevname value=$restnetdevlist[restnetdevlist].name}
							{if $restnetdevlist[restnetdevlist].producer}{assign var=netdevname value=$netdevname|cat:" / "|cat:$restnetdevlist[restnetdevlist].producer}{/if}
							{if $restnetdevlist[restnetdevlist].location}{assign var=netdevname value=$netdevname|cat:" ("|cat:$restnetdevlist[restnetdevlist].location|cat:")"}{/if}
							<option value="{$restnetdevlist[restnetdevlist].id}"{if $connect.id == $restnetdevlist[restnetdevlist].id} selected{/if}>{$netdevname|truncate:120:"...":true}</option>
						{/section}
						</select>
						<label for="srcport">{trans("Port")}:</label><input name="srcport" id="srcport" value="{if $connect.srcport}{$connect.srcport}{/if}" size="2" {tip text="Enter port number in device for connection (optional)" trigger="srcport"}>
						<label for="dstport">{trans("Dest. port")}:</label><input name="dstport" id="dstport" value="{if $connect.dstport}{$connect.dstport}{/if}" size="2" {tip text="Enter port number in device to which device will be connected (optional)" trigger="dstport"}>
						<select name="linktype" id="connboxlinktype" {tip trigger="linktype" text="Select link type"}>
							{foreach from=$_LINKTYPES item=item key=key}
							<option value="{$key}"{if $key==$devlinktype} selected{/if}>{$item}</option>
							{/foreach}
						</select>
						<select name="linkspeed" id="connboxlinkspeed" {tip trigger="linkspeed" text="Select link speed"}>
							{foreach from=$_LINKSPEEDS item=item key=key}
								<option value="{$key}"{if $key==$devlinkspeed || (!$devlinkspeed && $key==100000)} selected{/if}>{$item}</option>
							{/foreach}
						</select>
					</td>
					<td style="width: 1%; white-space: nowrap;">
						<a href="javascript:document.connect.submit(); ">{trans("Connect")}</a> <img src="img/save.gif" alt="">
					</td>
				</tr>
			</table>
			</form>
			{/if}
		</td>
	</tr>
</table>
               </td>
       </tr>
</table>
<script type="text/javascript">
<!--
if (getCookie('devicedevices') == '1')
{
	document.getElementById('devicedevices').style.display = '';
}
//-->
</script>
