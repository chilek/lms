{include file="header.html"}
{include file="balanceheader.html"}
<!--// $Id$ //-->
<SCRIPT LANGUAGE="JavaScript" SRC="img/calendar.js"></SCRIPT>
{literal}
<SCRIPT LANGUAGE=JavaScript" TYPE="text/javascript">
<!--
	function AddBalance()
	{
		var group = document.forms['addbalance'].elements['addbalance[type]'];
	
		for(var i=0; i<group.length; i++)
			if(group[i].checked) 
			{
				var type = group[i].value;
				break;
			}
		
		if(i==group.length) 
		{
			alert('Nie wybra³e¶ typu operacji!');
			return;
		}

		if((type==3 || type==4) && document.forms['addbalance'].elements['selectededit'].value==0)
		{
			alert('Nie zaznaczy³e¶ u¿ytkowników!');
			return;
		}
		
		document.forms['addbalance'].submit();
	}

	function CheckCharge(i)
	{
		document.forms['addbalance'].elements['addbalance[type]'][i].checked = true;
	}

	function CountSelectedUsers()
	{
		var j = 0;
		for (var i = 0; i < document.forms['addbalance'].elements[0].length; i++) {
			if (document.forms['addbalance'].elements[0].options[i].selected)
				j++;
			}
		document.forms['addbalance'].selectededit.value = j;
	}
//-->
</SCRIPT>
{/literal}
<H1>{$layout.pagetitle}</H1>
<P><FORM NAME="addbalance" METHOD="POST" ACTION="?m=balanceadd">
<TABLE width="100%" cellpadding="3">
	<TR>
		<TD WIDTH="1%" VALIGN="TOP">
			<TABLE width="100%" cellpadding="3">
				<TR CLASS="DARK">
					<TD CLASS="FALL">
						<IMG SRC="img/user.gif" ALT="" ALIGN="absmiddle" BORDER="0">&nbsp;<B>U¿ytkownicy:</B>
					</TD>
				</TR>
				<TR CLASS="LIGHT">
					<TD CLASS="FALL">
						Wybierz u¿ytkowników których dotyczyæ ma ta operacja finansowa. Je¿eli typ operacji nie jest obci±¿eniem b±d¼ wp³at± u¿ytkownika, system zignoruje listê u¿ytkowników.<BR><BR>
						<SELECT size="20" name="addbalance[muserid][]" onChange="javascript:CountSelectedUsers();" multiple>
							{section name=users loop=$users}
							<OPTION value="{$users[users].id}">{$users[users].username|truncate:25:" ..."} ({$users[users].id|string_format:"%04d"})</OPTION>
							{/section}
						</SELECT>
						Zaznaczonych: <INPUT TYPE="edit" NAME="selectededit" VALUE="0" SIZE="5" STYLE="border:0; background-color: #DFD5BD;" readonly></INPUT>
					</TD>
				</TR>
			</TABLE>
		</TD>
		<TD WIDTH="99%" VALIGN="TOP">
			<TABLE WIDTH="100%" CELLPADDING="3">
				<TR CLASS="DARK">
					<TD CLASS="FALL" COLSPAN="3">
						<IMG SRC="img/money.gif" ALT="" ALIGN="absmiddle" BORDER="0">&nbsp;<B>Typ operacji:</B>
					</TD>
				</TR>
				<TR CLASS="LIGHT">
					<TD CLASS="FALL" COLSPAN="3">
						<P><INPUT TYPE="radio" NAME="addbalance[type]" VALUE="1" STYLE="border-width: 0pt; background-color: #DFD5BD;" {if $operation == 1}checked{/if}> <B><A href="javascript:CheckCharge(0);">przychód</A></B><BR>pieni±dze zarobione przez sieæ, np. w wyniku sprzeda¿y osprzêtu sieciowego u¿ytkownikowi</P>
						<P><INPUT TYPE="radio" NAME="addbalance[type]" VALUE="2" STYLE="border-width: 0pt; background-color: #DFD5BD;" {if $operation == 2}checked{/if}> <B><A href="javascript:CheckCharge(1);">rozchód</A></B><BR>pieni±dze wydane przez sieæ, np. na zakup osprzêtu sieciowego, op³aty abonamentowe dla ISP, etc.</P>
						<P><INPUT TYPE="radio" NAME="addbalance[type]" VALUE="3" STYLE="border-width: 0pt; background-color: #DFD5BD;" {if $operation == 3}checked{/if}> <B><A href="javascript:CheckCharge(2);">wp³ata u¿ytkownika</A></B><BR>pieni±dze które wp³aci³ u¿ytkownik na poczet abonamentu</P>
						<P><INPUT TYPE="radio" NAME="addbalance[type]" VALUE="4" STYLE="border-width: 0pt; background-color: #DFD5BD;" {if $operation == 4}checked{/if}> <B><A href="javascript:CheckCharge(3);">obci±¿enie u¿ytkownika</A></B><BR>obci±¿enie konta u¿ytkownika, np. dodatkow± kwot± abonamentow±</P>
					</TD>
				</TR>
				<TR><TD>&nbsp;</TD></TR>
				<TR CLASS="DARK">
					<TD CLASS="FALL" COLSPAN="3">
						<IMG SRC="img/money.gif" ALT="" ALIGN="absmiddle" BORDER="0">&nbsp;<B>Kwota i opis:</B>
					</TD>
				</TR>
				<TR CLASS="LIGHT">
					<TD WIDTH="1%" CLASS="FLEFT">
						<IMG SRC="img/value.gif" ALT="" ALIGN="absmiddle" BORDER="0">
					</TD>
					<TD WIDTH="1%">
						<B>Kwota:</B>
					</TD>
					<TD WIDTH="98%" CLASS="FRIGHT">
						<INPUT TYPE="TEXT" NAME="addbalance[value]" VALUE="{$value}" SIZE="15" {tip text="Podaj kwotê operacji"}>&nbsp;z³<BR>
					</TD>
				</TR>
				<TR CLASS="LIGHT">
					<TD WIDTH="1%" CLASS="FLEFT">
						<IMG SRC="img/tax.gif" ALT="" ALIGN="absmiddle" BORDER="0">
					</TD>
					<TD WIDTH="1%">
						<B>VAT:</B>
					</TD>
					<TD WIDTH="98%" CLASS="FRIGHT">
						<SELECT size="1" name="addbalance[taxvalue]" value="{$taxvalue}" {tip text="Podaj stawkê VAT operacji"}>
							<OPTION value="22" {if $taxvalue == 22}selected{/if}>22%</OPTION>
							<OPTION value="7" {if $taxvalue == 7}selected{/if}>7%</OPTION>
							<OPTION value="0" {if $taxvalue == 0}selected{/if}>0%</OPTION>
							<OPTION value="zw." {if !$taxvalue}selected{/if}>zw.</OPTION>
						</SELECT>
					</TD>
				</TR>
				<TR CLASS="LIGHT">
					<TD WIDTH="1%" class="FLEFT">
						<IMG SRC="img/calendar.gif" ALT="" ALIGN="absmiddle" BORDER="0">
					</TD>
					<TD WIDTH="1%">
						<B>Data:</B>
					</TD>
					<TD WIDTH="98%" class="fright">
						<INPUT TYPE="TEXT" NAME="addbalance[time]" VALUE="{$time}" SIZE="15" MAXSIZE="15" OnClick="javascript:cal1.popup();" {tip text="Wpisz datê w formacie 'rrrr/mm/dd gg:mm' (pole puste oznacza datê dzisiejsz±) albo kliknij aby wybraæ datê z kalendarza"}>
					</TD>
				</TR>
				<TR CLASS="LIGHT">
					<TD WIDTH="1%" class="FLEFT">
						<IMG SRC="img/usercomment.gif" ALT="" ALIGN="absmiddle" BORDER="0">
					</TD>
					<TD WIDTH="1%">
						<B>Opis:</B>
					</TD>
					<TD WIDTH="98%" class="fright">
						<INPUT TYPE="TEXT" NAME="addbalance[comment]" VALUE="{$comment}" SIZE="50" {tip text="Wpisz komentarz"}>
					</TD>
				</TR>

				<TR CLASS="LIGHT">
					<TD CLASS="fbottomu" ALIGN="right" COLSPAN="3">
						<A ACCESSKEY="W" HREF="javascript:AddBalance();">Wykonaj <IMG SRC="img/save.gif" BORDER="0" ALT=""></A>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
</TABLE>
</FORM>

<SCRIPT>
<!--
var cal1 = new calendar(document.forms['addbalance'].elements['addbalance[time]']);
//-->
</SCRIPT>

</P>
{include file="footer.html"}
