<!--// $Id$ //-->
<FORM NAME="editnode" ID="editnode" METHOD="POST" ACTION="?m=nodeedit&id={$nodeinfo.id}">
<INPUT type="submit" class="hiddenbtn">
<INPUT TYPE="hidden" NAME="nodeedit[id]" VALUE="{$nodeinfo.id}">
<TABLE WIDTH="100%" CELLPADDING="3">
	<TR CLASS="DARK">
		<TD WIDTH="1%" CLASS="FLEFTU">
			<IMG SRC="img/node.gif" ALT="">
		</TD>
		<TD WIDTH="99%" CLASS="FRIGHTU" COLSPAN="2">
			<INPUT TYPE="TEXT" NAME="nodeedit[name]" VALUE="{$nodeinfo.name}" MAXLENGTH="32" size="30" {tip text="Enter node name" trigger="name" bold=1}>
			<B>({$nodeinfo.id|string_format:"%04d"})</B>
		</TD>
	</TR>
        <TR class="LIGHT">
                <TD WIDTH="100%" COLSPAN="3" CLASS="flr">
		        <TABLE WIDTH="100%" CELLPADDING="0">
				<TR CLASS="LIGHT">
					<TD WIDTH="50%" style="vertical-align:top;">
						<TABLE WIDTH="100%" CELLPADDING="3">
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/ip.gif" ALT="{t}IP address:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
                       <INPUT TYPE="TEXT" NAME="nodeeditipaddr" VALUE="{$nodeinfo.ip}" {tip text="Enter IP address" trigger="ipaddr"}> <a href="javascript: void(0);" onClick="return ipchoosewin(document.editnode.nodeeditipaddr,{$nodeinfo.netid});" {tip text="Click to select IP from the list"}>&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/ip_pub.gif" ALT="{t}Pub. IP address:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
                       <INPUT TYPE="TEXT" NAME="nodeeditipaddrpub" {if $nodeinfo.ip_pub != "0.0.0.0"}VALUE="{$nodeinfo.ip_pub}"{/if} {tip text="Enter IP address (optional)" trigger="ipaddr_pub"}> <a href="javascript: void(0);" onClick="return ipchoosewin(document.editnode.nodeeditipaddrpub,{$nodeinfo.netid});" {tip text="Click to select IP from the list"}>&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/mac.gif" ALT="{t}MAC address:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2" NOWRAP>
			<TABLE width="100%" cellpadding="1" cellspacing="0">
				{foreach from=$nodeinfo.macs item=item key=key}
				<TR>
					<TD width="100%"><INPUT TYPE="TEXT" NAME="nodeedit[macs][{$key}]" VALUE="{$item}" {tip text="Enter MAC address" trigger="mac`$key`"}> <a href="javascript: void(0);" onClick="return macchoosewin(document.editnode.elements['nodeedit[macs][{$key}]']);" {tip text="Click to select MAC from the list"}>&raquo;&raquo;&raquo;</A></TD>
				</TR>
				{/foreach}
			</TABLE>
			<A href="javascript: newmac()">{t}Add MAC address{/t} &raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/passwd.gif" ALT="{t}Password:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
			<INPUT TYPE="TEXT" NAME="nodeedit[passwd]" VALUE="{$nodeinfo.passwd}" {tip text="Enter password (optional)" trigger="passwd"}> <a href="javascript: GenPasswd();" {tip text="Click to generate random password"}>&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/home.gif" ALT="{t}Location:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2" NOWRAP>
						<TABLE width="100%" cellpadding="2" cellspacing="0">
						    <TR>
							<TD width="1%" NOWRAP>{t}Address:{/t}</TD>
							<TD width="99%"><INPUT TYPE="text" size="30" value="{$nodeinfo.location_address}" name="nodeedit[location_address]" id="location_address" {tip text="Enter node location (optional)" trigger="location_address"}></TD>
						    </TR>
						    <TR>
							<TD width="1%" NOWRAP>{t}City:{/t}</TD>
							<TD width="99%"><INPUT TYPE="TEXT" SIZE="30" VALUE="{$nodeinfo.location_city}" NAME="nodeedit[location_city]" id="location_city" {tip text="Enter city (optional)" trigger="location_city"}></TD>
						    </TR>
						    <TR>
							<TD width="1%" NOWRAP>{t}Zip:{/t}</TD>
							<TD width="99%"><INPUT TYPE="text" SIZE="10" VALUE="{$nodeinfo.location_zip}" NAME="nodeedit[location_zip]" id="location_zip" {tip text="Enter zip code (optional)" trigger="location_zip"}></TD>
							{if $nodeinfo.zipwarning}
							<INPUT TYPE="HIDDEN" NAME="nodeedit[zipwarning]" VALUE="1">
							{/if}
						    </TR>
						{if $cstateslist}
						    <TR>
							<TD width="1%" NOWRAP>{t}State:{/t}</TD>
							<TD width="99%">
							    <SELECT NAME="nodeedit[stateid]" {tip text="Select country state (optional)" trigger="stateid"}>
								<OPTION value="0"></OPTION>
								{foreach from=$cstateslist item=item key=key}
								<OPTION value="{$key}"{if $key==$nodeinfo.stateid} SELECTED{/if}>{$item.name}</OPTION>
								{/foreach}
							    </SELECT>
							</TD>
						    </TR>
						{/if}
						</TABLE>
						<script type="text/javascript">
							new AutoSuggest(document.forms['editnode'],document.getElementById('location_address'),'?m=nodeadd&ajax=1&mode=address&what=',0);
							new AutoSuggest(document.forms['editnode'],document.getElementById('location_zip'),'?m=nodeadd&ajax=1&mode=zip&what=',0);
							new AutoSuggest(document.forms['editnode'],document.getElementById('location_city'),'?m=nodeadd&ajax=1&mode=city&what=',0);
						</script>
		</TD>
	</TR>
{*
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/network.gif" ALT="{t}Network:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
			<B><A HREF="?m=netinfo&id={$nodeinfo.netid}">{$nodeinfo.netname}</A></B>
		</TD>
	</TR>
*}
{if $netdevices}
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/netdev.gif" ALT="{t}Net devices:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2" NOWRAP>
			<SELECT SIZE="1" NAME="nodeedit[netdev]" {tip text="Select net device from list" trigger="netdev"} style="max-width:250px;">
				<OPTION VALUE="0" {if ! $nodeinfo.netdev}SELECTED{/if}>- {t}no device{/t} -</OPTION>
				{section name="netdev" loop=$netdevices}
				<OPTION VALUE="{$netdevices[netdev].id}" {if $nodeinfo.netdev == $netdevices[netdev].id} SELECTED {/if}>{$netdevices[netdev].name} {if $netdevices[netdev].producer}/ {$netdevices[netdev].producer}{/if} {if $netdevices[netdev].location}({$netdevices[netdev].location }){/if}</OPTION>
				{/section}
			</SELECT>
			<INPUT type="text" name="nodeedit[port]" value="{if $nodeinfo.port}{$nodeinfo.port}{/if}" size="2" {tip text="Enter port number in device (optional)" trigger="port"}>
			<INPUT type="checkbox" name="nodeedit[linktype]" id="linktype" value="1"{if $nodeinfo.linktype} CHECKED{/if}><A HREF="javascript:checkElement('linktype')"><IMG src="img/wireless.gif" alt="{t}wireless{/t}" {tip text="wireless"}></A>
		</TD>
	</TR>
{/if}
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/customer.gif" ALT="{t}Customer:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2" NOWRAP>
			{if $customers}
			<SELECT SIZE="1" NAME="nodeedit[customerid]" {tip text="Assign node to customer"} style="max-width:160px;" onChange="document.editnode.elements['nodeedit[ownerid]'].value=this.value">
				{foreach from=$customers item=c}
				<OPTION VALUE="{$c.id}"{if $nodeinfo.ownerid eq $c.id} SELECTED{/if}>{$c.customername|truncate:40:"...":true} ({$c.id|string_format:"%04d"})</OPTION>
				{/foreach}
			</SELECT>
			{t}or Customer ID:{/t}
			{/if}
			<INPUT TYPE="TEXT" NAME="nodeedit[ownerid]" VALUE="{$nodeinfo.ownerid}" SIZE="5"{if $customers} onChange="reset_customer()" onfocus="reset_customer()"{/if} {tip text="Enter customer ID" trigger="ownerid"}>
			<A href="javascript: void(0);" onClick="return customerchoosewin(document.editnode.elements['nodeedit[ownerid]']);" {tip text="Click to search customer"}>{t}Search{/t}&nbsp;&raquo;&raquo;&raquo;</A>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/options.gif" ALT="">
		</TD>
		<TD WIDTH="98%" COLSPAN="2" NOWRAP>
			<A HREF="javascript:checkElement('chkmac')">{t}MAC checking{/t}:</A><INPUT TYPE="checkbox" NAME="nodeedit[chkmac]" VALUE="1" ID="chkmac" {tip text="Enable/disable MAC address checking" trigger="chkmac"}{if !isset($nodeinfo.chkmac) || $nodeinfo.chkmac} checked{/if}>&nbsp;
			<A HREF="javascript:checkElement('duplex')">{t}Half duplex{/t}:</A><INPUT TYPE="checkbox" NAME="nodeedit[halfduplex]" VALUE="1" ID="duplex" {if $nodeinfo.halfduplex} checked{/if} {tip text="Select transmission mode"}> 
		</TD>
	</TR>
                                	</TABLE>
				</TD>
				<TD WIDTH="50%" style="vertical-align:top;">
					<TABLE WIDTH="100%" CELLPADDING="3">
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/info1.gif" ALT="{t}Description:{/t}">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
                       <TEXTAREA NAME="nodeedit[info]" COLS="50" ROWS="5" {tip text="Enter additional information (optional)"}>{$nodeinfo.info}</TEXTAREA>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/{if ! $nodeinfo.access}no{/if}access.gif" ALT="">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
			<SELECT SIZE="1" NAME="nodeedit[access]" {tip text="Select node status" trigger="access"}>
				<OPTION VALUE="1"{if $nodeinfo.access} SELECTED{/if}>{t}connected<!singular>{/t}</OPTION>
				<OPTION VALUE="0"{if ! $nodeinfo.access} SELECTED{/if}>{t}disconnected<!singular>{/t}</OPTION>
			</SELECT>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/warning{if !$nodeinfo.warning}off{else}on{/if}.gif" ALT="">
		</TD>
		<TD WIDTH="99%" COLSPAN="2">
			<SELECT SIZE="1" NAME="nodeedit[warning]" {tip text="Set notice for node"}>
				<OPTION VALUE="1"{if $nodeinfo.warning} SELECTED{/if}>{t}enabled{/t}</OPTION>
				<OPTION VALUE="0"{if ! $nodeinfo.warning} SELECTED{/if}>{t}disabled{/t}</OPTION>
			</SELECT>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="1%">
			<IMG SRC="img/users.gif" ALT="">
		</TD>
		<TD WIDTH="1%">
			<B>{t}Created:{/t}<BR>
			{t}Modified:{/t}</B>
		</TD>
		<TD WIDTH="98%">
			{$nodeinfo.createdby}, {$nodeinfo.creationdateh}<BR>
			{if $nodeinfo.moddate}{$nodeinfo.modifiedby}, {$nodeinfo.moddateh}{else}-{/if}
		</TD>
	</TR>
	                                        </TABLE>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>
	<TR CLASS="LIGHT">
		<TD WIDTH="100%" CLASS="FBOTTOMU" COLSPAN="3" ALIGN="RIGHT">
			<A HREF="javascript:document.editnode.submit();" ACCESSKEY="s">{t}Submit{/t} <IMG SRC="img/save.gif" alt=""></A>
			<A HREF="?m=nodeinfo&id={$nodeinfo.id}">{t}Cancel{/t} <IMG SRC="img/cancel.gif" alt=""></A>
		</TD>
	</TR>
</TABLE>
</FORM>
{literal}
<SCRIPT type="text/javascript">
<!--
	document.forms['editnode'].elements['nodeedit[name]'].focus();

	function GenPasswd()
	{
		if(! confirm('{/literal}{t}Are you sure, you want to generate new password?{/t}{literal}'))
			return;

		var passwd = new Array();
		var items = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
		var length = {/literal}{$_config.phpui.nodepassword_length|default:"16"}{literal};
		if(length > 32) length = 32;

		for(var i=0; i<length; i++)
		{
			n = Math.floor(Math.random() * items.length);
			passwd[i] = items.substring(n, n+1);
		}

		document.forms['editnode'].elements['nodeedit[passwd]'].value = passwd.join("");
	}

	function newmac()
	{
		document.editnode.action += '&newmac=1';
		document.editnode.submit();
	}

	function reset_customer()
    {
        var val;
        if (val = document.forms['editnode'].elements['nodeedit[ownerid]'].value)
	        document.forms['editnode'].elements['nodeedit[customerid]'].value = val;
	}
//-->
</SCRIPT>
{/literal}

