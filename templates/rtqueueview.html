{include file="header.html"}
<!-- $Id$ -->
<H1><B>{$layout.pagetitle}</B></H1>
<TABLE cellpadding="3" WIDTH="100%">
	<TR class="dark" {tip text="Click on column name to change sorting order"}>
		<TD class="fleftu" colspan="2" WIDTH="1%" NOWRAP>
			<IMG src="img/ticket.gif" alt="">&nbsp;<a href="?m={$layout.module}&id={$queuedata.id}&s={$queuedata.state}&o=ticketid{if $queuedata.direction eq "asc" && $queuedata.order eq "ticketid"},desc{/if}"><B>{t}ID:{/t}</B></A> {if $queuedata.order eq "ticketid"}<IMG SRC="img/{if $queuedata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}<BR>
			<IMG src="img/calendar.gif" alt="">&nbsp;<a href="?m={$layout.module}&id={$queuedata.id}&s={$queuedata.state}&o=createtime{if $queuedata.direction eq "asc" && $queuedata.order eq "createtime"},desc{else},asc{/if}">{t}Create time:{/t}</A>{if $queuedata.order eq "createtime"}<IMG SRC="img/{if $queuedata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</TD>
		<TD class="fbt" WIDTH="97%">
			<a href="?m={$layout.module}&id={$queuedata.id}&s={$queuedata.state}&o=subject{if $queuedata.direction eq "asc" && $queuedata.order eq "subject"},desc{/if}"><B>{t}Subject:{/t}</B></A> {if $queuedata.order eq "subject"}<IMG SRC="img/{if $queuedata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}<BR>
			<a href="?m={$layout.module}&id={$queuedata.id}&s={$queuedata.state}&o=requestor{if $queuedata.direction eq "asc" && $queuedata.order eq "requestor"},desc{/if}">{t}Submitter:{/t}</A> {if $queuedata.order eq "requestor"}<IMG SRC="img/{if $queuedata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</TD>
		<TD class="fbt" WIDTH="1%" NOWRAP>
			<a href="?m={$layout.module}&id={$queuedata.id}&s={$queuedata.state}&o=owner{if $queuedata.direction eq "asc" && $queuedata.order eq "owner"},desc{/if}"><B>{t}Owner:{/t}</B></A> {if $queuedata.order eq "owner"}<IMG SRC="img/{if $queuedata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}<BR>
			<a href="?m={$layout.module}&id={$queuedata.id}&s={$queuedata.state}&o=lastmodified{if $queuedata.direction eq "asc" && $queuedata.order eq "lastmodified"},desc{/if}">{t}Last modified:{/t}</A> {if $queuedata.order eq "lastmodified"}<IMG SRC="img/{if $queuedata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</TD>
		<TD class="frightu" WIDTH="1%" NOWRAP>
			<B>{t}Total:{/t} {$queuedata.total|default:"0"}</B>
		</TD>
	</TR>
	<TR class="DARK">
		<TD class="fall" colspan="5">
			<FORM method="GET" action="?m=rtqueueview" name="filter">
				<INPUT type="submit" class="hiddenbtn">
				<INPUT type="HIDDEN" name="m" value="rtqueueview">
				<INPUT type="HIDDEN" name="id" value="{$queuedata.id}">
				<INPUT type="HIDDEN" name="page" value="1">
				<B>{t}Filter:{/t} </B> {t}Status:{/t}
				<SELECT size="1" name="s" OnChange="document.filter.submit();">
					<OPTION value=""{if $queuedata.state eq ""} SELECTED{/if}>- {t}all{/t} -</OPTION>
					<OPTION value="0"{if $queuedata.state eq "0"} SELECTED{/if}>{t}new{/t}</OPTION>
					<OPTION value="1"{if $queuedata.state eq "1"} SELECTED{/if}>{t}opened{/t}</OPTION>
					<OPTION value="2"{if $queuedata.state eq "2"} SELECTED{/if}>{t}resolved{/t}</OPTION>
					<OPTION value="3"{if $queuedata.state eq "3"} SELECTED{/if}>{t}dead{/t}</OPTION>
					<OPTION value="-1"{if $queuedata.state eq "-1"} SELECTED{/if}>{t}not resolved{/t}</OPTION>
				</SELECT>
			</FORM>
		</TD>
	</TR>		
	{if $queuedata.total != 0}
	<TR class="DARK">
		<TD colspan="5" class="FALL">
			{include file="scroller.html" listdata=$queuedata loop=$queue}
		</TD>
	</TR>
	{/if}
	{cycle values="light,lucid" print=false}
	{section name=ticket loop=$queue start=$start max=$pagelimit}
	<TR class="{cycle}{if $queue[ticket].state == 2} blend{/if}" onmouseover="addClass(this, 'highlight')" onmouseout="removeClass(this, 'highlight')">
		<TD class="fleft" onClick="return self.location.href='?m=rtticketview&id={$queue[ticket].id}';">
			{if $queue[ticket].state == 0}
				<IMG src="img/new.gif" alt="">
			{elseif $queue[ticket].state == 1}
				<IMG src="img/open.gif" alt="">
			{elseif $queue[ticket].state == 2}
				<IMG src="img/resolved.gif" alt="">
			{elseif $queue[ticket].state == 3}
				<IMG src="img/dead.gif" alt="">
			{/if}
		</TD>
		<TD NOWRAP onClick="return self.location.href='?m=rtticketview&id={$queue[ticket].id}';">
			{if $queue[ticket].state == 0}
				<FONT class="red">
			{elseif $queue[ticket].state == 3}
				<FONT class="brown">
			{/if}
			<B>{$queue[ticket].id|string_format:"%06d"}</B><BR>
			{$queue[ticket].createtime|date_format:"%Y/%m/%d %H:%M:%S"}
			{if $queue[ticket].state == 0 || $queue[ticket].state == 3}</FONT>{/if}
		</TD>
		<TD onClick="return self.location.href='?m=rtticketview&id={$queue[ticket].id}';">
			{if $queue[ticket].state == 3}
				<FONT class="brown">
			{elseif $queue[ticket].state == 0}
				<FONT class="red">
			{/if}
			<B>{$queue[ticket].subject|escape|truncate:"60":"..."|default:"&nbsp;"}</B><BR>
			{if $queue[ticket].customerid}
				{$queue[ticket].customername|escape|truncate:"60":"..."}
			{else}
				{$queue[ticket].requestor|escape} 
			{/if}
			{if $queue[ticket].requestoremail && !$queue[ticket].customerid}
				&lt;{$queue[ticket].requestoremail}&gt;
			{/if}
			{if $queue[ticket].state == 0 || $queue[ticket].state == 3}</FONT>{/if}
		</TD>
		<TD NOWRAP onClick="return self.location.href='?m=rtticketview&id={$queue[ticket].id}';">
			{if $queue[ticket].state == 3}
				<FONT class="brown">
			{elseif $queue[ticket].state == 0}
				<FONT class="red">
			{/if}
			{if $queue[ticket].ownername}{$queue[ticket].ownername}{else}-{/if}<BR>
			{$queue[ticket].lastmodified|date_format:"%Y/%m/%d %H:%M:%S"|default:"-"}
			{if $queue[ticket].state == 0 || $queue[ticket].state == 3}</FONT>{/if}
		</TD>
		<TD class="fright" align="right" NOWRAP>
			<A href="?m=rtticketview&id={$queue[ticket].id}"><IMG src="img/info.gif" alt="[ {t}Info{/t} ]"></A>
			<A href="?m=rtticketedit&id={$queue[ticket].id}"><IMG src="img/edit.gif" alt="[ {t}Edit{/t} ]"></A>
			<A href="?m=rtqueueview&id={$queuedata.id}&delticketid={$queue[ticket].id}" onClick="return confirmLink(this, '{t 0=$queue[ticket].id}Are you sure, you want to remove ticket $0?{/t}')"><IMG src="img/delete.gif" alt="[ {t}Delete{/t} ]"></A>
			<A href="?m=rtticketprint&id={$queue[ticket].id}" target="_BLANK"><IMG src="img/print.gif" alt="[ {t}Print{/t} ]"></A>
		</TD>
	</TR>
	{sectionelse}
	<TR>
		<TD COLSPAN="5" class="flr" ALIGN="center">
			<p>&nbsp;</p>
			<p><B>{t}This queue is empty.{/t}</B></p>
			<p>&nbsp;</p>
		</TD>
	</TR>
	{/section}
	{if $queuedata.total != 0}
	<TR class="DARK">
		<TD colspan="5" class="FALL">
			{include file="scroller.html" listdata=$queuedata loop=$queue}
		</TD>
	</TR>
	{/if}
	<TR class="light">
		<TD COLSPAN="5" class="fall" ALIGN="right">
			<A HREF="?m=rtticketadd&id={$queuedata.id}">{t}New Ticket{/t} <IMG src="img/save.gif" ALT=""></A>
		</TD>
	</TR>
</TABLE>
{include file="footer.html"}
