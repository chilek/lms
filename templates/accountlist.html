{include file="header.html"}
<!--// $Id$ //-->
<H1>{$layout.pagetitle}</H1>
<P><TABLE cellpadding="3" WIDTH="100%">
	<TR class="dark"">
		<TD width="96%" class="fleftu" NOWRAP>
			<IMG src="img/account.gif" alt=""> <A href="?m=accountlist&o=login{if $listdata.direction eq "asc" && $listdata.order eq "login"},desc{/if}"><B>{t}Login:{/t}</B></A> {if $listdata.order eq "login"}<IMG src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}<BR>
			<IMG src="img/customer.gif" ALT=""> <A href="?m=accountlist&o=customername{if $listdata.direction eq "asc" && $listdata.order eq "customername"},desc{/if}">{t}Owner:{/t}</A> {if $listdata.order eq "customername"}<IMG src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</TD>
		<TD width="1%" class="fbt" align="right" valign="top" NOWRAP>
			{t}Type (sh/mail/www/ftp):{/t}<BR>
			{t}Quotas (sh/mail/www/ftp):{/t}
		</TD>
		<TD width="1%" valign="top" class="fbt" NOWRAP>
			<A href="?m=accountlist&o=id{if $listdata.direction eq "asc" && $listdata.order eq "id"},desc{/if}">{t}ID:{/t}</A> {if $listdata.order eq "id"}<IMG src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}<BR>
			<A href="?m=accountlist&o=domain{if $listdata.direction eq "asc" && $listdata.order eq "domain"},desc{/if}">{t}Domain:{/t}</A> {if $listdata.order eq "domain"}<IMG src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</TD>
		<TD width="1%" class="fbt" NOWRAP valign="top" align="right">
			<A href="?m=accountlist&o=lastlogin{if $listdata.direction eq "asc" && $listdata.order eq "lastlogin"},desc{/if}">{t}Last login:{/t}</A> {if $listdata.order eq "lastlogin"}<IMG src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}<BR>
			<A href="?m=accountlist&o=expdate{if $listdata.direction eq "asc" && $listdata.order eq "expdate"},desc{/if}">{t}Expiration date:{/t}</A> {if $listdata.order eq "expdate"}<IMG src="img/{if $listdata.direction eq "desc"}asc{else}desc{/if}_order.gif" alt="">{/if}
		</TD>
		<TD width="1%" class="frightu" NOWRAP>
			 <B>{t 0=$listdata.total}Total: $0{/t}</B>
		</TD>
	</TR>
	<TR class="DARK">
		<TD class="fall" colspan="5">
			<P><FORM method="GET" action="?m=accountlist" name="filter">
				<INPUT type="submit" class="hiddenbtn">
				<INPUT type="HIDDEN" name="m" value="accountlist">
				<INPUT type="HIDDEN" name="page" value="1">
				<B>{t}Filter:{/t} </B> {t}Owner:{/t}
				<SELECT size="1" name="u" OnChange="document.filter.submit();">
					<OPTION value=""{if $listdata.customer eq ""} SELECTED{/if}>{t}- all owners -{/t}</OPTION>
					<OPTION value="0"{if $listdata.customer eq "0"} SELECTED{/if}>{t}SYSTEM ACCOUNT{/t}</OPTION>
					{section name=customerlist loop=$customerlist}
					    <OPTION value="{$customerlist[customerlist].id}"{if $customerlist[customerlist].id eq $listdata.customer} SELECTED{/if}>{$customerlist[customerlist].customername|truncate:40:"...":true}</OPTION>
					{/section}
				</SELECT>&nbsp;
				{t}Type:{/t}
				<SELECT size="1" name="t" ONCHANGE="document.filter.submit();">
					<OPTION value="0"{if !$listdata.type} SELECTED {/if}>{t}- all -{/t}</OPTION>
					<OPTION value="1"{if $listdata.type eq 1} SELECTED {/if}>{t}shell{/t}</OPTION>
					<OPTION value="2"{if $listdata.type eq 2} SELECTED {/if}>{t}mail{/t}</OPTION>
					<OPTION value="4"{if $listdata.type eq 4} SELECTED {/if}>{t}www{/t}</OPTION>
					<OPTION value="8"{if $listdata.type eq 8} SELECTED {/if}>{t}ftp{/t}</OPTION>
				</SELECT>&nbsp;
				{t}State:{/t}
				<SELECT size="1" name="k" OnChange="document.filter.submit();">
					<OPTION value="0"{if !$listdata.kind} SELECTED {/if}>{t}- all -{/t}</OPTION>
					<OPTION value="1"{if $listdata.kind eq 1} SELECTED {/if}>{t}expired{/t}</OPTION>
					<OPTION value="2"{if $listdata.kind eq 2} SELECTED {/if}>{t}active{/t}</OPTION>
				</SELECT>&nbsp;
				{t}Domain:{/t}
				<SELECT size="1" name="d" OnChange="document.filter.submit();">
					<OPTION value=""{if $listdata.domain eq ""} SELECTED{/if}>{t}- all -{/t}</OPTION>
					<OPTION value="0"{if $listdata.domain eq "0"} SELECTED{/if}>{t}- without domain -{/t}</OPTION>
					{section name=domainlist loop=$domainlist}
					    <OPTION value="{$domainlist[domainlist].id}"{if $domainlist[domainlist].id eq $listdata.domain} SELECTED{/if}>{$domainlist[domainlist].name}</OPTION>
					{/section}
				</SELECT>
			</FORM></P>
		</TD>
	</TR>		
	{if $listdata.total != 0}
	<TR CLASS="DARK">
		<TD COLSPAN="5" CLASS="FALL">
			<B>{t}Page:{/t}
				{if $page > 1}<A HREF="?m={$layout.module}&t={$listdata.type}&k={$listdata.kind}&o={$listdata.order},{$listdata.direction}&page={math equation="x - 1" x=$page}">&laquo;&laquo;&laquo;</A>{else}&laquo;&laquo;&laquo;{/if}
				{section name=pcnt loop=$accountlist step=$pagelimit}
				{if $page eq $smarty.section.pcnt.rownum}[{else} <A HREF="?m={$layout.module}&t={$listdata.type}&k={$listdata.kind}&o={$listdata.order},{$listdata.direction}&page={$smarty.section.pcnt.rownum}">{/if}{$smarty.section.pcnt.rownum}{if $page eq $smarty.section.pcnt.rownum}]{else}</A> {/if}
				{/section}
				{if $page < $smarty.section.pcnt.rownum}<A HREF="?m={$layout.module}&t={$listdata.type}&k={$listdata.kind}&o={$listdata.order},{$listdata.direction}&page={math equation="x + 1" x=$page}">&raquo;&raquo;&raquo;</A>{else}&raquo;&raquo;&raquo;{/if}
			</B> 
			{math equation="x + 1" x=$start assign=startx}
			{if $start + $pagelimit > $listdata.total}
				{assign var=endx value=$listdata.total}{else}{math equation="x + y" x=$start y=$pagelimit assign=endx}
			{/if}
			({t 0=$startx 1=$endx 2=$listdata.total}records $0 - $1 of $2{/t})
		</TD>
	</TR>
	{/if}
	{cycle values="light,lucid" print=false}
	{section name=accountlist loop=$accountlist start=$start max=$pagelimit}
	<TR class="{cycle}{if $accountlist[accountlist].expdate != 0 && $accountlist[accountlist].expdate < $smarty.now} blend{/if}" onmouseover="addClass(this, 'highlight')" onmouseout="removeClass(this, 'highlight')">
		<TD class="fleft" OnClick="return self.location.href='?m=accountedit&id={$accountlist[accountlist].id}';">
			<nobr><IMG src="img/account.gif" alt=""><B> {$accountlist[accountlist].login}</B></nobr><BR>
			{if $accountlist[accountlist].ownerid}
			<IMG src="img/customer.gif" alt="">
			<A href="?m=customerinfo&id={$accountlist[accountlist].ownerid}">
			{$accountlist[accountlist].customername|truncate:40:"...":true} ({$accountlist[accountlist].ownerid|string_format:"%04d"})
			</A>
			{/if}
		</TD>
		<TD align="right" NOWRAP valign="top" OnClick="return self.location.href='?m=accountedit&id={$accountlist[accountlist].id}';">
			{if ($accountlist[accountlist].type & 1) == 1}*{else}-{/if}/{if ($accountlist[accountlist].type & 2) == 2}*{else}-{/if}/{if ($accountlist[accountlist].type & 4) == 4}*{else}-{/if}/{if ($accountlist[accountlist].type & 8) == 8}*{else}-{/if}<BR>
			{$accountlist[accountlist].quota_sh}/{$accountlist[accountlist].quota_mail}/{$accountlist[accountlist].quota_www}/{$accountlist[accountlist].quota_ftp}
		</TD>
		<TD valign="top" NOWRAP OnClick="return self.location.href='?m=accountedit&id={$accountlist[accountlist].id}';">
			({$accountlist[accountlist].id|string_format:"%04d"})<BR>
			{$accountlist[accountlist].domain}
		</TD>
		<TD align="right" valign="top" OnClick="return self.location.href='?m=accountedit&id={$accountlist[accountlist].id}';">
			<nobr>{if $accountlist[accountlist].lastlogin}{$accountlist[accountlist].lastlogin|date_format:"%Y/%m/%d %H:%M"}{/if}</nobr><BR>
			<nobr>{if $accountlist[accountlist].expdate}{$accountlist[accountlist].expdate|date_format:"%Y/%m/%d"}{/if}</nobr>
		</TD>
		<TD class="fright" align="right">
			<NOBR>
			<A href="?m=accountdel&id={$accountlist[accountlist].id}" OnClick="return confirmLink(this, '{t 0=$accountlist[accountlist].login}Are you sure, you want to delete account \'$0\' and all assigned to them aliases?{/t}')"><IMG src="img/delete.gif" alt="[ {t}Delete{/t} ]"></A> 
			<A href="?m=accountedit&id={$accountlist[accountlist].id}"><IMG src="img/edit.gif" alt="[ {t}Edit{/t} ]"></A> 
			<A href="?m=accountedit&op=chpasswddlg&id={$accountlist[accountlist].id}"><IMG src="img/pass.gif" ALT="[ {t}Change password{/t} ]"></A> 
			<A href="?m=aliasadd&accountid={$accountlist[accountlist].id}"><IMG src="img/alias.gif" ALT="[ {t}Create alias{/t} ]"></A> 
			</NOBR>
		</TD>
	</TR>
	{sectionelse}
	<TR>
		<TD colspan="5" align="center" class="flr">
			<p>&nbsp;</p>
			<p><B>{t}No such accounts in database.{/t}</B></p>
			<p>&nbsp;</p>
		</TD>
	</TR>
	{/section}
	{if $listdata.total != 0}
	<TR CLASS="DARK">
		<TD COLSPAN="5" CLASS="FALL">
			<B>{t}Page:{/t}
				{if $page > 1}<A HREF="?m={$layout.module}&t={$listdata.type}&k={$listdata.kind}&o={$listdata.order},{$listdata.direction}&page={math equation="x - 1" x=$page}">&laquo;&laquo;&laquo;</A>{else}&laquo;&laquo;&laquo;{/if}
				{section name=pcnt loop=$accountlist step=$pagelimit}
				{if $page eq $smarty.section.pcnt.rownum}[{else} <A HREF="?m={$layout.module}&t={$listdata.type}&k={$listdata.kind}&o={$listdata.order},{$listdata.direction}&page={$smarty.section.pcnt.rownum}">{/if}{$smarty.section.pcnt.rownum}{if $page eq $smarty.section.pcnt.rownum}]{else}</A> {/if}
				{/section}
				{if $page < $smarty.section.pcnt.rownum}<A HREF="?m={$layout.module}&t={$listdata.type}&k={$listdata.kind}&o={$listdata.order},{$listdata.direction}&page={math equation="x + 1" x=$page}">&raquo;&raquo;&raquo;</A>{else}&raquo;&raquo;&raquo;{/if}
			</B> 
			{math equation="x + 1" x=$start assign=startx}
			{if $start + $pagelimit > $listdata.total}
				{assign var=endx value=$listdata.total}{else}{math equation="x + y" x=$start y=$pagelimit assign=endx}
			{/if}
			({t 0=$startx 1=$endx 2=$listdata.total}records $0 - $1 of $2{/t})
		</TD>
	</TR>
	{/if}
	<TR class="light">
		<TD colspan="4" class="fleftu" align="right" valign="top">
			<IMG SRC="img/info2.gif" alt=""> <B>{t 0=$listdata.total}Total: $0{/t}</B>	
		</TD>
		<TD class="frightu">
			&nbsp;
		</TD>
	</TR>
</TABLE></P>
{include file="footer.html"}
