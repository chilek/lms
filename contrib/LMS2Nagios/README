pyLMS2Nagios v6

Wspó³pracuje z LMS v1.11-git
Wspó³pracuje z nagios-2.9
Wymaga bazy MySQL
System pracuje na PLD v2.0, powinno dzia³aæ na dowolnym systemie uniksowym
z zainstalowanym pythonem oraz modu³em mysqld
Release: nie lip 29 20:02:51 CEST 2007 

Przemys³aw Stanis³aw Knycz <djrzulf>
pknycz@kolnet.eu

Ustawienia:

1. Skrypt zak³ada instalacjê plików konfiguracyjnych nagiosa w /etc/nagios/
2. Uwaga - skrypt posiada wykrywanie prze³adowania z LMSa, lecz nie jest ono
   kompatybilne ze standartowym prze³adowaniem z LMSa.
3. Skrypt potrafi pracowaæ z wieloma LMSami (zmienna "lmsy", dodanie kolejnego
   lmsa np: lmsy=['lms1','lms2','lms3'] etc...),
4. Pierwsze zapytanie - szuka sieci zdefiniowanych, z których bêdzie wyci±ga³
   hosty nie posiadaj±ce w³a¶ciciela. Zapytanie eliminuje z wyników adresy publiczne,
   adresy (82.160.*), adresy prywante z zakresów 192.168.82.0-192.168.87.0,
   sieci zawieraj±ce nazwy 'ADDR' oraz 'PRIV', których nie chcemy by by³y monitorowane.
5. Drugie zapytanie - konwertuje d³ugo¶æ do postaci NAME (mysql inet_aton), tutaj funkcja
   dzia³a z ka¿dymi (chyba) d³ugo¶ciami sieci, mi dzia³a z /24, /25, /26, /27, /28 oraz /29
   wiêcej/mniej nie testowa³em, ale powinno nie byæ problemów :)
4. Trzecie zapytanie - wybiera hosty z danej klasy adresowej rozpoczynaj±ce siê od s³ów:
   BTS lub RTR, wiem, ¿e to mo¿e jest trochê niedogodne - mo¿ecie modyfikowaæ bez ¿adnych
   przeszkód :)
5. Czwarte zapytanie - tutaj w okó³ tego, jest ma³a intryga, wypada³o by zrobiæ pobieranie
   gw dla sieci z LMSa, lecz szczerze pisz±c pro¶ciej mi by³o za³o¿yæ, ¿e brama = adres sieci+1
   i viola - do nagiosa trafiaj± nam równie¿ monitoringi bram zdalnych urz±dzeñ
   (jak równiez lokalnych), ot taka nowo¶æ w stosunku do starszej wersji :), jakby to kto¶
   przerobi³ ¿eby pobiera³o 
6. Pi±te zapytanie - wrzuca do LMS'a informacjê, ¿e siê prze³adowa³.

autoaktualizuj.sh - wrzuciæ do cron'a

TODO:
- zintegrowaæ do jednego pliku - po cholerê dwa? :)
- skompatybilizowaæ z oryginalnym reloadem LMSa,
- mo¿e wersja dla Postgresql ? :)

