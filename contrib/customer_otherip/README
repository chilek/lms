$Id$

Spis rzeczy:

1) co to
2) sql i pin
3) lms-notify
4) ikonki
5) pos³owie


1) co to

Jest to mini panel dla u¿ytkowników którzy:

a) korzystaj± z proxy
b) nie korzystaj± z sieci tylko w domu
c) nie chc± aby dzieci/ma³¿onkowie/pracownicy mieli wgl±d w dane fiansowe 
dotycz±ce ich dostêpu do sieci/innych us³ug sprzedawanych przez LMS.

2) sql i pin

Na pocz±tek kolumna pin:

mysql> ALTER TABLE users ADD COLUMN pin int(5)=31337;
pgsql> ALTER TABLE users ADD COLUMN pin integer;

*warto¶æ domy¶ln± pinu dobrze jest zmieniæ*

Potem dla ka¿dego u¿ytkownika warto¶æ domy¶lna:

mysql> UPDATE users SET pin=RAND()*10 + RAND()*100 + RAND()*1000 
	+ RAND()*10000 + RAND()*100000-1;
pgsql> UPDATE users SET pin=random()*10 + random()*100 + random()*1000 
	+ random()*10000 + random()*100000-1;
	
3) lms-notify
	
Dobrze jest te¿ powiadomiæ u¿ytkowników w co rocznym/miesiêcznym/tygodniowym 
mailu rozrachunkowo-newsletterowym:


"
Jednocze¶nie informujemy o wprowadzeniu mo¿liwo¶ci sprawdzenia stanu
swojego konta w ka¿dej chwili:

http://www.TwójUrl.pl/lms/contrib/clients/

Pañstwa PIN to: %pin
"
Oraz zmieniæ lms-notify np tak (dodaæ pin w zapytaniu SELECT):

(okolice 160 linni)

#V+
my $dbq = $dbase->prepare("SELECT users.id AS id, pin, lastname, name, email, phone1
			SUM((type * -1 + 7) * value) AS balance 
			FROM users LEFT JOIN cash ON users.id = cash.userid
			GROUP BY users.id, lastname, name, pin, email, phone1 
			HAVING ...");
#v-
	
Oraz dodaæ mo¿liwo¶æ podmiany %pin w mailach (opkolice 250 linijki):

#V+
{
	my $pin = $row->{'pin'};
	$line =~ s/\%pin/$pin/;
}
#V-



4) ikonki

Ikonki aby dzia³a³y dobrze jest daæ np:

$ ln -s ../../img img

w katalogu contrib/customer_otherip, oraz "Options +followlinks w apachu".

5) pos³owie

SOA#1
